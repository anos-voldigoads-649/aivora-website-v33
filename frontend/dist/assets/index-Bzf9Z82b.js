function MI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function UI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lf={exports:{}},xe={};var Oy;function FI(){if(Oy)return xe;Oy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,U={};function k(V,G,Ae){this.props=V,this.context=G,this.refs=U,this.updater=Ae||M}k.prototype.isReactComponent={},k.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=k.prototype;function ne(V,G,Ae){this.props=V,this.context=G,this.refs=U,this.updater=Ae||M}var X=ne.prototype=new J;X.constructor=ne,b(X,k.prototype),X.isPureReactComponent=!0;var se=Array.isArray,de=Object.prototype.hasOwnProperty,ge={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function R(V,G,Ae){var Se,Oe={},Le=null,He=null;if(G!=null)for(Se in G.ref!==void 0&&(He=G.ref),G.key!==void 0&&(Le=""+G.key),G)de.call(G,Se)&&!N.hasOwnProperty(Se)&&(Oe[Se]=G[Se]);var je=arguments.length-2;if(je===1)Oe.children=Ae;else if(1<je){for(var Qe=Array(je),Qt=0;Qt<je;Qt++)Qe[Qt]=arguments[Qt+2];Oe.children=Qe}if(V&&V.defaultProps)for(Se in je=V.defaultProps,je)Oe[Se]===void 0&&(Oe[Se]=je[Se]);return{$$typeof:n,type:V,key:Le,ref:He,props:Oe,_owner:ge.current}}function P(V,G){return{$$typeof:n,type:V.type,key:G,ref:V.ref,props:V.props,_owner:V._owner}}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function D(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Ae){return G[Ae]})}var C=/\/+/g;function I(V,G){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):G.toString(36)}function ye(V,G,Ae,Se,Oe){var Le=typeof V;(Le==="undefined"||Le==="boolean")&&(V=null);var He=!1;if(V===null)He=!0;else switch(Le){case"string":case"number":He=!0;break;case"object":switch(V.$$typeof){case n:case e:He=!0}}if(He)return He=V,Oe=Oe(He),V=Se===""?"."+I(He,0):Se,se(Oe)?(Ae="",V!=null&&(Ae=V.replace(C,"$&/")+"/"),ye(Oe,G,Ae,"",function(Qt){return Qt})):Oe!=null&&(x(Oe)&&(Oe=P(Oe,Ae+(!Oe.key||He&&He.key===Oe.key?"":(""+Oe.key).replace(C,"$&/")+"/")+V)),G.push(Oe)),1;if(He=0,Se=Se===""?".":Se+":",se(V))for(var je=0;je<V.length;je++){Le=V[je];var Qe=Se+I(Le,je);He+=ye(Le,G,Ae,Qe,Oe)}else if(Qe=S(V),typeof Qe=="function")for(V=Qe.call(V),je=0;!(Le=V.next()).done;)Le=Le.value,Qe=Se+I(Le,je++),He+=ye(Le,G,Ae,Qe,Oe);else if(Le==="object")throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return He}function De(V,G,Ae){if(V==null)return V;var Se=[],Oe=0;return ye(V,Se,"","",function(Le){return G.call(Ae,Le,Oe++)}),Se}function Ie(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(Ae){(V._status===0||V._status===-1)&&(V._status=1,V._result=Ae)},function(Ae){(V._status===0||V._status===-1)&&(V._status=2,V._result=Ae)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var be={current:null},te={transition:null},pe={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:te,ReactCurrentOwner:ge};function oe(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:De,forEach:function(V,G,Ae){De(V,function(){G.apply(this,arguments)},Ae)},count:function(V){var G=0;return De(V,function(){G++}),G},toArray:function(V){return De(V,function(G){return G})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},xe.Component=k,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=ne,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,xe.act=oe,xe.cloneElement=function(V,G,Ae){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Se=b({},V.props),Oe=V.key,Le=V.ref,He=V._owner;if(G!=null){if(G.ref!==void 0&&(Le=G.ref,He=ge.current),G.key!==void 0&&(Oe=""+G.key),V.type&&V.type.defaultProps)var je=V.type.defaultProps;for(Qe in G)de.call(G,Qe)&&!N.hasOwnProperty(Qe)&&(Se[Qe]=G[Qe]===void 0&&je!==void 0?je[Qe]:G[Qe])}var Qe=arguments.length-2;if(Qe===1)Se.children=Ae;else if(1<Qe){je=Array(Qe);for(var Qt=0;Qt<Qe;Qt++)je[Qt]=arguments[Qt+2];Se.children=je}return{$$typeof:n,type:V.type,key:Oe,ref:Le,props:Se,_owner:He}},xe.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},xe.createElement=R,xe.createFactory=function(V){var G=R.bind(null,V);return G.type=V,G},xe.createRef=function(){return{current:null}},xe.forwardRef=function(V){return{$$typeof:d,render:V}},xe.isValidElement=x,xe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:Ie}},xe.memo=function(V,G){return{$$typeof:y,type:V,compare:G===void 0?null:G}},xe.startTransition=function(V){var G=te.transition;te.transition={};try{V()}finally{te.transition=G}},xe.unstable_act=oe,xe.useCallback=function(V,G){return be.current.useCallback(V,G)},xe.useContext=function(V){return be.current.useContext(V)},xe.useDebugValue=function(){},xe.useDeferredValue=function(V){return be.current.useDeferredValue(V)},xe.useEffect=function(V,G){return be.current.useEffect(V,G)},xe.useId=function(){return be.current.useId()},xe.useImperativeHandle=function(V,G,Ae){return be.current.useImperativeHandle(V,G,Ae)},xe.useInsertionEffect=function(V,G){return be.current.useInsertionEffect(V,G)},xe.useLayoutEffect=function(V,G){return be.current.useLayoutEffect(V,G)},xe.useMemo=function(V,G){return be.current.useMemo(V,G)},xe.useReducer=function(V,G,Ae){return be.current.useReducer(V,G,Ae)},xe.useRef=function(V){return be.current.useRef(V)},xe.useState=function(V){return be.current.useState(V)},xe.useSyncExternalStore=function(V,G,Ae){return be.current.useSyncExternalStore(V,G,Ae)},xe.useTransition=function(){return be.current.useTransition()},xe.version="18.3.1",xe}var Dy;function Wv(){return Dy||(Dy=1,lf.exports=FI()),lf.exports}var Z=Wv();const F=UI(Z),BI=MI({__proto__:null,default:F},[Z]);var wc={},uf={exports:{}},sn={},cf={exports:{}},hf={};var xy;function jI(){return xy||(xy=1,(function(n){function e(te,pe){var oe=te.length;te.push(pe);e:for(;0<oe;){var V=oe-1>>>1,G=te[V];if(0<o(G,pe))te[V]=pe,te[oe]=G,oe=V;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var pe=te[0],oe=te.pop();if(oe!==pe){te[0]=oe;e:for(var V=0,G=te.length,Ae=G>>>1;V<Ae;){var Se=2*(V+1)-1,Oe=te[Se],Le=Se+1,He=te[Le];if(0>o(Oe,oe))Le<G&&0>o(He,Oe)?(te[V]=He,te[Le]=oe,V=Le):(te[V]=Oe,te[Se]=oe,V=Se);else if(Le<G&&0>o(He,oe))te[V]=He,te[Le]=oe,V=Le;else break e}}return pe}function o(te,pe){var oe=te.sortIndex-pe.sortIndex;return oe!==0?oe:te.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],y=[],v=1,w=null,S=3,M=!1,b=!1,U=!1,k=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(te){for(var pe=t(y);pe!==null;){if(pe.callback===null)i(y);else if(pe.startTime<=te)i(y),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(y)}}function se(te){if(U=!1,X(te),!b)if(t(p)!==null)b=!0,Ie(de);else{var pe=t(y);pe!==null&&be(se,pe.startTime-te)}}function de(te,pe){b=!1,U&&(U=!1,J(R),R=-1),M=!0;var oe=S;try{for(X(pe),w=t(p);w!==null&&(!(w.expirationTime>pe)||te&&!D());){var V=w.callback;if(typeof V=="function"){w.callback=null,S=w.priorityLevel;var G=V(w.expirationTime<=pe);pe=n.unstable_now(),typeof G=="function"?w.callback=G:w===t(p)&&i(p),X(pe)}else i(p);w=t(p)}if(w!==null)var Ae=!0;else{var Se=t(y);Se!==null&&be(se,Se.startTime-pe),Ae=!1}return Ae}finally{w=null,S=oe,M=!1}}var ge=!1,N=null,R=-1,P=5,x=-1;function D(){return!(n.unstable_now()-x<P)}function C(){if(N!==null){var te=n.unstable_now();x=te;var pe=!0;try{pe=N(!0,te)}finally{pe?I():(ge=!1,N=null)}}else ge=!1}var I;if(typeof ne=="function")I=function(){ne(C)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,De=ye.port2;ye.port1.onmessage=C,I=function(){De.postMessage(null)}}else I=function(){k(C,0)};function Ie(te){N=te,ge||(ge=!0,I())}function be(te,pe){R=k(function(){te(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){b||M||(b=!0,Ie(de))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(te){switch(S){case 1:case 2:case 3:var pe=3;break;default:pe=S}var oe=S;S=pe;try{return te()}finally{S=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,pe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var oe=S;S=te;try{return pe()}finally{S=oe}},n.unstable_scheduleCallback=function(te,pe,oe){var V=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?V+oe:V):oe=V,te){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,te={id:v++,callback:pe,priorityLevel:te,startTime:oe,expirationTime:G,sortIndex:-1},oe>V?(te.sortIndex=oe,e(y,te),t(p)===null&&te===t(y)&&(U?(J(R),R=-1):U=!0,be(se,oe-V))):(te.sortIndex=G,e(p,te),b||M||(b=!0,Ie(de))),te},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(te){var pe=S;return function(){var oe=S;S=pe;try{return te.apply(this,arguments)}finally{S=oe}}}})(hf)),hf}var Ly;function zI(){return Ly||(Ly=1,cf.exports=jI()),cf.exports}var Vy;function $I(){if(Vy)return sn;Vy=1;var n=Wv(),e=zI();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function S(r){return p.call(w,r)?!0:p.call(v,r)?!1:y.test(r)?w[r]=!0:(v[r]=!0,!1)}function M(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function b(r,s,l,h){if(s===null||typeof s>"u"||M(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,l,h,f,m,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=m,this.removeEmptyString=E}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];k[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function ne(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(J,ne);k[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(J,ne);k[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(J,ne);k[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,l,h){var f=k.hasOwnProperty(s)?k[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,l,f,h)&&(l=null),h||f===null?S(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var se=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),ge=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),D=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),te=Symbol.iterator;function pe(r){return r===null||typeof r!="object"?null:(r=te&&r[te]||r["@@iterator"],typeof r=="function"?r:null)}var oe=Object.assign,V;function G(r){if(V===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+r}var Ae=!1;function Se(r,s){if(!r||Ae)return"";Ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),m=h.stack.split(`
`),E=f.length-1,A=m.length-1;1<=E&&0<=A&&f[E]!==m[A];)A--;for(;1<=E&&0<=A;E--,A--)if(f[E]!==m[A]){if(E!==1||A!==1)do if(E--,A--,0>A||f[E]!==m[A]){var O=`
`+f[E].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=E&&0<=A);break}}}finally{Ae=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?G(r):""}function Oe(r){switch(r.tag){case 5:return G(r.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function Le(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case ge:return"Portal";case P:return"Profiler";case R:return"StrictMode";case I:return"Suspense";case ye:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case C:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case De:return s=r.displayName||null,s!==null?s:Le(r.type)||"Memo";case Ie:s=r._payload,r=r._init;try{return Le(r(s))}catch{}}return null}function He(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function je(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Qt(r){var s=Qe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){h=""+E,m.call(this,E)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Js(r){r._valueTracker||(r._valueTracker=Qt(r))}function ya(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Qe(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function ni(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Zs(r,s){var l=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function ou(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=je(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function eo(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function ts(r,s){eo(r,s);var l=je(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?gt(r,s.type,l):s.hasOwnProperty("defaultValue")&&gt(r,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function _a(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function gt(r,s,l){(s!=="number"||ni(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var dt=Array.isArray;function bn(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+je(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function va(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ea(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(dt(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:je(l)}}function au(r,s){var l=je(s.value),h=je(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function ri(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function wa(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function to(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?wa(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ii,lu=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ii.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ns(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uu=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(r){uu.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),si[s]=si[r]})});function oi(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||si.hasOwnProperty(r)&&si[r]?(""+s).trim():s+"px"}function no(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=oi(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var Ta=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function On(r,s){if(s){if(Ta[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ro(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function io(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ar=null,Cr=null,ut=null;function Ia(r){if(r=Xa(r)){if(typeof Ar!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Vu(s),Ar(r.stateNode,r.type,s))}}function li(r){Cr?ut?ut.push(r):ut=[r]:Cr=r}function ui(){if(Cr){var r=Cr,s=ut;if(ut=Cr=null,Ia(r),s)for(r=0;r<s.length;r++)Ia(s[r])}}function cu(r,s){return r(s)}function hu(){}var Wn=!1;function du(r,s,l){if(Wn)return r(s,l);Wn=!0;try{return cu(r,s,l)}finally{Wn=!1,(Cr!==null||ut!==null)&&(hu(),ui())}}function rs(r,s){var l=r.stateNode;if(l===null)return null;var h=Vu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var ci=!1;if(d)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){ci=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{ci=!1}function fu(r,s,l,h,f,m,E,A,O){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(Y){this.onError(Y)}}var Pr=!1,Gn=null,so=!1,wn=null,pu={onError:function(r){Pr=!0,Gn=r}};function mu(r,s,l,h,f,m,E,A,O){Pr=!1,Gn=null,fu.apply(pu,arguments)}function Sa(r,s,l,h,f,m,E,A,O){if(mu.apply(this,arguments),Pr){if(Pr){var $=Gn;Pr=!1,Gn=null}else throw Error(t(198));so||(so=!0,wn=$)}}function Dn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Ra(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function gu(r){if(Dn(r)!==r)throw Error(t(188))}function yu(r){var s=r.alternate;if(!s){if(s=Dn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return gu(f),r;if(m===h)return gu(f),s;m=m.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=m;else{for(var E=!1,A=f.child;A;){if(A===l){E=!0,l=f,h=m;break}if(A===h){E=!0,h=f,l=m;break}A=A.sibling}if(!E){for(A=m.child;A;){if(A===l){E=!0,l=m,h=f;break}if(A===h){E=!0,h=m,l=f;break}A=A.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function _u(r){return r=yu(r),r!==null?is(r):null}function is(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=is(r);if(s!==null)return s;r=r.sibling}return null}var Aa=e.unstable_scheduleCallback,oo=e.unstable_cancelCallback,ss=e.unstable_shouldYield,kr=e.unstable_requestPaint,Ze=e.unstable_now,Uh=e.unstable_getCurrentPriorityLevel,ao=e.unstable_ImmediatePriority,Ca=e.unstable_UserBlockingPriority,os=e.unstable_NormalPriority,Pa=e.unstable_LowPriority,lo=e.unstable_IdlePriority,as=null,cn=null;function vu(r){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(as,r,void 0,(r.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:ls,Kn=Math.log,Tn=Math.LN2;function ls(r){return r>>>=0,r===0?32:31-(Kn(r)/Tn|0)|0}var Qn=64,di=4194304;function qe(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Nr(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,m=r.pingedLanes,E=l&268435455;if(E!==0){var A=E&~f;A!==0?h=qe(A):(m&=E,m!==0&&(h=qe(m)))}else E=l&~f,E!==0?h=qe(E):m!==0&&(h=qe(m));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-hn(s),f=1<<l,h|=r[l],s&=~f;return h}function us(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cs(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes;0<m;){var E=31-hn(m),A=1<<E,O=f[E];O===-1?((A&l)===0||(A&h)!==0)&&(f[E]=us(A,s)):O<=s&&(r.expiredLanes|=A),m&=~A}}function ka(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Na(){var r=Qn;return Qn<<=1,(Qn&4194240)===0&&(Qn=64),r}function ba(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function hs(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-hn(s),r[s]=l}function Fh(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-hn(l),m=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~m}}function Oa(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-hn(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Fe=0;function Xn(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Da,uo,xa,La,Va,Yn=!1,co=[],Jn=null,Zn=null,Ot=null,ds=new Map,br=new Map,dn=[],Eu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fi(r,s){switch(r){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":ds.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":br.delete(s.pointerId)}}function xn(r,s,l,h,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Xa(s),s!==null&&uo(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function wu(r,s,l,h,f){switch(s){case"focusin":return Jn=xn(Jn,r,s,l,h,f),!0;case"dragenter":return Zn=xn(Zn,r,s,l,h,f),!0;case"mouseover":return Ot=xn(Ot,r,s,l,h,f),!0;case"pointerover":var m=f.pointerId;return ds.set(m,xn(ds.get(m)||null,r,s,l,h,f)),!0;case"gotpointercapture":return m=f.pointerId,br.set(m,xn(br.get(m)||null,r,s,l,h,f)),!0}return!1}function ho(r){var s=gs(r.target);if(s!==null){var l=Dn(s);if(l!==null){if(s=l.tag,s===13){if(s=Ra(l),s!==null){r.blockedOn=s,Va(r.priority,function(){xa(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xe(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=fo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);ai=h,l.target.dispatchEvent(h),ai=null}else return s=Xa(l),s!==null&&uo(s),r.blockedOn=l,!1;s.shift()}return!0}function Tu(r,s,l){Xe(r)&&l.delete(s)}function Bh(){Yn=!1,Jn!==null&&Xe(Jn)&&(Jn=null),Zn!==null&&Xe(Zn)&&(Zn=null),Ot!==null&&Xe(Ot)&&(Ot=null),ds.forEach(Tu),br.forEach(Tu)}function pi(r,s){r.blockedOn===s&&(r.blockedOn=null,Yn||(Yn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bh)))}function mi(r){function s(f){return pi(f,r)}if(0<co.length){pi(co[0],r);for(var l=1;l<co.length;l++){var h=co[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Jn!==null&&pi(Jn,r),Zn!==null&&pi(Zn,r),Ot!==null&&pi(Ot,r),ds.forEach(s),br.forEach(s),l=0;l<dn.length;l++)h=dn[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<dn.length&&(l=dn[0],l.blockedOn===null);)ho(l),l.blockedOn===null&&dn.shift()}var Or=se.ReactCurrentBatchConfig,Dr=!0;function er(r,s,l,h){var f=Fe,m=Or.transition;Or.transition=null;try{Fe=1,Ma(r,s,l,h)}finally{Fe=f,Or.transition=m}}function Iu(r,s,l,h){var f=Fe,m=Or.transition;Or.transition=null;try{Fe=4,Ma(r,s,l,h)}finally{Fe=f,Or.transition=m}}function Ma(r,s,l,h){if(Dr){var f=fo(r,s,l,h);if(f===null)Yh(r,s,h,tr,l),fi(r,h);else if(wu(f,r,s,l,h))h.stopPropagation();else if(fi(r,h),s&4&&-1<Eu.indexOf(r)){for(;f!==null;){var m=Xa(f);if(m!==null&&Da(m),m=fo(r,s,l,h),m===null&&Yh(r,s,h,tr,l),m===f)break;f=m}f!==null&&h.stopPropagation()}else Yh(r,s,h,null,l)}}var tr=null;function fo(r,s,l,h){if(tr=null,r=io(h),r=gs(r),r!==null)if(s=Dn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Ra(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return tr=r,null}function po(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uh()){case ao:return 1;case Ca:return 4;case os:case Pa:return 16;case lo:return 536870912;default:return 16}default:return 16}}var fn=null,mo=null,xr=null;function Su(){if(xr)return xr;var r,s=mo,l=s.length,h,f="value"in fn?fn.value:fn.textContent,m=f.length;for(r=0;r<l&&s[r]===f[r];r++);var E=l-r;for(h=1;h<=E&&s[l-h]===f[m-h];h++);return xr=f.slice(r,1<h?1-h:void 0)}function fs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function nr(){return!0}function Ua(){return!1}function Ft(r){function s(l,h,f,m,E){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(l=r[A],this[A]=l?l(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?nr:Ua,this.isPropagationStopped=Ua,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),s}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ps=Ft(rr),gi=oe({},rr,{view:0,detail:0}),go=Ft(gi),yo,_o,pn,ms=oe({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pe,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==pn&&(pn&&r.type==="mousemove"?(yo=r.screenX-pn.screenX,_o=r.screenY-pn.screenY):_o=yo=0,pn=r),yo)},movementY:function(r){return"movementY"in r?r.movementY:_o}}),Fa=Ft(ms),Ru=oe({},ms,{dataTransfer:0}),Au=Ft(Ru),vo=oe({},gi,{relatedTarget:0}),Dt=Ft(vo),Cu=oe({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=Ft(Cu),yi=oe({},rr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),c=Ft(yi),g=oe({},rr,{data:0}),_=Ft(g),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=q[r])?!!s[r]:!1}function Pe(){return ie}var ft=oe({},gi,{key:function(r){if(r.key){var s=T[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=fs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?j[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pe,charCode:function(r){return r.type==="keypress"?fs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ke=Ft(ft),yt=oe({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mn=Ft(yt),Lr=oe({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pe}),ir=Ft(Lr),sr=oe({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eo=Ft(sr),Ba=oe({},ms,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=Ft(Ba),O0=[9,13,27,32],jh=d&&"CompositionEvent"in window,ja=null;d&&"documentMode"in document&&(ja=document.documentMode);var D0=d&&"TextEvent"in window&&!ja,Sm=d&&(!jh||ja&&8<ja&&11>=ja),Rm=" ",Am=!1;function Cm(r,s){switch(r){case"keyup":return O0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var wo=!1;function x0(r,s){switch(r){case"compositionend":return Pm(s);case"keypress":return s.which!==32?null:(Am=!0,Rm);case"textInput":return r=s.data,r===Rm&&Am?null:r;default:return null}}function L0(r,s){if(wo)return r==="compositionend"||!jh&&Cm(r,s)?(r=Su(),xr=mo=fn=null,wo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Sm&&s.locale!=="ko"?null:s.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function km(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!V0[r.type]:s==="textarea"}function Nm(r,s,l,h){li(h),s=Du(s,"onChange"),0<s.length&&(l=new ps("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var za=null,$a=null;function M0(r){Km(r,0)}function ku(r){var s=Ao(r);if(ya(s))return r}function U0(r,s){if(r==="change")return s}var bm=!1;if(d){var zh;if(d){var $h="oninput"in document;if(!$h){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),$h=typeof Om.oninput=="function"}zh=$h}else zh=!1;bm=zh&&(!document.documentMode||9<document.documentMode)}function Dm(){za&&(za.detachEvent("onpropertychange",xm),$a=za=null)}function xm(r){if(r.propertyName==="value"&&ku($a)){var s=[];Nm(s,$a,r,io(r)),du(M0,s)}}function F0(r,s,l){r==="focusin"?(Dm(),za=s,$a=l,za.attachEvent("onpropertychange",xm)):r==="focusout"&&Dm()}function B0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ku($a)}function j0(r,s){if(r==="click")return ku(s)}function z0(r,s){if(r==="input"||r==="change")return ku(s)}function $0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ln=typeof Object.is=="function"?Object.is:$0;function qa(r,s){if(Ln(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Ln(r[f],s[f]))return!1}return!0}function Lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Vm(r,s){var l=Lm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Lm(l)}}function Mm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Mm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Um(){for(var r=window,s=ni();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=ni(r.document)}return s}function qh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function q0(r){var s=Um(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Mm(l.ownerDocument.documentElement,l)){if(h!==null&&qh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!r.extend&&m>h&&(f=h,h=m,m=f),f=Vm(l,m);var E=Vm(l,h);f&&E&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),m>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var H0=d&&"documentMode"in document&&11>=document.documentMode,To=null,Hh=null,Ha=null,Wh=!1;function Fm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wh||To==null||To!==ni(h)||(h=To,"selectionStart"in h&&qh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ha&&qa(Ha,h)||(Ha=h,h=Du(Hh,"onSelect"),0<h.length&&(s=new ps("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=To)))}function Nu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Io={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},Gh={},Bm={};d&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function bu(r){if(Gh[r])return Gh[r];if(!Io[r])return r;var s=Io[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Bm)return Gh[r]=s[l];return r}var jm=bu("animationend"),zm=bu("animationiteration"),$m=bu("animationstart"),qm=bu("transitionend"),Hm=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(r,s){Hm.set(r,s),a(s,[r])}for(var Kh=0;Kh<Wm.length;Kh++){var Qh=Wm[Kh],W0=Qh.toLowerCase(),G0=Qh[0].toUpperCase()+Qh.slice(1);_i(W0,"on"+G0)}_i(jm,"onAnimationEnd"),_i(zm,"onAnimationIteration"),_i($m,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(qm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function Gm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Sa(h,s,void 0,r),r.currentTarget=null}function Km(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var E=h.length-1;0<=E;E--){var A=h[E],O=A.instance,$=A.currentTarget;if(A=A.listener,O!==m&&f.isPropagationStopped())break e;Gm(f,A,$),m=O}else for(E=0;E<h.length;E++){if(A=h[E],O=A.instance,$=A.currentTarget,A=A.listener,O!==m&&f.isPropagationStopped())break e;Gm(f,A,$),m=O}}}if(so)throw r=wn,so=!1,wn=null,r}function et(r,s){var l=s[rd];l===void 0&&(l=s[rd]=new Set);var h=r+"__bubble";l.has(h)||(Qm(s,r,2,!1),l.add(h))}function Xh(r,s,l){var h=0;s&&(h|=4),Qm(l,r,h,s)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Ga(r){if(!r[Ou]){r[Ou]=!0,i.forEach(function(l){l!=="selectionchange"&&(K0.has(l)||Xh(l,!1,r),Xh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ou]||(s[Ou]=!0,Xh("selectionchange",!1,s))}}function Qm(r,s,l,h){switch(po(s)){case 1:var f=er;break;case 4:f=Iu;break;default:f=Ma}l=f.bind(null,s,l,r),f=void 0,!ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Yh(r,s,l,h,f){var m=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var A=h.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(E===4)for(E=h.return;E!==null;){var O=E.tag;if((O===3||O===4)&&(O=E.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;E=E.return}for(;A!==null;){if(E=gs(A),E===null)return;if(O=E.tag,O===5||O===6){h=m=E;continue e}A=A.parentNode}}h=h.return}du(function(){var $=m,Y=io(l),ee=[];e:{var Q=Hm.get(r);if(Q!==void 0){var le=ps,he=r;switch(r){case"keypress":if(fs(l)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":he="focus",le=Dt;break;case"focusout":he="blur",le=Dt;break;case"beforeblur":case"afterblur":le=Dt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=ir;break;case jm:case zm:case $m:le=Pu;break;case qm:le=Eo;break;case"scroll":le=go;break;case"wheel":le=b0;break;case"copy":case"cut":case"paste":le=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=mn}var fe=(s&4)!==0,pt=!fe&&r==="scroll",B=fe?Q!==null?Q+"Capture":null:Q;fe=[];for(var L=$,z;L!==null;){z=L;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,B!==null&&(re=rs(L,B),re!=null&&fe.push(Ka(L,re,z)))),pt)break;L=L.return}0<fe.length&&(Q=new le(Q,he,null,l,Y),ee.push({event:Q,listeners:fe}))}}if((s&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",Q&&l!==ai&&(he=l.relatedTarget||l.fromElement)&&(gs(he)||he[Vr]))break e;if((le||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,le?(he=l.relatedTarget||l.toElement,le=$,he=he?gs(he):null,he!==null&&(pt=Dn(he),he!==pt||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=$),le!==he)){if(fe=Fa,re="onMouseLeave",B="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(fe=mn,re="onPointerLeave",B="onPointerEnter",L="pointer"),pt=le==null?Q:Ao(le),z=he==null?Q:Ao(he),Q=new fe(re,L+"leave",le,l,Y),Q.target=pt,Q.relatedTarget=z,re=null,gs(Y)===$&&(fe=new fe(B,L+"enter",he,l,Y),fe.target=z,fe.relatedTarget=pt,re=fe),pt=re,le&&he)t:{for(fe=le,B=he,L=0,z=fe;z;z=So(z))L++;for(z=0,re=B;re;re=So(re))z++;for(;0<L-z;)fe=So(fe),L--;for(;0<z-L;)B=So(B),z--;for(;L--;){if(fe===B||B!==null&&fe===B.alternate)break t;fe=So(fe),B=So(B)}fe=null}else fe=null;le!==null&&Xm(ee,Q,le,fe,!1),he!==null&&pt!==null&&Xm(ee,pt,he,fe,!0)}}e:{if(Q=$?Ao($):window,le=Q.nodeName&&Q.nodeName.toLowerCase(),le==="select"||le==="input"&&Q.type==="file")var me=U0;else if(km(Q))if(bm)me=z0;else{me=B0;var ve=F0}else(le=Q.nodeName)&&le.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(me=j0);if(me&&(me=me(r,$))){Nm(ee,me,l,Y);break e}ve&&ve(r,Q,$),r==="focusout"&&(ve=Q._wrapperState)&&ve.controlled&&Q.type==="number"&&gt(Q,"number",Q.value)}switch(ve=$?Ao($):window,r){case"focusin":(km(ve)||ve.contentEditable==="true")&&(To=ve,Hh=$,Ha=null);break;case"focusout":Ha=Hh=To=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,Fm(ee,l,Y);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":Fm(ee,l,Y)}var Ee;if(jh)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else wo?Cm(r,l)&&(Re="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(Sm&&l.locale!=="ko"&&(wo||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&wo&&(Ee=Su()):(fn=Y,mo="value"in fn?fn.value:fn.textContent,wo=!0)),ve=Du($,Re),0<ve.length&&(Re=new _(Re,r,null,l,Y),ee.push({event:Re,listeners:ve}),Ee?Re.data=Ee:(Ee=Pm(l),Ee!==null&&(Re.data=Ee)))),(Ee=D0?x0(r,l):L0(r,l))&&($=Du($,"onBeforeInput"),0<$.length&&(Y=new _("onBeforeInput","beforeinput",null,l,Y),ee.push({event:Y,listeners:$}),Y.data=Ee))}Km(ee,s)})}function Ka(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Du(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=rs(r,l),m!=null&&h.unshift(Ka(r,m,f)),m=rs(r,s),m!=null&&h.push(Ka(r,m,f))),r=r.return}return h}function So(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Xm(r,s,l,h,f){for(var m=s._reactName,E=[];l!==null&&l!==h;){var A=l,O=A.alternate,$=A.stateNode;if(O!==null&&O===h)break;A.tag===5&&$!==null&&(A=$,f?(O=rs(l,m),O!=null&&E.unshift(Ka(l,O,A))):f||(O=rs(l,m),O!=null&&E.push(Ka(l,O,A)))),l=l.return}E.length!==0&&r.push({event:s,listeners:E})}var Q0=/\r\n?/g,X0=/\u0000|\uFFFD/g;function Ym(r){return(typeof r=="string"?r:""+r).replace(Q0,`
`).replace(X0,"")}function xu(r,s,l){if(s=Ym(s),Ym(r)!==s&&l)throw Error(t(425))}function Lu(){}var Jh=null,Zh=null;function ed(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var td=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,J0=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(r){return Jm.resolve(null).then(r).catch(Z0)}:td;function Z0(r){setTimeout(function(){throw r})}function nd(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),mi(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);mi(s)}function vi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Zm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),or="__reactFiber$"+Ro,Qa="__reactProps$"+Ro,Vr="__reactContainer$"+Ro,rd="__reactEvents$"+Ro,eI="__reactListeners$"+Ro,tI="__reactHandles$"+Ro;function gs(r){var s=r[or];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Vr]||l[or]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Zm(r);r!==null;){if(l=r[or])return l;r=Zm(r)}return s}r=l,l=r.parentNode}return null}function Xa(r){return r=r[or]||r[Vr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ao(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Vu(r){return r[Qa]||null}var id=[],Co=-1;function Ei(r){return{current:r}}function tt(r){0>Co||(r.current=id[Co],id[Co]=null,Co--)}function Ye(r,s){Co++,id[Co]=r.current,r.current=s}var wi={},Bt=Ei(wi),Zt=Ei(!1),ys=wi;function Po(r,s){var l=r.type.contextTypes;if(!l)return wi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in l)f[m]=s[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function Mu(){tt(Zt),tt(Bt)}function eg(r,s,l){if(Bt.current!==wi)throw Error(t(168));Ye(Bt,s),Ye(Zt,l)}function tg(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,He(r)||"Unknown",f));return oe({},l,h)}function Uu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||wi,ys=Bt.current,Ye(Bt,r),Ye(Zt,Zt.current),!0}function ng(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=tg(r,s,ys),h.__reactInternalMemoizedMergedChildContext=r,tt(Zt),tt(Bt),Ye(Bt,r)):tt(Zt),Ye(Zt,l)}var Mr=null,Fu=!1,sd=!1;function rg(r){Mr===null?Mr=[r]:Mr.push(r)}function nI(r){Fu=!0,rg(r)}function Ti(){if(!sd&&Mr!==null){sd=!0;var r=0,s=Fe;try{var l=Mr;for(Fe=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Mr=null,Fu=!1}catch(f){throw Mr!==null&&(Mr=Mr.slice(r+1)),Aa(ao,Ti),f}finally{Fe=s,sd=!1}}return null}var ko=[],No=0,Bu=null,ju=0,In=[],Sn=0,_s=null,Ur=1,Fr="";function vs(r,s){ko[No++]=ju,ko[No++]=Bu,Bu=r,ju=s}function ig(r,s,l){In[Sn++]=Ur,In[Sn++]=Fr,In[Sn++]=_s,_s=r;var h=Ur;r=Fr;var f=32-hn(h)-1;h&=~(1<<f),l+=1;var m=32-hn(s)+f;if(30<m){var E=f-f%5;m=(h&(1<<E)-1).toString(32),h>>=E,f-=E,Ur=1<<32-hn(s)+f|l<<f|h,Fr=m+r}else Ur=1<<m|l<<f|h,Fr=r}function od(r){r.return!==null&&(vs(r,1),ig(r,1,0))}function ad(r){for(;r===Bu;)Bu=ko[--No],ko[No]=null,ju=ko[--No],ko[No]=null;for(;r===_s;)_s=In[--Sn],In[Sn]=null,Fr=In[--Sn],In[Sn]=null,Ur=In[--Sn],In[Sn]=null}var gn=null,yn=null,it=!1,Vn=null;function sg(r,s){var l=Pn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function og(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,gn=r,yn=vi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,gn=r,yn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=_s!==null?{id:Ur,overflow:Fr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Pn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,gn=r,yn=null,!0):!1;default:return!1}}function ld(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ud(r){if(it){var s=yn;if(s){var l=s;if(!og(r,s)){if(ld(r))throw Error(t(418));s=vi(l.nextSibling);var h=gn;s&&og(r,s)?sg(h,l):(r.flags=r.flags&-4097|2,it=!1,gn=r)}}else{if(ld(r))throw Error(t(418));r.flags=r.flags&-4097|2,it=!1,gn=r}}}function ag(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gn=r}function zu(r){if(r!==gn)return!1;if(!it)return ag(r),it=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!ed(r.type,r.memoizedProps)),s&&(s=yn)){if(ld(r))throw lg(),Error(t(418));for(;s;)sg(r,s),s=vi(s.nextSibling)}if(ag(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){yn=vi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}yn=null}}else yn=gn?vi(r.stateNode.nextSibling):null;return!0}function lg(){for(var r=yn;r;)r=vi(r.nextSibling)}function bo(){yn=gn=null,it=!1}function cd(r){Vn===null?Vn=[r]:Vn.push(r)}var rI=se.ReactCurrentBatchConfig;function Ya(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,m=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(E){var A=f.refs;E===null?delete A[m]:A[m]=E},s._stringRef=m,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function $u(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function ug(r){var s=r._init;return s(r._payload)}function cg(r){function s(B,L){if(r){var z=B.deletions;z===null?(B.deletions=[L],B.flags|=16):z.push(L)}}function l(B,L){if(!r)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function h(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function f(B,L){return B=Ni(B,L),B.index=0,B.sibling=null,B}function m(B,L,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<L?(B.flags|=2,L):z):(B.flags|=2,L)):(B.flags|=1048576,L)}function E(B){return r&&B.alternate===null&&(B.flags|=2),B}function A(B,L,z,re){return L===null||L.tag!==6?(L=tf(z,B.mode,re),L.return=B,L):(L=f(L,z),L.return=B,L)}function O(B,L,z,re){var me=z.type;return me===N?Y(B,L,z.props.children,re,z.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ie&&ug(me)===L.type)?(re=f(L,z.props),re.ref=Ya(B,L,z),re.return=B,re):(re=fc(z.type,z.key,z.props,null,B.mode,re),re.ref=Ya(B,L,z),re.return=B,re)}function $(B,L,z,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=nf(z,B.mode,re),L.return=B,L):(L=f(L,z.children||[]),L.return=B,L)}function Y(B,L,z,re,me){return L===null||L.tag!==7?(L=Cs(z,B.mode,re,me),L.return=B,L):(L=f(L,z),L.return=B,L)}function ee(B,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=tf(""+L,B.mode,z),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case de:return z=fc(L.type,L.key,L.props,null,B.mode,z),z.ref=Ya(B,null,L),z.return=B,z;case ge:return L=nf(L,B.mode,z),L.return=B,L;case Ie:var re=L._init;return ee(B,re(L._payload),z)}if(dt(L)||pe(L))return L=Cs(L,B.mode,z,null),L.return=B,L;$u(B,L)}return null}function Q(B,L,z,re){var me=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:A(B,L,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case de:return z.key===me?O(B,L,z,re):null;case ge:return z.key===me?$(B,L,z,re):null;case Ie:return me=z._init,Q(B,L,me(z._payload),re)}if(dt(z)||pe(z))return me!==null?null:Y(B,L,z,re,null);$u(B,z)}return null}function le(B,L,z,re,me){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get(z)||null,A(L,B,""+re,me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case de:return B=B.get(re.key===null?z:re.key)||null,O(L,B,re,me);case ge:return B=B.get(re.key===null?z:re.key)||null,$(L,B,re,me);case Ie:var ve=re._init;return le(B,L,z,ve(re._payload),me)}if(dt(re)||pe(re))return B=B.get(z)||null,Y(L,B,re,me,null);$u(L,re)}return null}function he(B,L,z,re){for(var me=null,ve=null,Ee=L,Re=L=0,Nt=null;Ee!==null&&Re<z.length;Re++){Ee.index>Re?(Nt=Ee,Ee=null):Nt=Ee.sibling;var $e=Q(B,Ee,z[Re],re);if($e===null){Ee===null&&(Ee=Nt);break}r&&Ee&&$e.alternate===null&&s(B,Ee),L=m($e,L,Re),ve===null?me=$e:ve.sibling=$e,ve=$e,Ee=Nt}if(Re===z.length)return l(B,Ee),it&&vs(B,Re),me;if(Ee===null){for(;Re<z.length;Re++)Ee=ee(B,z[Re],re),Ee!==null&&(L=m(Ee,L,Re),ve===null?me=Ee:ve.sibling=Ee,ve=Ee);return it&&vs(B,Re),me}for(Ee=h(B,Ee);Re<z.length;Re++)Nt=le(Ee,B,Re,z[Re],re),Nt!==null&&(r&&Nt.alternate!==null&&Ee.delete(Nt.key===null?Re:Nt.key),L=m(Nt,L,Re),ve===null?me=Nt:ve.sibling=Nt,ve=Nt);return r&&Ee.forEach(function(bi){return s(B,bi)}),it&&vs(B,Re),me}function fe(B,L,z,re){var me=pe(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var ve=me=null,Ee=L,Re=L=0,Nt=null,$e=z.next();Ee!==null&&!$e.done;Re++,$e=z.next()){Ee.index>Re?(Nt=Ee,Ee=null):Nt=Ee.sibling;var bi=Q(B,Ee,$e.value,re);if(bi===null){Ee===null&&(Ee=Nt);break}r&&Ee&&bi.alternate===null&&s(B,Ee),L=m(bi,L,Re),ve===null?me=bi:ve.sibling=bi,ve=bi,Ee=Nt}if($e.done)return l(B,Ee),it&&vs(B,Re),me;if(Ee===null){for(;!$e.done;Re++,$e=z.next())$e=ee(B,$e.value,re),$e!==null&&(L=m($e,L,Re),ve===null?me=$e:ve.sibling=$e,ve=$e);return it&&vs(B,Re),me}for(Ee=h(B,Ee);!$e.done;Re++,$e=z.next())$e=le(Ee,B,Re,$e.value,re),$e!==null&&(r&&$e.alternate!==null&&Ee.delete($e.key===null?Re:$e.key),L=m($e,L,Re),ve===null?me=$e:ve.sibling=$e,ve=$e);return r&&Ee.forEach(function(VI){return s(B,VI)}),it&&vs(B,Re),me}function pt(B,L,z,re){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case de:e:{for(var me=z.key,ve=L;ve!==null;){if(ve.key===me){if(me=z.type,me===N){if(ve.tag===7){l(B,ve.sibling),L=f(ve,z.props.children),L.return=B,B=L;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ie&&ug(me)===ve.type){l(B,ve.sibling),L=f(ve,z.props),L.ref=Ya(B,ve,z),L.return=B,B=L;break e}l(B,ve);break}else s(B,ve);ve=ve.sibling}z.type===N?(L=Cs(z.props.children,B.mode,re,z.key),L.return=B,B=L):(re=fc(z.type,z.key,z.props,null,B.mode,re),re.ref=Ya(B,L,z),re.return=B,B=re)}return E(B);case ge:e:{for(ve=z.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){l(B,L.sibling),L=f(L,z.children||[]),L.return=B,B=L;break e}else{l(B,L);break}else s(B,L);L=L.sibling}L=nf(z,B.mode,re),L.return=B,B=L}return E(B);case Ie:return ve=z._init,pt(B,L,ve(z._payload),re)}if(dt(z))return he(B,L,z,re);if(pe(z))return fe(B,L,z,re);$u(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(l(B,L.sibling),L=f(L,z),L.return=B,B=L):(l(B,L),L=tf(z,B.mode,re),L.return=B,B=L),E(B)):l(B,L)}return pt}var Oo=cg(!0),hg=cg(!1),qu=Ei(null),Hu=null,Do=null,hd=null;function dd(){hd=Do=Hu=null}function fd(r){var s=qu.current;tt(qu),r._currentValue=s}function pd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function xo(r,s){Hu=r,hd=Do=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function Rn(r){var s=r._currentValue;if(hd!==r)if(r={context:r,memoizedValue:s,next:null},Do===null){if(Hu===null)throw Error(t(308));Do=r,Hu.dependencies={lanes:0,firstContext:r}}else Do=Do.next=r;return s}var Es=null;function md(r){Es===null?Es=[r]:Es.push(r)}function dg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,md(s)):(l.next=f.next,f.next=l),s.interleaved=l,Br(r,h)}function Br(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Ii=!1;function gd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function jr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Si(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ze&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Br(r,l)}return f=h.interleaved,f===null?(s.next=s,md(h)):(s.next=f.next,f.next=s),h.interleaved=s,Br(r,l)}function Wu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Oa(r,l)}}function pg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?f=m=E:m=m.next=E,l=l.next}while(l!==null);m===null?f=m=s:m=m.next=s}else f=m=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Gu(r,s,l,h){var f=r.updateQueue;Ii=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var O=A,$=O.next;O.next=null,E===null?m=$:E.next=$,E=O;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==E&&(A===null?Y.firstBaseUpdate=$:A.next=$,Y.lastBaseUpdate=O))}if(m!==null){var ee=f.baseState;E=0,Y=$=O=null,A=m;do{var Q=A.lane,le=A.eventTime;if((h&Q)===Q){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var he=r,fe=A;switch(Q=s,le=l,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){ee=he.call(le,ee,Q);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,Q=typeof he=="function"?he.call(le,ee,Q):he,Q==null)break e;ee=oe({},ee,Q);break e;case 2:Ii=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,Q=f.effects,Q===null?f.effects=[A]:Q.push(A))}else le={eventTime:le,lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?($=Y=le,O=ee):Y=Y.next=le,E|=Q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);if(Y===null&&(O=ee),f.baseState=O,f.firstBaseUpdate=$,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);Is|=E,r.lanes=E,r.memoizedState=ee}}function mg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Ja={},ar=Ei(Ja),Za=Ei(Ja),el=Ei(Ja);function ws(r){if(r===Ja)throw Error(t(174));return r}function yd(r,s){switch(Ye(el,s),Ye(Za,r),Ye(ar,Ja),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:to(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=to(s,r)}tt(ar),Ye(ar,s)}function Lo(){tt(ar),tt(Za),tt(el)}function gg(r){ws(el.current);var s=ws(ar.current),l=to(s,r.type);s!==l&&(Ye(Za,r),Ye(ar,l))}function _d(r){Za.current===r&&(tt(ar),tt(Za))}var st=Ei(0);function Ku(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vd=[];function Ed(){for(var r=0;r<vd.length;r++)vd[r]._workInProgressVersionPrimary=null;vd.length=0}var Qu=se.ReactCurrentDispatcher,wd=se.ReactCurrentBatchConfig,Ts=0,ot=null,Rt=null,Pt=null,Xu=!1,tl=!1,nl=0,iI=0;function jt(){throw Error(t(321))}function Td(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Ln(r[l],s[l]))return!1;return!0}function Id(r,s,l,h,f,m){if(Ts=m,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Qu.current=r===null||r.memoizedState===null?lI:uI,r=l(h,f),tl){m=0;do{if(tl=!1,nl=0,25<=m)throw Error(t(301));m+=1,Pt=Rt=null,s.updateQueue=null,Qu.current=cI,r=l(h,f)}while(tl)}if(Qu.current=Zu,s=Rt!==null&&Rt.next!==null,Ts=0,Pt=Rt=ot=null,Xu=!1,s)throw Error(t(300));return r}function Sd(){var r=nl!==0;return nl=0,r}function lr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ot.memoizedState=Pt=r:Pt=Pt.next=r,Pt}function An(){if(Rt===null){var r=ot.alternate;r=r!==null?r.memoizedState:null}else r=Rt.next;var s=Pt===null?ot.memoizedState:Pt.next;if(s!==null)Pt=s,Rt=r;else{if(r===null)throw Error(t(310));Rt=r,r={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Pt===null?ot.memoizedState=Pt=r:Pt=Pt.next=r}return Pt}function rl(r,s){return typeof s=="function"?s(r):s}function Rd(r){var s=An(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Rt,f=h.baseQueue,m=l.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}h.baseQueue=f=m,l.pending=null}if(f!==null){m=f.next,h=h.baseState;var A=E=null,O=null,$=m;do{var Y=$.lane;if((Ts&Y)===Y)O!==null&&(O=O.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var ee={lane:Y,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};O===null?(A=O=ee,E=h):O=O.next=ee,ot.lanes|=Y,Is|=Y}$=$.next}while($!==null&&$!==m);O===null?E=h:O.next=A,Ln(h,s.memoizedState)||(tn=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=O,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do m=f.lane,ot.lanes|=m,Is|=m,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Ad(r){var s=An(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,m=s.memoizedState;if(f!==null){l.pending=null;var E=f=f.next;do m=r(m,E.action),E=E.next;while(E!==f);Ln(m,s.memoizedState)||(tn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,h]}function yg(){}function _g(r,s){var l=ot,h=An(),f=s(),m=!Ln(h.memoizedState,f);if(m&&(h.memoizedState=f,tn=!0),h=h.queue,Cd(wg.bind(null,l,h,r),[r]),h.getSnapshot!==s||m||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,il(9,Eg.bind(null,l,h,f,s),void 0,null),kt===null)throw Error(t(349));(Ts&30)!==0||vg(l,s,f)}return f}function vg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Eg(r,s,l,h){s.value=l,s.getSnapshot=h,Tg(s)&&Ig(r)}function wg(r,s,l){return l(function(){Tg(s)&&Ig(r)})}function Tg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Ln(r,l)}catch{return!0}}function Ig(r){var s=Br(r,1);s!==null&&Bn(s,r,1,-1)}function Sg(r){var s=lr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:r},s.queue=r,r=r.dispatch=aI.bind(null,ot,r),[s.memoizedState,r]}function il(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Rg(){return An().memoizedState}function Yu(r,s,l,h){var f=lr();ot.flags|=r,f.memoizedState=il(1|s,l,void 0,h===void 0?null:h)}function Ju(r,s,l,h){var f=An();h=h===void 0?null:h;var m=void 0;if(Rt!==null){var E=Rt.memoizedState;if(m=E.destroy,h!==null&&Td(h,E.deps)){f.memoizedState=il(s,l,m,h);return}}ot.flags|=r,f.memoizedState=il(1|s,l,m,h)}function Ag(r,s){return Yu(8390656,8,r,s)}function Cd(r,s){return Ju(2048,8,r,s)}function Cg(r,s){return Ju(4,2,r,s)}function Pg(r,s){return Ju(4,4,r,s)}function kg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Ng(r,s,l){return l=l!=null?l.concat([r]):null,Ju(4,4,kg.bind(null,s,r),l)}function Pd(){}function bg(r,s){var l=An();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Td(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Og(r,s){var l=An();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Td(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function Dg(r,s,l){return(Ts&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=l):(Ln(l,s)||(l=Na(),ot.lanes|=l,Is|=l,r.baseState=!0),s)}function sI(r,s){var l=Fe;Fe=l!==0&&4>l?l:4,r(!0);var h=wd.transition;wd.transition={};try{r(!1),s()}finally{Fe=l,wd.transition=h}}function xg(){return An().memoizedState}function oI(r,s,l){var h=Pi(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Lg(r))Vg(s,l);else if(l=dg(r,s,l,h),l!==null){var f=Yt();Bn(l,r,h,f),Mg(l,s,h)}}function aI(r,s,l){var h=Pi(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lg(r))Vg(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var E=s.lastRenderedState,A=m(E,l);if(f.hasEagerState=!0,f.eagerState=A,Ln(A,E)){var O=s.interleaved;O===null?(f.next=f,md(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}l=dg(r,s,f,h),l!==null&&(f=Yt(),Bn(l,r,h,f),Mg(l,s,h))}}function Lg(r){var s=r.alternate;return r===ot||s!==null&&s===ot}function Vg(r,s){tl=Xu=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Mg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Oa(r,l)}}var Zu={readContext:Rn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},lI={readContext:Rn,useCallback:function(r,s){return lr().memoizedState=[r,s===void 0?null:s],r},useContext:Rn,useEffect:Ag,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Yu(4194308,4,kg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Yu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Yu(4,2,r,s)},useMemo:function(r,s){var l=lr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=lr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=oI.bind(null,ot,r),[h.memoizedState,r]},useRef:function(r){var s=lr();return r={current:r},s.memoizedState=r},useState:Sg,useDebugValue:Pd,useDeferredValue:function(r){return lr().memoizedState=r},useTransition:function(){var r=Sg(!1),s=r[0];return r=sI.bind(null,r[1]),lr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=ot,f=lr();if(it){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),kt===null)throw Error(t(349));(Ts&30)!==0||vg(h,s,l)}f.memoizedState=l;var m={value:l,getSnapshot:s};return f.queue=m,Ag(wg.bind(null,h,m,r),[r]),h.flags|=2048,il(9,Eg.bind(null,h,m,l,s),void 0,null),l},useId:function(){var r=lr(),s=kt.identifierPrefix;if(it){var l=Fr,h=Ur;l=(h&~(1<<32-hn(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=nl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=iI++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},uI={readContext:Rn,useCallback:bg,useContext:Rn,useEffect:Cd,useImperativeHandle:Ng,useInsertionEffect:Cg,useLayoutEffect:Pg,useMemo:Og,useReducer:Rd,useRef:Rg,useState:function(){return Rd(rl)},useDebugValue:Pd,useDeferredValue:function(r){var s=An();return Dg(s,Rt.memoizedState,r)},useTransition:function(){var r=Rd(rl)[0],s=An().memoizedState;return[r,s]},useMutableSource:yg,useSyncExternalStore:_g,useId:xg,unstable_isNewReconciler:!1},cI={readContext:Rn,useCallback:bg,useContext:Rn,useEffect:Cd,useImperativeHandle:Ng,useInsertionEffect:Cg,useLayoutEffect:Pg,useMemo:Og,useReducer:Ad,useRef:Rg,useState:function(){return Ad(rl)},useDebugValue:Pd,useDeferredValue:function(r){var s=An();return Rt===null?s.memoizedState=r:Dg(s,Rt.memoizedState,r)},useTransition:function(){var r=Ad(rl)[0],s=An().memoizedState;return[r,s]},useMutableSource:yg,useSyncExternalStore:_g,useId:xg,unstable_isNewReconciler:!1};function Mn(r,s){if(r&&r.defaultProps){s=oe({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function kd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:oe({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var ec={isMounted:function(r){return(r=r._reactInternals)?Dn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=Pi(r),m=jr(h,f);m.payload=s,l!=null&&(m.callback=l),s=Si(r,m,f),s!==null&&(Bn(s,r,f,h),Wu(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=Pi(r),m=jr(h,f);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=Si(r,m,f),s!==null&&(Bn(s,r,f,h),Wu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Yt(),h=Pi(r),f=jr(l,h);f.tag=2,s!=null&&(f.callback=s),s=Si(r,f,h),s!==null&&(Bn(s,r,h,l),Wu(s,r,h))}};function Ug(r,s,l,h,f,m,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,E):s.prototype&&s.prototype.isPureReactComponent?!qa(l,h)||!qa(f,m):!0}function Fg(r,s,l){var h=!1,f=wi,m=s.contextType;return typeof m=="object"&&m!==null?m=Rn(m):(f=en(s)?ys:Bt.current,h=s.contextTypes,m=(h=h!=null)?Po(r,f):wi),s=new s(l,m),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ec,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=m),s}function Bg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&ec.enqueueReplaceState(s,s.state,null)}function Nd(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},gd(r);var m=s.contextType;typeof m=="object"&&m!==null?f.context=Rn(m):(m=en(s)?ys:Bt.current,f.context=Po(r,m)),f.state=r.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(kd(r,s,m,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&ec.enqueueReplaceState(f,f.state,null),Gu(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Vo(r,s){try{var l="",h=s;do l+=Oe(h),h=h.return;while(h);var f=l}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:s,stack:f,digest:null}}function bd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Od(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var hI=typeof WeakMap=="function"?WeakMap:Map;function jg(r,s,l){l=jr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){ac||(ac=!0,Gd=h),Od(r,s)},l}function zg(r,s,l){l=jr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Od(r,s)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){Od(r,s),typeof h!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),l}function $g(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new hI;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=RI.bind(null,r,s,l),s.then(r,r))}function qg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Hg(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=jr(-1,1),s.tag=2,Si(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var dI=se.ReactCurrentOwner,tn=!1;function Xt(r,s,l,h){s.child=r===null?hg(s,null,l,h):Oo(s,r.child,l,h)}function Wg(r,s,l,h,f){l=l.render;var m=s.ref;return xo(s,f),h=Id(r,s,l,h,m,f),l=Sd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,zr(r,s,f)):(it&&l&&od(s),s.flags|=1,Xt(r,s,h,f),s.child)}function Gg(r,s,l,h,f){if(r===null){var m=l.type;return typeof m=="function"&&!ef(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=m,Kg(r,s,m,h,f)):(r=fc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,(r.lanes&f)===0){var E=m.memoizedProps;if(l=l.compare,l=l!==null?l:qa,l(E,h)&&r.ref===s.ref)return zr(r,s,f)}return s.flags|=1,r=Ni(m,h),r.ref=s.ref,r.return=s,s.child=r}function Kg(r,s,l,h,f){if(r!==null){var m=r.memoizedProps;if(qa(m,h)&&r.ref===s.ref)if(tn=!1,s.pendingProps=h=m,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,zr(r,s,f)}return Dd(r,s,l,h,f)}function Qg(r,s,l){var h=s.pendingProps,f=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Uo,_n),_n|=l;else{if((l&1073741824)===0)return r=m!==null?m.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ye(Uo,_n),_n|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:l,Ye(Uo,_n),_n|=h}else m!==null?(h=m.baseLanes|l,s.memoizedState=null):h=l,Ye(Uo,_n),_n|=h;return Xt(r,s,f,l),s.child}function Xg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Dd(r,s,l,h,f){var m=en(l)?ys:Bt.current;return m=Po(s,m),xo(s,f),l=Id(r,s,l,h,m,f),h=Sd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,zr(r,s,f)):(it&&h&&od(s),s.flags|=1,Xt(r,s,l,f),s.child)}function Yg(r,s,l,h,f){if(en(l)){var m=!0;Uu(s)}else m=!1;if(xo(s,f),s.stateNode===null)nc(r,s),Fg(s,l,h),Nd(s,l,h,f),h=!0;else if(r===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var O=E.context,$=l.contextType;typeof $=="object"&&$!==null?$=Rn($):($=en(l)?ys:Bt.current,$=Po(s,$));var Y=l.getDerivedStateFromProps,ee=typeof Y=="function"||typeof E.getSnapshotBeforeUpdate=="function";ee||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==h||O!==$)&&Bg(s,E,h,$),Ii=!1;var Q=s.memoizedState;E.state=Q,Gu(s,h,E,f),O=s.memoizedState,A!==h||Q!==O||Zt.current||Ii?(typeof Y=="function"&&(kd(s,l,Y,h),O=s.memoizedState),(A=Ii||Ug(s,l,A,h,Q,O,$))?(ee||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=O),E.props=h,E.state=O,E.context=$,h=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,fg(r,s),A=s.memoizedProps,$=s.type===s.elementType?A:Mn(s.type,A),E.props=$,ee=s.pendingProps,Q=E.context,O=l.contextType,typeof O=="object"&&O!==null?O=Rn(O):(O=en(l)?ys:Bt.current,O=Po(s,O));var le=l.getDerivedStateFromProps;(Y=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==ee||Q!==O)&&Bg(s,E,h,O),Ii=!1,Q=s.memoizedState,E.state=Q,Gu(s,h,E,f);var he=s.memoizedState;A!==ee||Q!==he||Zt.current||Ii?(typeof le=="function"&&(kd(s,l,le,h),he=s.memoizedState),($=Ii||Ug(s,l,$,h,Q,he,O)||!1)?(Y||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,he,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,he,O)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=he),E.props=h,E.state=he,E.context=O,h=$):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),h=!1)}return xd(r,s,l,h,m,f)}function xd(r,s,l,h,f,m){Xg(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return f&&ng(s,l,!1),zr(r,s,m);h=s.stateNode,dI.current=s;var A=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=Oo(s,r.child,null,m),s.child=Oo(s,null,A,m)):Xt(r,s,A,m),s.memoizedState=h.state,f&&ng(s,l,!0),s.child}function Jg(r){var s=r.stateNode;s.pendingContext?eg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&eg(r,s.context,!1),yd(r,s.containerInfo)}function Zg(r,s,l,h,f){return bo(),cd(f),s.flags|=256,Xt(r,s,l,h),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Vd(r){return{baseLanes:r,cachePool:null,transitions:null}}function ey(r,s,l){var h=s.pendingProps,f=st.current,m=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=r!==null&&r.memoizedState===null?!1:(f&2)!==0),A?(m=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(st,f&1),r===null)return ud(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=h.children,r=h.fallback,m?(h=s.mode,m=s.child,E={mode:"hidden",children:E},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=E):m=pc(E,h,0,null),r=Cs(r,h,l,null),m.return=s,r.return=s,m.sibling=r,s.child=m,s.child.memoizedState=Vd(l),s.memoizedState=Ld,r):Md(s,E));if(f=r.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return fI(r,s,E,h,A,f,l);if(m){m=h.fallback,E=s.mode,f=r.child,A=f.sibling;var O={mode:"hidden",children:h.children};return(E&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=O,s.deletions=null):(h=Ni(f,O),h.subtreeFlags=f.subtreeFlags&14680064),A!==null?m=Ni(A,m):(m=Cs(m,E,l,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,E=r.child.memoizedState,E=E===null?Vd(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},m.memoizedState=E,m.childLanes=r.childLanes&~l,s.memoizedState=Ld,h}return m=r.child,r=m.sibling,h=Ni(m,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Md(r,s){return s=pc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function tc(r,s,l,h){return h!==null&&cd(h),Oo(s,r.child,null,l),r=Md(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fI(r,s,l,h,f,m,E){if(l)return s.flags&256?(s.flags&=-257,h=bd(Error(t(422))),tc(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(m=h.fallback,f=s.mode,h=pc({mode:"visible",children:h.children},f,0,null),m=Cs(m,f,E,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,(s.mode&1)!==0&&Oo(s,r.child,null,E),s.child.memoizedState=Vd(E),s.memoizedState=Ld,m);if((s.mode&1)===0)return tc(r,s,E,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var A=h.dgst;return h=A,m=Error(t(419)),h=bd(m,h,void 0),tc(r,s,E,h)}if(A=(E&r.childLanes)!==0,tn||A){if(h=kt,h!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|E))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Br(r,f),Bn(h,r,f,-1))}return Zd(),h=bd(Error(t(421))),tc(r,s,E,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=AI.bind(null,r),f._reactRetry=s,null):(r=m.treeContext,yn=vi(f.nextSibling),gn=s,it=!0,Vn=null,r!==null&&(In[Sn++]=Ur,In[Sn++]=Fr,In[Sn++]=_s,Ur=r.id,Fr=r.overflow,_s=s),s=Md(s,h.children),s.flags|=4096,s)}function ty(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),pd(r.return,s,l)}function Ud(r,s,l,h,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=l,m.tailMode=f)}function ny(r,s,l){var h=s.pendingProps,f=h.revealOrder,m=h.tail;if(Xt(r,s,h.children,l),h=st.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ty(r,l,s);else if(r.tag===19)ty(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(st,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Ku(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Ud(s,!1,f,l,m);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Ku(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Ud(s,!0,l,null,m);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function nc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function zr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Is|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Ni(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ni(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function pI(r,s,l){switch(s.tag){case 3:Jg(s),bo();break;case 5:gg(s);break;case 1:en(s.type)&&Uu(s);break;case 4:yd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ye(qu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ye(st,st.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?ey(r,s,l):(Ye(st,st.current&1),r=zr(r,s,l),r!==null?r.sibling:null);Ye(st,st.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return ny(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(st,st.current),h)break;return null;case 22:case 23:return s.lanes=0,Qg(r,s,l)}return zr(r,s,l)}var ry,Fd,iy,sy;ry=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Fd=function(){},iy=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,ws(ar.current);var m=null;switch(l){case"input":f=Zs(r,f),h=Zs(r,h),m=[];break;case"select":f=oe({},f,{value:void 0}),h=oe({},h,{value:void 0}),m=[];break;case"textarea":f=va(r,f),h=va(r,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Lu)}On(l,h);var E;l=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var A=f[$];for(E in A)A.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in h){var O=h[$];if(A=f?.[$],h.hasOwnProperty($)&&O!==A&&(O!=null||A!=null))if($==="style")if(A){for(E in A)!A.hasOwnProperty(E)||O&&O.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in O)O.hasOwnProperty(E)&&A[E]!==O[E]&&(l||(l={}),l[E]=O[E])}else l||(m||(m=[]),m.push($,l)),l=O;else $==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,A=A?A.__html:void 0,O!=null&&A!==O&&(m=m||[]).push($,O)):$==="children"?typeof O!="string"&&typeof O!="number"||(m=m||[]).push($,""+O):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(O!=null&&$==="onScroll"&&et("scroll",r),m||A===O||(m=[])):(m=m||[]).push($,O))}l&&(m=m||[]).push("style",l);var $=m;(s.updateQueue=$)&&(s.flags|=4)}},sy=function(r,s,l,h){l!==h&&(s.flags|=4)};function sl(r,s){if(!it)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function zt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function mI(r,s,l){var h=s.pendingProps;switch(ad(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return en(s.type)&&Mu(),zt(s),null;case 3:return h=s.stateNode,Lo(),tt(Zt),tt(Bt),Ed(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(zu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Vn!==null&&(Xd(Vn),Vn=null))),Fd(r,s),zt(s),null;case 5:_d(s);var f=ws(el.current);if(l=s.type,r!==null&&s.stateNode!=null)iy(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return zt(s),null}if(r=ws(ar.current),zu(s)){h=s.stateNode,l=s.type;var m=s.memoizedProps;switch(h[or]=s,h[Qa]=m,r=(s.mode&1)!==0,l){case"dialog":et("cancel",h),et("close",h);break;case"iframe":case"object":case"embed":et("load",h);break;case"video":case"audio":for(f=0;f<Wa.length;f++)et(Wa[f],h);break;case"source":et("error",h);break;case"img":case"image":case"link":et("error",h),et("load",h);break;case"details":et("toggle",h);break;case"input":ou(h,m),et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},et("invalid",h);break;case"textarea":Ea(h,m),et("invalid",h)}On(l,m),f=null;for(var E in m)if(m.hasOwnProperty(E)){var A=m[E];E==="children"?typeof A=="string"?h.textContent!==A&&(m.suppressHydrationWarning!==!0&&xu(h.textContent,A,r),f=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&xu(h.textContent,A,r),f=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&et("scroll",h)}switch(l){case"input":Js(h),_a(h,m,!0);break;case"textarea":Js(h),ri(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=Lu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=wa(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(l,{is:h.is}):(r=E.createElement(l),l==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,l),r[or]=s,r[Qa]=h,ry(r,s,!1,!1),s.stateNode=r;e:{switch(E=ro(l,h),l){case"dialog":et("cancel",r),et("close",r),f=h;break;case"iframe":case"object":case"embed":et("load",r),f=h;break;case"video":case"audio":for(f=0;f<Wa.length;f++)et(Wa[f],r);f=h;break;case"source":et("error",r),f=h;break;case"img":case"image":case"link":et("error",r),et("load",r),f=h;break;case"details":et("toggle",r),f=h;break;case"input":ou(r,h),f=Zs(r,h),et("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=oe({},h,{value:void 0}),et("invalid",r);break;case"textarea":Ea(r,h),f=va(r,h),et("invalid",r);break;default:f=h}On(l,f),A=f;for(m in A)if(A.hasOwnProperty(m)){var O=A[m];m==="style"?no(r,O):m==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&lu(r,O)):m==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&ns(r,O):typeof O=="number"&&ns(r,""+O):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?O!=null&&m==="onScroll"&&et("scroll",r):O!=null&&X(r,m,O,E))}switch(l){case"input":Js(r),_a(r,h,!1);break;case"textarea":Js(r),ri(r);break;case"option":h.value!=null&&r.setAttribute("value",""+je(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?bn(r,!!h.multiple,m,!1):h.defaultValue!=null&&bn(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Lu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zt(s),null;case 6:if(r&&s.stateNode!=null)sy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=ws(el.current),ws(ar.current),zu(s)){if(h=s.stateNode,l=s.memoizedProps,h[or]=s,(m=h.nodeValue!==l)&&(r=gn,r!==null))switch(r.tag){case 3:xu(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&xu(h.nodeValue,l,(r.mode&1)!==0)}m&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[or]=s,s.stateNode=h}return zt(s),null;case 13:if(tt(st),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(it&&yn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)lg(),bo(),s.flags|=98560,m=!1;else if(m=zu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[or]=s}else bo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zt(s),m=!1}else Vn!==null&&(Xd(Vn),Vn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(st.current&1)!==0?At===0&&(At=3):Zd())),s.updateQueue!==null&&(s.flags|=4),zt(s),null);case 4:return Lo(),Fd(r,s),r===null&&Ga(s.stateNode.containerInfo),zt(s),null;case 10:return fd(s.type._context),zt(s),null;case 17:return en(s.type)&&Mu(),zt(s),null;case 19:if(tt(st),m=s.memoizedState,m===null)return zt(s),null;if(h=(s.flags&128)!==0,E=m.rendering,E===null)if(h)sl(m,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=Ku(r),E!==null){for(s.flags|=128,sl(m,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)m=l,r=h,m.flags&=14680066,E=m.alternate,E===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=E.childLanes,m.lanes=E.lanes,m.child=E.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=E.memoizedProps,m.memoizedState=E.memoizedState,m.updateQueue=E.updateQueue,m.type=E.type,r=E.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ye(st,st.current&1|2),s.child}r=r.sibling}m.tail!==null&&Ze()>Fo&&(s.flags|=128,h=!0,sl(m,!1),s.lanes=4194304)}else{if(!h)if(r=Ku(E),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),sl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!it)return zt(s),null}else 2*Ze()-m.renderingStartTime>Fo&&l!==1073741824&&(s.flags|=128,h=!0,sl(m,!1),s.lanes=4194304);m.isBackwards?(E.sibling=s.child,s.child=E):(l=m.last,l!==null?l.sibling=E:s.child=E,m.last=E)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ze(),s.sibling=null,l=st.current,Ye(st,h?l&1|2:l&1),s):(zt(s),null);case 22:case 23:return Jd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(_n&1073741824)!==0&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function gI(r,s){switch(ad(s),s.tag){case 1:return en(s.type)&&Mu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Lo(),tt(Zt),tt(Bt),Ed(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return _d(s),null;case 13:if(tt(st),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));bo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return tt(st),null;case 4:return Lo(),null;case 10:return fd(s.type._context),null;case 22:case 23:return Jd(),null;case 24:return null;default:return null}}var rc=!1,$t=!1,yI=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Mo(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ct(r,s,h)}else l.current=null}function Bd(r,s,l){try{l()}catch(h){ct(r,s,h)}}var oy=!1;function _I(r,s){if(Jh=Dr,r=Um(),qh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var E=0,A=-1,O=-1,$=0,Y=0,ee=r,Q=null;t:for(;;){for(var le;ee!==l||f!==0&&ee.nodeType!==3||(A=E+f),ee!==m||h!==0&&ee.nodeType!==3||(O=E+h),ee.nodeType===3&&(E+=ee.nodeValue.length),(le=ee.firstChild)!==null;)Q=ee,ee=le;for(;;){if(ee===r)break t;if(Q===l&&++$===f&&(A=E),Q===m&&++Y===h&&(O=E),(le=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=le}l=A===-1||O===-1?null:{start:A,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zh={focusedElem:r,selectionRange:l},Dr=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,pt=he.memoizedState,B=s.stateNode,L=B.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Mn(s.type,fe),pt);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ct(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return he=oy,oy=!1,he}function ol(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var m=f.destroy;f.destroy=void 0,m!==void 0&&Bd(s,l,m)}f=f.next}while(f!==h)}}function ic(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function jd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function ay(r){var s=r.alternate;s!==null&&(r.alternate=null,ay(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[or],delete s[Qa],delete s[rd],delete s[eI],delete s[tI])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ly(r){return r.tag===5||r.tag===3||r.tag===4}function uy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ly(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function zd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Lu));else if(h!==4&&(r=r.child,r!==null))for(zd(r,s,l),r=r.sibling;r!==null;)zd(r,s,l),r=r.sibling}function $d(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for($d(r,s,l),r=r.sibling;r!==null;)$d(r,s,l),r=r.sibling}var xt=null,Un=!1;function Ri(r,s,l){for(l=l.child;l!==null;)cy(r,s,l),l=l.sibling}function cy(r,s,l){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(as,l)}catch{}switch(l.tag){case 5:$t||Mo(l,s);case 6:var h=xt,f=Un;xt=null,Ri(r,s,l),xt=h,Un=f,xt!==null&&(Un?(r=xt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):xt.removeChild(l.stateNode));break;case 18:xt!==null&&(Un?(r=xt,l=l.stateNode,r.nodeType===8?nd(r.parentNode,l):r.nodeType===1&&nd(r,l),mi(r)):nd(xt,l.stateNode));break;case 4:h=xt,f=Un,xt=l.stateNode.containerInfo,Un=!0,Ri(r,s,l),xt=h,Un=f;break;case 0:case 11:case 14:case 15:if(!$t&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,E=m.destroy;m=m.tag,E!==void 0&&((m&2)!==0||(m&4)!==0)&&Bd(l,s,E),f=f.next}while(f!==h)}Ri(r,s,l);break;case 1:if(!$t&&(Mo(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(A){ct(l,s,A)}Ri(r,s,l);break;case 21:Ri(r,s,l);break;case 22:l.mode&1?($t=(h=$t)||l.memoizedState!==null,Ri(r,s,l),$t=h):Ri(r,s,l);break;default:Ri(r,s,l)}}function hy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new yI),s.forEach(function(h){var f=CI.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Fn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var m=r,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:xt=A.stateNode,Un=!1;break e;case 3:xt=A.stateNode.containerInfo,Un=!0;break e;case 4:xt=A.stateNode.containerInfo,Un=!0;break e}A=A.return}if(xt===null)throw Error(t(160));cy(m,E,f),xt=null,Un=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch($){ct(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dy(s,r),s=s.sibling}function dy(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Fn(s,r),ur(r),h&4){try{ol(3,r,r.return),ic(3,r)}catch(fe){ct(r,r.return,fe)}try{ol(5,r,r.return)}catch(fe){ct(r,r.return,fe)}}break;case 1:Fn(s,r),ur(r),h&512&&l!==null&&Mo(l,l.return);break;case 5:if(Fn(s,r),ur(r),h&512&&l!==null&&Mo(l,l.return),r.flags&32){var f=r.stateNode;try{ns(f,"")}catch(fe){ct(r,r.return,fe)}}if(h&4&&(f=r.stateNode,f!=null)){var m=r.memoizedProps,E=l!==null?l.memoizedProps:m,A=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&eo(f,m),ro(A,E);var $=ro(A,m);for(E=0;E<O.length;E+=2){var Y=O[E],ee=O[E+1];Y==="style"?no(f,ee):Y==="dangerouslySetInnerHTML"?lu(f,ee):Y==="children"?ns(f,ee):X(f,Y,ee,$)}switch(A){case"input":ts(f,m);break;case"textarea":au(f,m);break;case"select":var Q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var le=m.value;le!=null?bn(f,!!m.multiple,le,!1):Q!==!!m.multiple&&(m.defaultValue!=null?bn(f,!!m.multiple,m.defaultValue,!0):bn(f,!!m.multiple,m.multiple?[]:"",!1))}f[Qa]=m}catch(fe){ct(r,r.return,fe)}}break;case 6:if(Fn(s,r),ur(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,m=r.memoizedProps;try{f.nodeValue=m}catch(fe){ct(r,r.return,fe)}}break;case 3:if(Fn(s,r),ur(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{mi(s.containerInfo)}catch(fe){ct(r,r.return,fe)}break;case 4:Fn(s,r),ur(r);break;case 13:Fn(s,r),ur(r),f=r.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Wd=Ze())),h&4&&hy(r);break;case 22:if(Y=l!==null&&l.memoizedState!==null,r.mode&1?($t=($=$t)||Y,Fn(s,r),$t=$):Fn(s,r),ur(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(ee=ce=Y;ce!==null;){switch(Q=ce,le=Q.child,Q.tag){case 0:case 11:case 14:case 15:ol(4,Q,Q.return);break;case 1:Mo(Q,Q.return);var he=Q.stateNode;if(typeof he.componentWillUnmount=="function"){h=Q,l=Q.return;try{s=h,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(fe){ct(h,l,fe)}}break;case 5:Mo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){my(ee);continue}}le!==null?(le.return=Q,ce=le):my(ee)}Y=Y.sibling}e:for(Y=null,ee=r;;){if(ee.tag===5){if(Y===null){Y=ee;try{f=ee.stateNode,$?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=ee.stateNode,O=ee.memoizedProps.style,E=O!=null&&O.hasOwnProperty("display")?O.display:null,A.style.display=oi("display",E))}catch(fe){ct(r,r.return,fe)}}}else if(ee.tag===6){if(Y===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(fe){ct(r,r.return,fe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;Y===ee&&(Y=null),ee=ee.return}Y===ee&&(Y=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Fn(s,r),ur(r),h&4&&hy(r);break;case 21:break;default:Fn(s,r),ur(r)}}function ur(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(ly(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(ns(f,""),h.flags&=-33);var m=uy(r);$d(r,m,f);break;case 3:case 4:var E=h.stateNode.containerInfo,A=uy(r);zd(r,A,E);break;default:throw Error(t(161))}}catch(O){ct(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function vI(r,s,l){ce=r,fy(r)}function fy(r,s,l){for(var h=(r.mode&1)!==0;ce!==null;){var f=ce,m=f.child;if(f.tag===22&&h){var E=f.memoizedState!==null||rc;if(!E){var A=f.alternate,O=A!==null&&A.memoizedState!==null||$t;A=rc;var $=$t;if(rc=E,($t=O)&&!$)for(ce=f;ce!==null;)E=ce,O=E.child,E.tag===22&&E.memoizedState!==null?gy(f):O!==null?(O.return=E,ce=O):gy(f);for(;m!==null;)ce=m,fy(m),m=m.sibling;ce=f,rc=A,$t=$}py(r)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,ce=m):py(r)}}function py(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:$t||ic(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!$t)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Mn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&mg(s,m,h);break;case 3:var E=s.updateQueue;if(E!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}mg(s,E,l)}break;case 5:var A=s.stateNode;if(l===null&&s.flags&4){l=A;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Y=$.memoizedState;if(Y!==null){var ee=Y.dehydrated;ee!==null&&mi(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||s.flags&512&&jd(s)}catch(Q){ct(s,s.return,Q)}}if(s===r){ce=null;break}if(l=s.sibling,l!==null){l.return=s.return,ce=l;break}ce=s.return}}function my(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ce=l;break}ce=s.return}}function gy(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{ic(4,s)}catch(O){ct(s,l,O)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(O){ct(s,f,O)}}var m=s.return;try{jd(s)}catch(O){ct(s,m,O)}break;case 5:var E=s.return;try{jd(s)}catch(O){ct(s,E,O)}}}catch(O){ct(s,s.return,O)}if(s===r){ce=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ce=A;break}ce=s.return}}var EI=Math.ceil,sc=se.ReactCurrentDispatcher,qd=se.ReactCurrentOwner,Cn=se.ReactCurrentBatchConfig,ze=0,kt=null,_t=null,Lt=0,_n=0,Uo=Ei(0),At=0,al=null,Is=0,oc=0,Hd=0,ll=null,nn=null,Wd=0,Fo=1/0,$r=null,ac=!1,Gd=null,Ai=null,lc=!1,Ci=null,uc=0,ul=0,Kd=null,cc=-1,hc=0;function Yt(){return(ze&6)!==0?Ze():cc!==-1?cc:cc=Ze()}function Pi(r){return(r.mode&1)===0?1:(ze&2)!==0&&Lt!==0?Lt&-Lt:rI.transition!==null?(hc===0&&(hc=Na()),hc):(r=Fe,r!==0||(r=window.event,r=r===void 0?16:po(r.type)),r)}function Bn(r,s,l,h){if(50<ul)throw ul=0,Kd=null,Error(t(185));hs(r,l,h),((ze&2)===0||r!==kt)&&(r===kt&&((ze&2)===0&&(oc|=l),At===4&&ki(r,Lt)),rn(r,h),l===1&&ze===0&&(s.mode&1)===0&&(Fo=Ze()+500,Fu&&Ti()))}function rn(r,s){var l=r.callbackNode;cs(r,s);var h=Nr(r,r===kt?Lt:0);if(h===0)l!==null&&oo(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&oo(l),s===1)r.tag===0?nI(_y.bind(null,r)):rg(_y.bind(null,r)),J0(function(){(ze&6)===0&&Ti()}),l=null;else{switch(Xn(h)){case 1:l=ao;break;case 4:l=Ca;break;case 16:l=os;break;case 536870912:l=lo;break;default:l=os}l=Ay(l,yy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function yy(r,s){if(cc=-1,hc=0,(ze&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Bo()&&r.callbackNode!==l)return null;var h=Nr(r,r===kt?Lt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=dc(r,h);else{s=h;var f=ze;ze|=2;var m=Ey();(kt!==r||Lt!==s)&&($r=null,Fo=Ze()+500,Rs(r,s));do try{II();break}catch(A){vy(r,A)}while(!0);dd(),sc.current=m,ze=f,_t!==null?s=0:(kt=null,Lt=0,s=At)}if(s!==0){if(s===2&&(f=ka(r),f!==0&&(h=f,s=Qd(r,f))),s===1)throw l=al,Rs(r,0),ki(r,h),rn(r,Ze()),l;if(s===6)ki(r,h);else{if(f=r.current.alternate,(h&30)===0&&!wI(f)&&(s=dc(r,h),s===2&&(m=ka(r),m!==0&&(h=m,s=Qd(r,m))),s===1))throw l=al,Rs(r,0),ki(r,h),rn(r,Ze()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:As(r,nn,$r);break;case 3:if(ki(r,h),(h&130023424)===h&&(s=Wd+500-Ze(),10<s)){if(Nr(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Yt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=td(As.bind(null,r,nn,$r),s);break}As(r,nn,$r);break;case 4:if(ki(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var E=31-hn(h);m=1<<E,E=s[E],E>f&&(f=E),h&=~m}if(h=f,h=Ze()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*EI(h/1960))-h,10<h){r.timeoutHandle=td(As.bind(null,r,nn,$r),h);break}As(r,nn,$r);break;case 5:As(r,nn,$r);break;default:throw Error(t(329))}}}return rn(r,Ze()),r.callbackNode===l?yy.bind(null,r):null}function Qd(r,s){var l=ll;return r.current.memoizedState.isDehydrated&&(Rs(r,s).flags|=256),r=dc(r,s),r!==2&&(s=nn,nn=l,s!==null&&Xd(s)),r}function Xd(r){nn===null?nn=r:nn.push.apply(nn,r)}function wI(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],m=f.getSnapshot;f=f.value;try{if(!Ln(m(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ki(r,s){for(s&=~Hd,s&=~oc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-hn(s),h=1<<l;r[l]=-1,s&=~h}}function _y(r){if((ze&6)!==0)throw Error(t(327));Bo();var s=Nr(r,0);if((s&1)===0)return rn(r,Ze()),null;var l=dc(r,s);if(r.tag!==0&&l===2){var h=ka(r);h!==0&&(s=h,l=Qd(r,h))}if(l===1)throw l=al,Rs(r,0),ki(r,s),rn(r,Ze()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,As(r,nn,$r),rn(r,Ze()),null}function Yd(r,s){var l=ze;ze|=1;try{return r(s)}finally{ze=l,ze===0&&(Fo=Ze()+500,Fu&&Ti())}}function Ss(r){Ci!==null&&Ci.tag===0&&(ze&6)===0&&Bo();var s=ze;ze|=1;var l=Cn.transition,h=Fe;try{if(Cn.transition=null,Fe=1,r)return r()}finally{Fe=h,Cn.transition=l,ze=s,(ze&6)===0&&Ti()}}function Jd(){_n=Uo.current,tt(Uo)}function Rs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,Y0(l)),_t!==null)for(l=_t.return;l!==null;){var h=l;switch(ad(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Mu();break;case 3:Lo(),tt(Zt),tt(Bt),Ed();break;case 5:_d(h);break;case 4:Lo();break;case 13:tt(st);break;case 19:tt(st);break;case 10:fd(h.type._context);break;case 22:case 23:Jd()}l=l.return}if(kt=r,_t=r=Ni(r.current,null),Lt=_n=s,At=0,al=null,Hd=oc=Is=0,nn=ll=null,Es!==null){for(s=0;s<Es.length;s++)if(l=Es[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,m=l.pending;if(m!==null){var E=m.next;m.next=f,h.next=E}l.pending=h}Es=null}return r}function vy(r,s){do{var l=_t;try{if(dd(),Qu.current=Zu,Xu){for(var h=ot.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Xu=!1}if(Ts=0,Pt=Rt=ot=null,tl=!1,nl=0,qd.current=null,l===null||l.return===null){At=1,al=s,_t=null;break}e:{var m=r,E=l.return,A=l,O=s;if(s=Lt,A.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var $=O,Y=A,ee=Y.tag;if((Y.mode&1)===0&&(ee===0||ee===11||ee===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=qg(E);if(le!==null){le.flags&=-257,Hg(le,E,A,m,s),le.mode&1&&$g(m,$,s),s=le,O=$;var he=s.updateQueue;if(he===null){var fe=new Set;fe.add(O),s.updateQueue=fe}else he.add(O);break e}else{if((s&1)===0){$g(m,$,s),Zd();break e}O=Error(t(426))}}else if(it&&A.mode&1){var pt=qg(E);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Hg(pt,E,A,m,s),cd(Vo(O,A));break e}}m=O=Vo(O,A),At!==4&&(At=2),ll===null?ll=[m]:ll.push(m),m=E;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var B=jg(m,O,s);pg(m,B);break e;case 1:A=O;var L=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ai===null||!Ai.has(z)))){m.flags|=65536,s&=-s,m.lanes|=s;var re=zg(m,A,s);pg(m,re);break e}}m=m.return}while(m!==null)}Ty(l)}catch(me){s=me,_t===l&&l!==null&&(_t=l=l.return);continue}break}while(!0)}function Ey(){var r=sc.current;return sc.current=Zu,r===null?Zu:r}function Zd(){(At===0||At===3||At===2)&&(At=4),kt===null||(Is&268435455)===0&&(oc&268435455)===0||ki(kt,Lt)}function dc(r,s){var l=ze;ze|=2;var h=Ey();(kt!==r||Lt!==s)&&($r=null,Rs(r,s));do try{TI();break}catch(f){vy(r,f)}while(!0);if(dd(),ze=l,sc.current=h,_t!==null)throw Error(t(261));return kt=null,Lt=0,At}function TI(){for(;_t!==null;)wy(_t)}function II(){for(;_t!==null&&!ss();)wy(_t)}function wy(r){var s=Ry(r.alternate,r,_n);r.memoizedProps=r.pendingProps,s===null?Ty(r):_t=s,qd.current=null}function Ty(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=mI(l,s,_n),l!==null){_t=l;return}}else{if(l=gI(l,s),l!==null){l.flags&=32767,_t=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{At=6,_t=null;return}}if(s=s.sibling,s!==null){_t=s;return}_t=s=r}while(s!==null);At===0&&(At=5)}function As(r,s,l){var h=Fe,f=Cn.transition;try{Cn.transition=null,Fe=1,SI(r,s,l,h)}finally{Cn.transition=f,Fe=h}return null}function SI(r,s,l,h){do Bo();while(Ci!==null);if((ze&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=l.lanes|l.childLanes;if(Fh(r,m),r===kt&&(_t=kt=null,Lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||lc||(lc=!0,Ay(os,function(){return Bo(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=Cn.transition,Cn.transition=null;var E=Fe;Fe=1;var A=ze;ze|=4,qd.current=null,_I(r,l),dy(l,r),q0(Zh),Dr=!!Jh,Zh=Jh=null,r.current=l,vI(l),kr(),ze=A,Fe=E,Cn.transition=m}else r.current=l;if(lc&&(lc=!1,Ci=r,uc=f),m=r.pendingLanes,m===0&&(Ai=null),vu(l.stateNode),rn(r,Ze()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(ac)throw ac=!1,r=Gd,Gd=null,r;return(uc&1)!==0&&r.tag!==0&&Bo(),m=r.pendingLanes,(m&1)!==0?r===Kd?ul++:(ul=0,Kd=r):ul=0,Ti(),null}function Bo(){if(Ci!==null){var r=Xn(uc),s=Cn.transition,l=Fe;try{if(Cn.transition=null,Fe=16>r?16:r,Ci===null)var h=!1;else{if(r=Ci,Ci=null,uc=0,(ze&6)!==0)throw Error(t(331));var f=ze;for(ze|=4,ce=r.current;ce!==null;){var m=ce,E=m.child;if((ce.flags&16)!==0){var A=m.deletions;if(A!==null){for(var O=0;O<A.length;O++){var $=A[O];for(ce=$;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:ol(8,Y,m)}var ee=Y.child;if(ee!==null)ee.return=Y,ce=ee;else for(;ce!==null;){Y=ce;var Q=Y.sibling,le=Y.return;if(ay(Y),Y===$){ce=null;break}if(Q!==null){Q.return=le,ce=Q;break}ce=le}}}var he=m.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var pt=fe.sibling;fe.sibling=null,fe=pt}while(fe!==null)}}ce=m}}if((m.subtreeFlags&2064)!==0&&E!==null)E.return=m,ce=E;else e:for(;ce!==null;){if(m=ce,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:ol(9,m,m.return)}var B=m.sibling;if(B!==null){B.return=m.return,ce=B;break e}ce=m.return}}var L=r.current;for(ce=L;ce!==null;){E=ce;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,ce=z;else e:for(E=L;ce!==null;){if(A=ce,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:ic(9,A)}}catch(me){ct(A,A.return,me)}if(A===E){ce=null;break e}var re=A.sibling;if(re!==null){re.return=A.return,ce=re;break e}ce=A.return}}if(ze=f,Ti(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(as,r)}catch{}h=!0}return h}finally{Fe=l,Cn.transition=s}}return!1}function Iy(r,s,l){s=Vo(l,s),s=jg(r,s,1),r=Si(r,s,1),s=Yt(),r!==null&&(hs(r,1,s),rn(r,s))}function ct(r,s,l){if(r.tag===3)Iy(r,r,l);else for(;s!==null;){if(s.tag===3){Iy(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ai===null||!Ai.has(h))){r=Vo(l,r),r=zg(s,r,1),s=Si(s,r,1),r=Yt(),s!==null&&(hs(s,1,r),rn(s,r));break}}s=s.return}}function RI(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Yt(),r.pingedLanes|=r.suspendedLanes&l,kt===r&&(Lt&l)===l&&(At===4||At===3&&(Lt&130023424)===Lt&&500>Ze()-Wd?Rs(r,0):Hd|=l),rn(r,s)}function Sy(r,s){s===0&&((r.mode&1)===0?s=1:(s=di,di<<=1,(di&130023424)===0&&(di=4194304)));var l=Yt();r=Br(r,s),r!==null&&(hs(r,s,l),rn(r,l))}function AI(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Sy(r,l)}function CI(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Sy(r,l)}var Ry;Ry=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return tn=!1,pI(r,s,l);tn=(r.flags&131072)!==0}else tn=!1,it&&(s.flags&1048576)!==0&&ig(s,ju,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;nc(r,s),r=s.pendingProps;var f=Po(s,Bt.current);xo(s,l),f=Id(null,s,h,r,f,l);var m=Sd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(h)?(m=!0,Uu(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,gd(s),f.updater=ec,s.stateNode=f,f._reactInternals=s,Nd(s,h,r,l),s=xd(null,s,h,!0,m,l)):(s.tag=0,it&&m&&od(s),Xt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(nc(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=kI(h),r=Mn(h,r),f){case 0:s=Dd(null,s,h,r,l);break e;case 1:s=Yg(null,s,h,r,l);break e;case 11:s=Wg(null,s,h,r,l);break e;case 14:s=Gg(null,s,h,Mn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Mn(h,f),Dd(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Mn(h,f),Yg(r,s,h,f,l);case 3:e:{if(Jg(s),r===null)throw Error(t(387));h=s.pendingProps,m=s.memoizedState,f=m.element,fg(r,s),Gu(s,h,null,l);var E=s.memoizedState;if(h=E.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Vo(Error(t(423)),s),s=Zg(r,s,h,l,f);break e}else if(h!==f){f=Vo(Error(t(424)),s),s=Zg(r,s,h,l,f);break e}else for(yn=vi(s.stateNode.containerInfo.firstChild),gn=s,it=!0,Vn=null,l=hg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(bo(),h===f){s=zr(r,s,l);break e}Xt(r,s,h,l)}s=s.child}return s;case 5:return gg(s),r===null&&ud(s),h=s.type,f=s.pendingProps,m=r!==null?r.memoizedProps:null,E=f.children,ed(h,f)?E=null:m!==null&&ed(h,m)&&(s.flags|=32),Xg(r,s),Xt(r,s,E,l),s.child;case 6:return r===null&&ud(s),null;case 13:return ey(r,s,l);case 4:return yd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Oo(s,null,h,l):Xt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Mn(h,f),Wg(r,s,h,f,l);case 7:return Xt(r,s,s.pendingProps,l),s.child;case 8:return Xt(r,s,s.pendingProps.children,l),s.child;case 12:return Xt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,m=s.memoizedProps,E=f.value,Ye(qu,h._currentValue),h._currentValue=E,m!==null)if(Ln(m.value,E)){if(m.children===f.children&&!Zt.current){s=zr(r,s,l);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var A=m.dependencies;if(A!==null){E=m.child;for(var O=A.firstContext;O!==null;){if(O.context===h){if(m.tag===1){O=jr(-1,l&-l),O.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var Y=$.pending;Y===null?O.next=O:(O.next=Y.next,Y.next=O),$.pending=O}}m.lanes|=l,O=m.alternate,O!==null&&(O.lanes|=l),pd(m.return,l,s),A.lanes|=l;break}O=O.next}}else if(m.tag===10)E=m.type===s.type?null:m.child;else if(m.tag===18){if(E=m.return,E===null)throw Error(t(341));E.lanes|=l,A=E.alternate,A!==null&&(A.lanes|=l),pd(E,l,s),E=m.sibling}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===s){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}Xt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,xo(s,l),f=Rn(f),h=h(f),s.flags|=1,Xt(r,s,h,l),s.child;case 14:return h=s.type,f=Mn(h,s.pendingProps),f=Mn(h.type,f),Gg(r,s,h,f,l);case 15:return Kg(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Mn(h,f),nc(r,s),s.tag=1,en(h)?(r=!0,Uu(s)):r=!1,xo(s,l),Fg(s,h,f),Nd(s,h,f,l),xd(null,s,h,!0,r,l);case 19:return ny(r,s,l);case 22:return Qg(r,s,l)}throw Error(t(156,s.tag))};function Ay(r,s){return Aa(r,s)}function PI(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(r,s,l,h){return new PI(r,s,l,h)}function ef(r){return r=r.prototype,!(!r||!r.isReactComponent)}function kI(r){if(typeof r=="function")return ef(r)?1:0;if(r!=null){if(r=r.$$typeof,r===C)return 11;if(r===De)return 14}return 2}function Ni(r,s){var l=r.alternate;return l===null?(l=Pn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function fc(r,s,l,h,f,m){var E=2;if(h=r,typeof r=="function")ef(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case N:return Cs(l.children,f,m,s);case R:E=8,f|=8;break;case P:return r=Pn(12,l,s,f|2),r.elementType=P,r.lanes=m,r;case I:return r=Pn(13,l,s,f),r.elementType=I,r.lanes=m,r;case ye:return r=Pn(19,l,s,f),r.elementType=ye,r.lanes=m,r;case be:return pc(l,f,m,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:E=10;break e;case D:E=9;break e;case C:E=11;break e;case De:E=14;break e;case Ie:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Pn(E,l,s,f),s.elementType=r,s.type=h,s.lanes=m,s}function Cs(r,s,l,h){return r=Pn(7,r,h,s),r.lanes=l,r}function pc(r,s,l,h){return r=Pn(22,r,h,s),r.elementType=be,r.lanes=l,r.stateNode={isHidden:!1},r}function tf(r,s,l){return r=Pn(6,r,null,s),r.lanes=l,r}function nf(r,s,l){return s=Pn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function NI(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ba(0),this.expirationTimes=ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function rf(r,s,l,h,f,m,E,A,O){return r=new NI(r,s,l,A,O),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Pn(3,null,null,s),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},gd(m),r}function bI(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function Cy(r){if(!r)return wi;r=r._reactInternals;e:{if(Dn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(en(l))return tg(r,l,s)}return s}function Py(r,s,l,h,f,m,E,A,O){return r=rf(l,h,!0,r,f,m,E,A,O),r.context=Cy(null),l=r.current,h=Yt(),f=Pi(l),m=jr(h,f),m.callback=s??null,Si(l,m,f),r.current.lanes=f,hs(r,f,h),rn(r,h),r}function mc(r,s,l,h){var f=s.current,m=Yt(),E=Pi(f);return l=Cy(l),s.context===null?s.context=l:s.pendingContext=l,s=jr(m,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Si(f,s,E),r!==null&&(Bn(r,f,E,m),Wu(r,f,E)),E}function gc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ky(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function sf(r,s){ky(r,s),(r=r.alternate)&&ky(r,s)}function OI(){return null}var Ny=typeof reportError=="function"?reportError:function(r){console.error(r)};function of(r){this._internalRoot=r}yc.prototype.render=of.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));mc(r,s,null,null)},yc.prototype.unmount=of.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ss(function(){mc(null,r,null,null)}),s[Vr]=null}};function yc(r){this._internalRoot=r}yc.prototype.unstable_scheduleHydration=function(r){if(r){var s=La();r={blockedOn:null,target:r,priority:s};for(var l=0;l<dn.length&&s!==0&&s<dn[l].priority;l++);dn.splice(l,0,r),l===0&&ho(r)}};function af(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function _c(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function by(){}function DI(r,s,l,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var $=gc(E);m.call($)}}var E=Py(s,h,r,0,null,!1,!1,"",by);return r._reactRootContainer=E,r[Vr]=E.current,Ga(r.nodeType===8?r.parentNode:r),Ss(),E}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var A=h;h=function(){var $=gc(O);A.call($)}}var O=rf(r,0,!1,null,null,!1,!1,"",by);return r._reactRootContainer=O,r[Vr]=O.current,Ga(r.nodeType===8?r.parentNode:r),Ss(function(){mc(s,O,l,h)}),O}function vc(r,s,l,h,f){var m=l._reactRootContainer;if(m){var E=m;if(typeof f=="function"){var A=f;f=function(){var O=gc(E);A.call(O)}}mc(s,E,r,f)}else E=DI(l,s,r,f,h);return gc(E)}Da=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=qe(s.pendingLanes);l!==0&&(Oa(s,l|1),rn(s,Ze()),(ze&6)===0&&(Fo=Ze()+500,Ti()))}break;case 13:Ss(function(){var h=Br(r,1);if(h!==null){var f=Yt();Bn(h,r,1,f)}}),sf(r,1)}},uo=function(r){if(r.tag===13){var s=Br(r,134217728);if(s!==null){var l=Yt();Bn(s,r,134217728,l)}sf(r,134217728)}},xa=function(r){if(r.tag===13){var s=Pi(r),l=Br(r,s);if(l!==null){var h=Yt();Bn(l,r,s,h)}sf(r,s)}},La=function(){return Fe},Va=function(r,s){var l=Fe;try{return Fe=r,s()}finally{Fe=l}},Ar=function(r,s,l){switch(s){case"input":if(ts(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Vu(h);if(!f)throw Error(t(90));ya(h),ts(h,f)}}}break;case"textarea":au(r,l);break;case"select":s=l.value,s!=null&&bn(r,!!l.multiple,s,!1)}},cu=Yd,hu=Ss;var xI={usingClientEntryPoint:!1,Events:[Xa,Ao,Vu,li,ui,Yd]},cl={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=_u(r),r===null?null:r.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||OI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{as=Ec.inject(LI),cn=Ec}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xI,sn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(s))throw Error(t(200));return bI(r,s,null,l)},sn.createRoot=function(r,s){if(!af(r))throw Error(t(299));var l=!1,h="",f=Ny;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=rf(r,1,!1,null,null,l,!1,h,f),r[Vr]=s.current,Ga(r.nodeType===8?r.parentNode:r),new of(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=_u(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return Ss(r)},sn.hydrate=function(r,s,l){if(!_c(s))throw Error(t(200));return vc(null,r,s,!0,l)},sn.hydrateRoot=function(r,s,l){if(!af(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,m="",E=Ny;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),s=Py(s,null,r,1,l??null,f,!1,m,E),r[Vr]=s.current,Ga(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new yc(s)},sn.render=function(r,s,l){if(!_c(s))throw Error(t(200));return vc(null,r,s,!1,l)},sn.unmountComponentAtNode=function(r){if(!_c(r))throw Error(t(40));return r._reactRootContainer?(Ss(function(){vc(null,null,r,!1,function(){r._reactRootContainer=null,r[Vr]=null})}),!0):!1},sn.unstable_batchedUpdates=Yd,sn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!_c(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return vc(r,s,l,!1,h)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var My;function Gv(){if(My)return uf.exports;My=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uf.exports=$I(),uf.exports}var Uy;function qI(){if(Uy)return wc;Uy=1;var n=Gv();return wc.createRoot=n.createRoot,wc.hydrateRoot=n.hydrateRoot,wc}var HI=qI();Gv();function Pl(){return Pl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pl.apply(this,arguments)}var Mi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Mi||(Mi={}));const Fy="popstate";function WI(n){n===void 0&&(n={});function e(i,o){let{pathname:a,search:u,hash:d}=i.location;return Of("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:qc(o)}return KI(e,t,null,n)}function It(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GI(){return Math.random().toString(36).substr(2,8)}function By(n,e){return{usr:n.state,key:n.key,idx:e}}function Of(n,e,t,i){return t===void 0&&(t=null),Pl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?oa(e):e,{state:t,key:e&&e.key||i||GI()})}function qc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function oa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function KI(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=Mi.Pop,p=null,y=v();y==null&&(y=0,u.replaceState(Pl({},u.state,{idx:y}),""));function v(){return(u.state||{idx:null}).idx}function w(){d=Mi.Pop;let k=v(),J=k==null?null:k-y;y=k,p&&p({action:d,location:U.location,delta:J})}function S(k,J){d=Mi.Push;let ne=Of(U.location,k,J);y=v()+1;let X=By(ne,y),se=U.createHref(ne);try{u.pushState(X,"",se)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(se)}a&&p&&p({action:d,location:U.location,delta:1})}function M(k,J){d=Mi.Replace;let ne=Of(U.location,k,J);y=v();let X=By(ne,y),se=U.createHref(ne);u.replaceState(X,"",se),a&&p&&p({action:d,location:U.location,delta:0})}function b(k){let J=o.location.origin!=="null"?o.location.origin:o.location.href,ne=typeof k=="string"?k:qc(k);return ne=ne.replace(/ $/,"%20"),It(J,"No window.location.(origin|href) available to create URL for href: "+ne),new URL(ne,J)}let U={get action(){return d},get location(){return n(o,u)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Fy,w),p=k,()=>{o.removeEventListener(Fy,w),p=null}},createHref(k){return e(o,k)},createURL:b,encodeLocation(k){let J=b(k);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:S,replace:M,go(k){return u.go(k)}};return U}var jy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(jy||(jy={}));function QI(n,e,t){return t===void 0&&(t="/"),XI(n,e,t)}function XI(n,e,t,i){let o=typeof e=="string"?oa(e):e,a=fp(o.pathname||"/",t);if(a==null)return null;let u=Kv(n);YI(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let y=uS(a);d=oS(u[p],y)}return d}function Kv(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(It(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Fi([i,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(It(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Kv(a.children,e,v,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:iS(y,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let p of Qv(a.path))o(a,u,p)}),e}function Qv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=Qv(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function YI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const JI=/^:[\w-]+$/,ZI=3,eS=2,tS=1,nS=10,rS=-2,zy=n=>n==="*";function iS(n,e){let t=n.split("/"),i=t.length;return t.some(zy)&&(i+=rS),e&&(i+=eS),t.filter(o=>!zy(o)).reduce((o,a)=>o+(JI.test(a)?ZI:a===""?tS:nS),i)}function sS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function oS(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=aS({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),S=p.route;if(!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:Fi([a,w.pathname]),pathnameBase:pS(Fi([a,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(a=Fi([a,w.pathnameBase]))}return u}function aS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=lS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,v,w)=>{let{paramName:S,isOptional:M}=v;if(S==="*"){let U=d[w]||"";u=a.slice(0,a.length-U.length).replace(/(.)\/+$/,"$1")}const b=d[w];return M&&!b?y[S]=void 0:y[S]=(b||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:n}}function lS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),dp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function uS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function fp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const cS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hS=n=>cS.test(n);function dS(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?oa(n):n,a;if(t)if(hS(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),dp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=$y(t.substring(1),"/"):a=$y(t,e)}else a=e;return{pathname:a,search:mS(i),hash:gS(o)}}function $y(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function df(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xv(n,e){let t=fS(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Yv(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=oa(n):(o=Pl({},n),It(!o.pathname||!o.pathname.includes("?"),df("?","pathname","search",o)),It(!o.pathname||!o.pathname.includes("#"),df("#","pathname","hash",o)),It(!o.search||!o.search.includes("#"),df("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}d=w>=0?e[w]:"/"}let p=dS(o,d),y=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}const Fi=n=>n.join("/").replace(/\/\/+/g,"/"),pS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function yS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Jv=["post","put","patch","delete"];new Set(Jv);const _S=["get",...Jv];new Set(_S);function kl(){return kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},kl.apply(this,arguments)}const pp=Z.createContext(null),vS=Z.createContext(null),$s=Z.createContext(null),hh=Z.createContext(null),qs=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),Zv=Z.createContext(null);function ES(n,e){let{relative:t}=e===void 0?{}:e;jl()||It(!1);let{basename:i,navigator:o}=Z.useContext($s),{hash:a,pathname:u,search:d}=tE(n,{relative:t}),p=u;return i!=="/"&&(p=u==="/"?i:Fi([i,u])),o.createHref({pathname:p,search:d,hash:a})}function jl(){return Z.useContext(hh)!=null}function dh(){return jl()||It(!1),Z.useContext(hh).location}function eE(n){Z.useContext($s).static||Z.useLayoutEffect(n)}function mp(){let{isDataRoute:n}=Z.useContext(qs);return n?DS():wS()}function wS(){jl()||It(!1);let n=Z.useContext(pp),{basename:e,future:t,navigator:i}=Z.useContext($s),{matches:o}=Z.useContext(qs),{pathname:a}=dh(),u=JSON.stringify(Xv(o,t.v7_relativeSplatPath)),d=Z.useRef(!1);return eE(()=>{d.current=!0}),Z.useCallback(function(y,v){if(v===void 0&&(v={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let w=Yv(y,JSON.parse(u),a,v.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Fi([e,w.pathname])),(v.replace?i.replace:i.push)(w,v.state,v)},[e,i,u,a,n])}function tE(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Z.useContext($s),{matches:o}=Z.useContext(qs),{pathname:a}=dh(),u=JSON.stringify(Xv(o,i.v7_relativeSplatPath));return Z.useMemo(()=>Yv(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function TS(n,e){return IS(n,e)}function IS(n,e,t,i){jl()||It(!1);let{navigator:o}=Z.useContext($s),{matches:a}=Z.useContext(qs),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let y=dh(),v;if(e){var w;let k=typeof e=="string"?oa(e):e;p==="/"||(w=k.pathname)!=null&&w.startsWith(p)||It(!1),v=k}else v=y;let S=v.pathname||"/",M=S;if(p!=="/"){let k=p.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=QI(n,{pathname:M}),U=PS(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:Fi([p,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:Fi([p,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,i);return e&&U?Z.createElement(hh.Provider,{value:{location:kl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Mi.Pop}},U):U}function SS(){let n=OS(),e=yS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),t?Z.createElement("pre",{style:o},t):null,null)}const RS=Z.createElement(SS,null);class AS extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(qs.Provider,{value:this.props.routeContext},Z.createElement(Zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CS(n){let{routeContext:e,match:t,children:i}=n,o=Z.useContext(pp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(qs.Provider,{value:e},i)}function PS(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);v>=0||It(!1),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let v=0;v<u.length;v++){let w=u[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=v),w.route.id){let{loaderData:S,errors:M}=t,b=w.route.loader&&S[w.route.id]===void 0&&(!M||M[w.route.id]===void 0);if(w.route.lazy||b){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((v,w,S)=>{let M,b=!1,U=null,k=null;t&&(M=d&&w.route.id?d[w.route.id]:void 0,U=w.route.errorElement||RS,p&&(y<0&&S===0?(xS("route-fallback"),b=!0,k=null):y===S&&(b=!0,k=w.route.hydrateFallbackElement||null)));let J=e.concat(u.slice(0,S+1)),ne=()=>{let X;return M?X=U:b?X=k:w.route.Component?X=Z.createElement(w.route.Component,null):w.route.element?X=w.route.element:X=v,Z.createElement(CS,{match:w,routeContext:{outlet:v,matches:J,isDataRoute:t!=null},children:X})};return t&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?Z.createElement(AS,{location:t.location,revalidation:t.revalidation,component:U,error:M,children:ne(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):ne()},null)}var nE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(nE||{}),rE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(rE||{});function kS(n){let e=Z.useContext(pp);return e||It(!1),e}function NS(n){let e=Z.useContext(vS);return e||It(!1),e}function bS(n){let e=Z.useContext(qs);return e||It(!1),e}function iE(n){let e=bS(),t=e.matches[e.matches.length-1];return t.route.id||It(!1),t.route.id}function OS(){var n;let e=Z.useContext(Zv),t=NS(),i=iE();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function DS(){let{router:n}=kS(nE.UseNavigateStable),e=iE(rE.UseNavigateStable),t=Z.useRef(!1);return eE(()=>{t.current=!0}),Z.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,kl({fromRouteId:e},a)))},[n,e])}const qy={};function xS(n,e,t){qy[n]||(qy[n]=!0)}function LS(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function qr(n){It(!1)}function VS(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Mi.Pop,navigator:a,static:u=!1,future:d}=n;jl()&&It(!1);let p=e.replace(/^\/*/,"/"),y=Z.useMemo(()=>({basename:p,navigator:a,static:u,future:kl({v7_relativeSplatPath:!1},d)}),[p,d,a,u]);typeof i=="string"&&(i=oa(i));let{pathname:v="/",search:w="",hash:S="",state:M=null,key:b="default"}=i,U=Z.useMemo(()=>{let k=fp(v,p);return k==null?null:{location:{pathname:k,search:w,hash:S,state:M,key:b},navigationType:o}},[p,v,w,S,M,b,o]);return U==null?null:Z.createElement($s.Provider,{value:y},Z.createElement(hh.Provider,{children:t,value:U}))}function MS(n){let{children:e,location:t}=n;return TS(Df(e),t)}new Promise(()=>{});function Df(n,e){e===void 0&&(e=[]);let t=[];return Z.Children.forEach(n,(i,o)=>{if(!Z.isValidElement(i))return;let a=[...e,o];if(i.type===Z.Fragment){t.push.apply(t,Df(i.props.children,a));return}i.type!==qr&&It(!1),!i.props.index||!i.props.children||It(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Df(i.props.children,a)),t.push(u)}),t}function xf(){return xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xf.apply(this,arguments)}function US(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function FS(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BS(n,e){return n.button===0&&(!e||e==="_self")&&!FS(n)}const jS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zS="6";try{window.__reactRouterVersion=zS}catch{}const $S="startTransition",Hy=BI[$S];function qS(n){let{basename:e,children:t,future:i,window:o}=n,a=Z.useRef();a.current==null&&(a.current=WI({window:o,v5Compat:!0}));let u=a.current,[d,p]=Z.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},v=Z.useCallback(w=>{y&&Hy?Hy(()=>p(w)):p(w)},[p,y]);return Z.useLayoutEffect(()=>u.listen(v),[u,v]),Z.useEffect(()=>LS(i),[i]),Z.createElement(VS,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const HS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=Z.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:p,to:y,preventScrollReset:v,viewTransition:w}=e,S=US(e,jS),{basename:M}=Z.useContext($s),b,U=!1;if(typeof y=="string"&&WS.test(y)&&(b=y,HS))try{let X=new URL(window.location.href),se=y.startsWith("//")?new URL(X.protocol+y):new URL(y),de=fp(se.pathname,M);se.origin===X.origin&&de!=null?y=de+se.search+se.hash:U=!0}catch{}let k=ES(y,{relative:o}),J=GS(y,{replace:u,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:w});function ne(X){i&&i(X),X.defaultPrevented||J(X)}return Z.createElement("a",xf({},S,{href:b||k,onClick:U||a?i:ne,ref:t,target:p}))});var Wy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Wy||(Wy={}));var Gy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Gy||(Gy={}));function GS(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,p=mp(),y=dh(),v=tE(n,{relative:u});return Z.useCallback(w=>{if(BS(w,t)){w.preventDefault();let S=i!==void 0?i:qc(y)===qc(v);p(n,{replace:S,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[y,p,v,i,o,t,n,a,u,d])}const KS=()=>{};var Ky={};const sE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},QS=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,M=y&63;p||(M=64,u||(S=64)),i.push(t[v],t[w],t[S],t[M])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):QS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||w==null)throw new XS;const S=a<<2|d>>4;if(i.push(S),y!==64){const M=d<<4&240|y>>2;if(i.push(M),w!==64){const b=y<<6&192|w;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YS=function(n){const e=sE(n);return oE.encodeByteArray(e,!0)},Hc=function(n){return YS(n).replace(/\./g,"")},aE=function(n){try{return oE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZS=()=>JS().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof Ky>"u")return;const n=Ky.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aE(n[1]);return e&&JSON.parse(e)},fh=()=>{try{return KS()||ZS()||eR()||tR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lE=n=>fh()?.emulatorHosts?.[n],uE=n=>{const e=lE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},cE=()=>fh()?.config,hE=n=>fh()?.[`_${n}`];class nR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Ji(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gp(n){return(await fetch(n,{credentials:"include"})).ok}function dE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hc(JSON.stringify(t)),Hc(JSON.stringify(u)),""].join(".")}const El={};function rR(){const n={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?n.emulator.push(e):n.prod.push(e);return n}function iR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Qy=!1;function yp(n,e){if(typeof window>"u"||typeof document>"u"||!Ji(window.location.host)||El[n]===e||El[n]||Qy)return;El[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=rR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,M){S.setAttribute("width","24"),S.setAttribute("id",M),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Qy=!0,u()},S}function v(S,M){S.setAttribute("id",M),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=iR(i),M=t("text"),b=document.getElementById(M)||document.createElement("span"),U=t("learnmore"),k=document.getElementById(U)||document.createElement("a"),J=t("preprendIcon"),ne=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;d(X),v(k,U);const se=y();p(ne,J),X.append(ne,b,k,se),document.body.appendChild(X)}a?(b.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function oR(){const n=fh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hR(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const pR="FirebaseError";class Rr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=pR,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?mR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Rr(o,d,i)}}function mR(n,e){return n.replace(gR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const gR=/\{\$([^}]+)}/g;function yR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ls(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(Xy(a)&&Xy(u)){if(!Ls(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Xy(n){return n!==null&&typeof n=="object"}function $l(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function ml(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function _R(n,e){const t=new vR(n,e);return t.subscribe.bind(t)}class vR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ER(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=ff),o.error===void 0&&(o.error=ff),o.complete===void 0&&(o.complete=ff);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ER(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ff(){}function St(n){return n&&n._delegate?n._delegate:n}class qi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ps="[DEFAULT]";class wR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new nR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IR(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(n){return n===Ps?void 0:n}function IR(n){return n.instantiationMode==="EAGER"}class SR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const RR={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},AR=Ve.INFO,CR={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},PR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=CR[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=AR,this._logHandler=PR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const kR=(n,e)=>e.some(t=>n instanceof t);let Yy,Jy;function NR(){return Yy||(Yy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return Jy||(Jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,Lf=new WeakMap,pE=new WeakMap,pf=new WeakMap,vp=new WeakMap;function OR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Bi(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&fE.set(t,n)}).catch(()=>{}),vp.set(e,n),e}function DR(n){if(Lf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Lf.set(n,e)}let Vf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xR(n){Vf=n(Vf)}function LR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(mf(this),e,...t);return pE.set(i,e.sort?e.sort():[e]),Bi(i)}:bR().includes(n)?function(...e){return n.apply(mf(this),e),Bi(fE.get(this))}:function(...e){return Bi(n.apply(mf(this),e))}}function VR(n){return typeof n=="function"?LR(n):(n instanceof IDBTransaction&&DR(n),kR(n,NR())?new Proxy(n,Vf):n)}function Bi(n){if(n instanceof IDBRequest)return OR(n);if(pf.has(n))return pf.get(n);const e=VR(n);return e!==n&&(pf.set(n,e),vp.set(e,n)),e}const mf=n=>vp.get(n);function MR(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Bi(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Bi(u.result),p.oldVersion,p.newVersion,Bi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const UR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],gf=new Map;function Zy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=FR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||UR.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return gf.set(e,a),a}xR(n=>({...n,get:(e,t,i)=>Zy(e,t)||n.get(e,t,i),has:(e,t)=>!!Zy(e,t)||n.has(e,t)}));class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function jR(n){return n.getComponent()?.type==="VERSION"}const Mf="@firebase/app",e_="0.14.6";const Jr=new _p("@firebase/app"),zR="@firebase/app-compat",$R="@firebase/analytics-compat",qR="@firebase/analytics",HR="@firebase/app-check-compat",WR="@firebase/app-check",GR="@firebase/auth",KR="@firebase/auth-compat",QR="@firebase/database",XR="@firebase/data-connect",YR="@firebase/database-compat",JR="@firebase/functions",ZR="@firebase/functions-compat",eA="@firebase/installations",tA="@firebase/installations-compat",nA="@firebase/messaging",rA="@firebase/messaging-compat",iA="@firebase/performance",sA="@firebase/performance-compat",oA="@firebase/remote-config",aA="@firebase/remote-config-compat",lA="@firebase/storage",uA="@firebase/storage-compat",cA="@firebase/firestore",hA="@firebase/ai",dA="@firebase/firestore-compat",fA="firebase",pA="12.6.0";const Uf="[DEFAULT]",mA={[Mf]:"fire-core",[zR]:"fire-core-compat",[qR]:"fire-analytics",[$R]:"fire-analytics-compat",[WR]:"fire-app-check",[HR]:"fire-app-check-compat",[GR]:"fire-auth",[KR]:"fire-auth-compat",[QR]:"fire-rtdb",[XR]:"fire-data-connect",[YR]:"fire-rtdb-compat",[JR]:"fire-fn",[ZR]:"fire-fn-compat",[eA]:"fire-iid",[tA]:"fire-iid-compat",[nA]:"fire-fcm",[rA]:"fire-fcm-compat",[iA]:"fire-perf",[sA]:"fire-perf-compat",[oA]:"fire-rc",[aA]:"fire-rc-compat",[lA]:"fire-gcs",[uA]:"fire-gcs-compat",[cA]:"fire-fst",[dA]:"fire-fst-compat",[hA]:"fire-vertex","fire-js":"fire-js",[fA]:"fire-js-all"};const Wc=new Map,gA=new Map,Ff=new Map;function t_(n,e){try{n.container.addComponent(e)}catch(t){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vs(n){const e=n.name;if(Ff.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,n);for(const t of Wc.values())t_(t,n);for(const t of gA.values())t_(t,n);return!0}function ph(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vn(n){return n==null?!1:n.settings!==void 0}const yA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new zl("app","Firebase",yA);class _A{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}const Hs=pA;function mE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Uf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw ji.create("bad-app-name",{appName:String(o)});if(t||(t=cE()),!t)throw ji.create("no-options");const a=Wc.get(o);if(a){if(Ls(t,a.options)&&Ls(i,a.config))return a;throw ji.create("duplicate-app",{appName:o})}const u=new SR(o);for(const p of Ff.values())u.addComponent(p);const d=new _A(t,i,u);return Wc.set(o,d),d}function Ep(n=Uf){const e=Wc.get(n);if(!e&&n===Uf&&cE())return mE();if(!e)throw ji.create("no-app",{appName:n});return e}function mr(n,e,t){let i=mA[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(u.join(" "));return}Vs(new qi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const vA="firebase-heartbeat-database",EA=1,Nl="firebase-heartbeat-store";let yf=null;function gE(){return yf||(yf=MR(vA,EA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ji.create("idb-open",{originalErrorMessage:n.message})})),yf}async function wA(n){try{const t=(await gE()).transaction(Nl),i=await t.objectStore(Nl).get(yE(n));return await t.done,i}catch(e){if(e instanceof Rr)Jr.warn(e.message);else{const t=ji.create("idb-get",{originalErrorMessage:e?.message});Jr.warn(t.message)}}}async function n_(n,e){try{const i=(await gE()).transaction(Nl,"readwrite");await i.objectStore(Nl).put(e,yE(n)),await i.done}catch(t){if(t instanceof Rr)Jr.warn(t.message);else{const i=ji.create("idb-set",{originalErrorMessage:t?.message});Jr.warn(i.message)}}}function yE(n){return`${n.name}!${n.options.appId}`}const TA=1024,IA=30;class SA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>IA){const o=CA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=r_(),{heartbeatsToSend:t,unsentEntries:i}=RA(this._heartbeatsCache.heartbeats),o=Hc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Jr.warn(e),""}}}function r_(){return new Date().toISOString().substring(0,10)}function RA(n,e=TA){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),i_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),i_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?fR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i_(n){return Hc(JSON.stringify({version:2,heartbeats:n})).length}function CA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function PA(n){Vs(new qi("platform-logger",e=>new BR(e),"PRIVATE")),Vs(new qi("heartbeat",e=>new SA(e),"PRIVATE")),mr(Mf,e_,n),mr(Mf,e_,"esm2020"),mr("fire-js","")}PA("");var kA="firebase",NA="12.6.0";mr(kA,NA,"app");function _E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bA=_E,vE=new zl("auth","Firebase",_E());const Gc=new _p("@firebase/auth");function OA(n,...e){Gc.logLevel<=Ve.WARN&&Gc.warn(`Auth (${Hs}): ${n}`,...e)}function bc(n,...e){Gc.logLevel<=Ve.ERROR&&Gc.error(`Auth (${Hs}): ${n}`,...e)}function $n(n,...e){throw wp(n,...e)}function gr(n,...e){return wp(n,...e)}function EE(n,e,t){const i={...bA(),[e]:t};return new zl("auth","Firebase",i).create(e,{appName:n.name})}function Kr(n){return EE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return vE.create(n,...e)}function we(n,e,...t){if(!n)throw wp(e,...t)}function Wr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bc(e),new Error(e)}function Zr(n,e){n||Wr(e)}function Bf(){return typeof self<"u"&&self.location?.href||""}function DA(){return s_()==="http:"||s_()==="https:"}function s_(){return typeof self<"u"&&self.location?.protocol||null}function xA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DA()||lR()||"connection"in navigator)?navigator.onLine:!0}function LA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ql{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zr(t>e,"Short delay should be less than long delay!"),this.isMobile=sR()||uR()}get(){return xA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tp(n,e){Zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class wE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const VA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UA=new ql(3e4,6e4);function Zi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function es(n,e,t,i,o={}){return TE(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=$l({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:p,...a};return aR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ji(n.emulatorConfig.host)&&(y.credentials="include"),wE.fetch()(await IE(n,n.config.apiHost,t,d),y)})}async function TE(n,e,t){n._canInitEmulator=!1;const i={...VA,...e};try{const o=new BA(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Tc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Tc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Tc(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw EE(n,v,y);$n(n,v)}}catch(o){if(o instanceof Rr)throw o;$n(n,"network-request-failed",{message:String(o)})}}async function Hl(n,e,t,i,o={}){const a=await es(n,e,t,i,o);return"mfaPendingCredential"in a&&$n(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function IE(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Tp(n.config,o):`${n.config.apiScheme}://${o}`;return MA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function FA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),UA.get())})}}function Tc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=gr(n,e,i);return o.customData._tokenResponse=t,o}function o_(n){return n!==void 0&&n.enterprise!==void 0}class jA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return FA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zA(n,e){return es(n,"GET","/v2/recaptchaConfig",Zi(n,e))}async function $A(n,e){return es(n,"POST","/v1/accounts:delete",e)}async function Kc(n,e){return es(n,"POST","/v1/accounts:lookup",e)}function wl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qA(n,e=!1){const t=St(n),i=await t.getIdToken(e),o=Ip(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:wl(_f(o.auth_time)),issuedAtTime:wl(_f(o.iat)),expirationTime:wl(_f(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function _f(n){return Number(n)*1e3}function Ip(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const o=aE(t);return o?JSON.parse(o):(bc("Failed to decode base64 JWT payload"),null)}catch(o){return bc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function a_(n){const e=Ip(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Rr&&HA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function HA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class WA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qc(n){const e=n.auth,t=await n.getIdToken(),i=await bl(n,Kc(e,{idToken:t}));we(i?.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=o.providerUserInfo?.length?SE(o.providerUserInfo):[],u=KA(n.providerData,a),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!u?.length,y=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function GA(n){const e=St(n);await Qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KA(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function SE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function QA(n,e){const t=await TE(n,{},async()=>{const i=$l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await IE(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Ji(n.emulatorConfig.host)&&(p.credentials="include"),wE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function XA(n,e){return es(n,"POST","/v2/accounts:revokeToken",Zi(n,e))}class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=a_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await QA(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ko;return i&&(we(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(we(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return Wr("not implemented")}}function Oi(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class jn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new WA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await bl(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qA(this,e)}reload(){return GA(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Qc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await bl(this,$A(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:M,providerData:b,stsTokenManager:U}=t;we(w&&U,e,"internal-error");const k=Ko.fromJSON(this.name,U);we(typeof w=="string",e,"internal-error"),Oi(i,e.name),Oi(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof M=="boolean",e,"internal-error"),Oi(a,e.name),Oi(u,e.name),Oi(d,e.name),Oi(p,e.name),Oi(y,e.name),Oi(v,e.name);const J=new jn({uid:w,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:M,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:k,createdAt:y,lastLoginAt:v});return b&&Array.isArray(b)&&(J.providerData=b.map(ne=>({...ne}))),p&&(J._redirectEventId=p),J}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ko;o.updateFromServerResponse(t);const a=new jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Qc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?SE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new Ko;d.updateFromIdToken(i);const p=new jn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new jf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,y),p}}const l_=new Map;function Gr(n){Zr(n instanceof Function,"Expected a class definition");let e=l_.get(n);return e?(Zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,l_.set(n,e),e)}class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RE.type="NONE";const u_=RE;function Oc(n,e,t){return`firebase:${n}:${e}:${t}`}class Qo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Oc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Oc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kc(this.auth,{idToken:e}).catch(()=>{});return t?jn._fromGetAccountInfoResponse(this.auth,t,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Qo(Gr(u_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Gr(u_);const u=Oc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const v=await y._get(u);if(v){let w;if(typeof v=="string"){const S=await Kc(e,{idToken:v}).catch(()=>{});if(!S)break;w=await jn._fromGetAccountInfoResponse(e,S,v)}else w=jn._fromJSON(e,v);y!==a&&(d=w),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Qo(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new Qo(a,e,i))}}function c_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bE(e))return"Blackberry";if(OE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||PE(e))&&!e.includes("edge/"))return"Chrome";if(NE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function AE(n=Kt()){return/firefox\//i.test(n)}function CE(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PE(n=Kt()){return/crios\//i.test(n)}function kE(n=Kt()){return/iemobile/i.test(n)}function NE(n=Kt()){return/android/i.test(n)}function bE(n=Kt()){return/blackberry/i.test(n)}function OE(n=Kt()){return/webos/i.test(n)}function Sp(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function YA(n=Kt()){return Sp(n)&&!!window.navigator?.standalone}function JA(){return cR()&&document.documentMode===10}function DE(n=Kt()){return Sp(n)||NE(n)||OE(n)||bE(n)||/windows phone/i.test(n)||kE(n)}function xE(n,e=[]){let t;switch(n){case"Browser":t=c_(Kt());break;case"Worker":t=`${c_(Kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hs}/${i}`}class ZA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function e1(n,e={}){return es(n,"GET","/v2/passwordPolicy",Zi(n,e))}const t1=6;class n1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??t1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class r1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h_(this),this.idTokenSubscription=new h_(this),this.beforeStateQueue=new ZA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kc(this,{idToken:e}),i=await jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Kr(this));const t=e?St(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e1(this),t=new n1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await XA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&OA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ws(n){return St(n)}class h_{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i1(n){mh=n}function LE(n){return mh.loadJS(n)}function s1(){return mh.recaptchaEnterpriseScript}function o1(){return mh.gapiScript}function a1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class l1{constructor(){this.enterprise=new u1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class u1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c1="recaptcha-enterprise",VE="NO_RECAPTCHA";class h1{constructor(e){this.type=c1,this.auth=Ws(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{zA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new jA(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;o_(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(VE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l1().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&o_(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=s1();p.length!==0&&(p+=d),LE(p).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function d_(n,e,t,i=!1,o=!1){const a=new h1(n);let u;if(o)u=VE;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function zf(n,e,t,i,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await d_(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await d_(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}function d1(n,e){const t=ph(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ls(a,e??{}))return o;$n(o,"already-initialized")}return t.initialize({options:e})}function f1(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Gr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function p1(n,e,t){const i=Ws(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=ME(e),{host:u,port:d}=m1(e),p=d===null?"":`:${d}`,y={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(Ls(y,i.config.emulator)&&Ls(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Ji(u)?(gp(`${a}//${u}${p}`),yp("Auth",!0)):g1()}function ME(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function m1(n){const e=ME(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:f_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:f_(u)}}}function f_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function g1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Rp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,t){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}async function y1(n,e){return es(n,"POST","/v1/accounts:signUp",e)}async function _1(n,e){return Hl(n,"POST","/v1/accounts:signInWithPassword",Zi(n,e))}async function v1(n,e){return Hl(n,"POST","/v1/accounts:signInWithEmailLink",Zi(n,e))}async function E1(n,e){return Hl(n,"POST","/v1/accounts:signInWithEmailLink",Zi(n,e))}class Ol extends Rp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ol(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ol(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zf(e,t,"signInWithPassword",_1);case"emailLink":return v1(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zf(e,i,"signUpPassword",y1);case"emailLink":return E1(e,{idToken:t,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xo(n,e){return Hl(n,"POST","/v1/accounts:signInWithIdp",Zi(n,e))}const w1="http://localhost";class Ms extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new Ms(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Xo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}buildRequest(){const e={requestUri:w1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$l(t)}return e}}function T1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function I1(n){const e=pl(ml(n)).link,t=e?pl(ml(e)).deep_link_id:null,i=pl(ml(n)).deep_link_id;return(i?pl(ml(i)).link:null)||i||t||e||n}class Ap{constructor(e){const t=pl(ml(e)),i=t.apiKey??null,o=t.oobCode??null,a=T1(t.mode??null);we(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=I1(e);try{return new Ap(t)}catch{return null}}}class aa{constructor(){this.providerId=aa.PROVIDER_ID}static credential(e,t){return Ol._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ap.parseLink(t);return we(i,"argument-error"),Ol._fromEmailAndCode(e,i.code,i.tenantId)}}aa.PROVIDER_ID="password";aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class UE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wl extends UE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Di extends Wl{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";class xi extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ms._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xi.credential(t,i)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";class Li extends Wl{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";class Vi extends Wl{constructor(){super("twitter.com")}static credential(e,t){return Ms._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Vi.credential(t,i)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";async function S1(n,e){return Hl(n,"POST","/v1/accounts:signUp",Zi(n,e))}class Us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await jn._fromIdTokenResponse(e,i,o),u=p_(i);return new Us({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=p_(i);return new Us({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function p_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Xc extends Rr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Xc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Xc(e,t,i,o)}}function FE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Xc._fromErrorAndOperation(n,a,e,i):a})}async function R1(n,e,t=!1){const i=await bl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Us._forOperation(n,"link",i)}async function A1(n,e,t=!1){const{auth:i}=n;if(vn(i.app))return Promise.reject(Kr(i));const o="reauthenticate";try{const a=await bl(n,FE(i,o,e,n),t);we(a.idToken,i,"internal-error");const u=Ip(a.idToken);we(u,i,"internal-error");const{sub:d}=u;return we(n.uid===d,i,"user-mismatch"),Us._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&$n(i,"user-mismatch"),a}}async function BE(n,e,t=!1){if(vn(n.app))return Promise.reject(Kr(n));const i="signIn",o=await FE(n,i,e),a=await Us._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function C1(n,e){return BE(Ws(n),e)}async function jE(n){const e=Ws(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zE(n,e,t){if(vn(n.app))return Promise.reject(Kr(n));const i=Ws(n),u=await zf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jE(n),p}),d=await Us._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function $E(n,e,t){return vn(n.app)?Promise.reject(Kr(n)):C1(St(n),aa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&jE(n),i})}function P1(n,e,t,i){return St(n).onIdTokenChanged(e,t,i)}function k1(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function N1(n,e,t,i){return St(n).onAuthStateChanged(e,t,i)}function b1(n){return St(n).signOut()}const Yc="__sak";class qE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const O1=1e3,D1=10;class HE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);JA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,D1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},O1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HE.type="LOCAL";const x1=HE;class WE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WE.type="SESSION";const GE=WE;function L1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new gh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await L1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];function Cp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class V1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=Cp("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function yr(){return window}function M1(n){yr().location.href=n}function KE(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function U1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F1(){return navigator?.serviceWorker?.controller||null}function B1(){return KE()?self:null}const QE="firebaseLocalStorageDb",j1=1,Jc="firebaseLocalStorage",XE="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yh(n,e){return n.transaction([Jc],e?"readwrite":"readonly").objectStore(Jc)}function z1(){const n=indexedDB.deleteDatabase(QE);return new Gl(n).toPromise()}function $f(){const n=indexedDB.open(QE,j1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Jc,{keyPath:XE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Jc)?e(i):(i.close(),await z1(),e(await $f()))})})}async function m_(n,e,t){const i=yh(n,!0).put({[XE]:e,value:t});return new Gl(i).toPromise()}async function $1(n,e){const t=yh(n,!1).get(e),i=await new Gl(t).toPromise();return i===void 0?null:i.value}function g_(n,e){const t=yh(n,!0).delete(e);return new Gl(t).toPromise()}const q1=800,H1=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $f(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>H1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(B1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await U1(),!this.activeServiceWorker)return;this.sender=new V1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $f();return await m_(e,Yc,"1"),await g_(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>m_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>$1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=yh(o,!1).getAll();return new Gl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const W1=YE;new ql(3e4,6e4);function G1(n,e){return e?Gr(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Pp extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function K1(n){return BE(n.auth,new Pp(n),n.bypassAuthState)}function Q1(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),A1(t,new Pp(n),n.bypassAuthState)}async function X1(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),R1(t,new Pp(n),n.bypassAuthState)}class JE{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K1;case"linkViaPopup":case"linkViaRedirect":return X1;case"reauthViaPopup":case"reauthViaRedirect":return Q1;default:$n(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Y1=new ql(2e3,1e4);class Go extends JE{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y1.get())};e()}}Go.currentPopupAction=null;const J1="pendingRedirect",Dc=new Map;class Z1 extends JE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Dc.get(this.auth._key());if(!e){try{const i=await eC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eC(n,e){const t=rC(e),i=nC(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function tC(n,e){Dc.set(n._key(),e)}function nC(n){return Gr(n._redirectPersistence)}function rC(n){return Oc(J1,n.config.apiKey,n.name)}async function iC(n,e,t=!1){if(vn(n.app))return Promise.reject(Kr(n));const i=Ws(n),o=G1(i,e),u=await new Z1(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const sC=600*1e3;class oC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ZE(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sC&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(e))}saveEventToCache(e){this.cachedEventUids.add(y_(e)),this.lastProcessedEventTime=Date.now()}}function y_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(n);default:return!1}}async function lC(n,e={}){return es(n,"GET","/v1/projects",e)}const uC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cC=/^https?/;async function hC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await lC(n);for(const t of e)try{if(dC(t))return}catch{}$n(n,"unauthorized-domain")}function dC(n){const e=Bf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!cC.test(t))return!1;if(uC.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const fC=new ql(3e4,6e4);function __(){const n=yr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pC(n){return new Promise((e,t)=>{function i(){__(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{__(),t(gr(n,"network-request-failed"))},timeout:fC.get()})}if(yr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yr().gapi?.load)i();else{const o=a1("iframefcb");return yr()[o]=()=>{gapi.load?i():t(gr(n,"network-request-failed"))},LE(`${o1()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw xc=null,e})}let xc=null;function mC(n){return xc=xc||pC(n),xc}const gC=new ql(5e3,15e3),yC="__/auth/iframe",_C="emulator/auth/iframe",vC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wC(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tp(e,_C):`https://${n.config.authDomain}/${yC}`,i={apiKey:e.apiKey,appName:n.name,v:Hs},o=EC.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${$l(i).slice(1)}`}async function TC(n){const e=await mC(n),t=yr().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:wC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vC,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=gr(n,"network-request-failed"),d=yr().setTimeout(()=>{a(u)},gC.get());function p(){yr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}const IC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SC=500,RC=600,AC="_blank",CC="http://localhost";class v_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PC(n,e,t,i=SC,o=RC){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...IC,width:i.toString(),height:o.toString(),top:a,left:u},y=Kt().toLowerCase();t&&(d=PE(y)?AC:t),AE(y)&&(e=e||CC,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[M,b])=>`${S}${M}=${b},`,"");if(YA(y)&&d!=="_self")return kC(e||"",d),new v_(null);const w=window.open(e||"",d,v);we(w,n,"popup-blocked");try{w.focus()}catch{}return new v_(w)}function kC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const NC="__/auth/handler",bC="emulator/auth/handler",OC=encodeURIComponent("fac");async function E_(n,e,t,i,o,a){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Hs,eventId:o};if(e instanceof UE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",yR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Wl){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),y=p?`#${OC}=${encodeURIComponent(p)}`:"";return`${DC(n)}?${$l(d).slice(1)}${y}`}function DC({config:n}){return n.emulator?Tp(n,bC):`https://${n.authDomain}/${NC}`}const vf="webStorageSupport";class xC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GE,this._completeRedirectFn=iC,this._overrideRedirectResult=tC}async _openPopup(e,t,i,o){Zr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await E_(e,t,i,Bf(),o);return PC(e,a,Cp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await E_(e,t,i,Bf(),o);return M1(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Zr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await TC(e),i=new oC(e);return t.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vf,{type:vf},o=>{const a=o?.[0]?.[vf];a!==void 0&&t(!!a),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DE()||CE()||Sp()}}const LC=xC;var w_="@firebase/auth",T_="1.11.1";class VC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function MC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UC(n){Vs(new qi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xE(n)},y=new r1(i,o,a,p);return f1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vs(new qi("auth-internal",e=>{const t=Ws(e.getProvider("auth").getImmediate());return(i=>new VC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(w_,T_,MC(n)),mr(w_,T_,"esm2020")}const FC=300,BC=hE("authIdTokenMaxAge")||FC;let I_=null;const jC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>BC)return;const o=t?.token;I_!==o&&(I_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zC(n=Ep()){const e=ph(n,"auth");if(e.isInitialized())return e.getImmediate();const t=d1(n,{popupRedirectResolver:LC,persistence:[W1,x1,GE]}),i=hE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=jC(a.toString());k1(t,u,()=>u(t.currentUser)),P1(t,d=>u(d))}}const o=lE("auth");return o&&p1(t,`http://${o}`),t}function $C(){return document.getElementsByTagName("head")?.[0]??document}i1({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=gr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",$C().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UC("Browser");var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zi,ew;(function(){var n;function e(N,R){function P(){}P.prototype=R.prototype,N.F=R.prototype,N.prototype=new P,N.prototype.constructor=N,N.D=function(x,D,C){for(var I=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)I[ye-2]=arguments[ye];return R.prototype[D].apply(x,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,P){P||(P=0);const x=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)x[D]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(D=0;D<16;++D)x[D]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=N.g[0],P=N.g[1],D=N.g[2];let C=N.g[3],I;I=R+(C^P&(D^C))+x[0]+3614090360&4294967295,R=P+(I<<7&4294967295|I>>>25),I=C+(D^R&(P^D))+x[1]+3905402710&4294967295,C=R+(I<<12&4294967295|I>>>20),I=D+(P^C&(R^P))+x[2]+606105819&4294967295,D=C+(I<<17&4294967295|I>>>15),I=P+(R^D&(C^R))+x[3]+3250441966&4294967295,P=D+(I<<22&4294967295|I>>>10),I=R+(C^P&(D^C))+x[4]+4118548399&4294967295,R=P+(I<<7&4294967295|I>>>25),I=C+(D^R&(P^D))+x[5]+1200080426&4294967295,C=R+(I<<12&4294967295|I>>>20),I=D+(P^C&(R^P))+x[6]+2821735955&4294967295,D=C+(I<<17&4294967295|I>>>15),I=P+(R^D&(C^R))+x[7]+4249261313&4294967295,P=D+(I<<22&4294967295|I>>>10),I=R+(C^P&(D^C))+x[8]+1770035416&4294967295,R=P+(I<<7&4294967295|I>>>25),I=C+(D^R&(P^D))+x[9]+2336552879&4294967295,C=R+(I<<12&4294967295|I>>>20),I=D+(P^C&(R^P))+x[10]+4294925233&4294967295,D=C+(I<<17&4294967295|I>>>15),I=P+(R^D&(C^R))+x[11]+2304563134&4294967295,P=D+(I<<22&4294967295|I>>>10),I=R+(C^P&(D^C))+x[12]+1804603682&4294967295,R=P+(I<<7&4294967295|I>>>25),I=C+(D^R&(P^D))+x[13]+4254626195&4294967295,C=R+(I<<12&4294967295|I>>>20),I=D+(P^C&(R^P))+x[14]+2792965006&4294967295,D=C+(I<<17&4294967295|I>>>15),I=P+(R^D&(C^R))+x[15]+1236535329&4294967295,P=D+(I<<22&4294967295|I>>>10),I=R+(D^C&(P^D))+x[1]+4129170786&4294967295,R=P+(I<<5&4294967295|I>>>27),I=C+(P^D&(R^P))+x[6]+3225465664&4294967295,C=R+(I<<9&4294967295|I>>>23),I=D+(R^P&(C^R))+x[11]+643717713&4294967295,D=C+(I<<14&4294967295|I>>>18),I=P+(C^R&(D^C))+x[0]+3921069994&4294967295,P=D+(I<<20&4294967295|I>>>12),I=R+(D^C&(P^D))+x[5]+3593408605&4294967295,R=P+(I<<5&4294967295|I>>>27),I=C+(P^D&(R^P))+x[10]+38016083&4294967295,C=R+(I<<9&4294967295|I>>>23),I=D+(R^P&(C^R))+x[15]+3634488961&4294967295,D=C+(I<<14&4294967295|I>>>18),I=P+(C^R&(D^C))+x[4]+3889429448&4294967295,P=D+(I<<20&4294967295|I>>>12),I=R+(D^C&(P^D))+x[9]+568446438&4294967295,R=P+(I<<5&4294967295|I>>>27),I=C+(P^D&(R^P))+x[14]+3275163606&4294967295,C=R+(I<<9&4294967295|I>>>23),I=D+(R^P&(C^R))+x[3]+4107603335&4294967295,D=C+(I<<14&4294967295|I>>>18),I=P+(C^R&(D^C))+x[8]+1163531501&4294967295,P=D+(I<<20&4294967295|I>>>12),I=R+(D^C&(P^D))+x[13]+2850285829&4294967295,R=P+(I<<5&4294967295|I>>>27),I=C+(P^D&(R^P))+x[2]+4243563512&4294967295,C=R+(I<<9&4294967295|I>>>23),I=D+(R^P&(C^R))+x[7]+1735328473&4294967295,D=C+(I<<14&4294967295|I>>>18),I=P+(C^R&(D^C))+x[12]+2368359562&4294967295,P=D+(I<<20&4294967295|I>>>12),I=R+(P^D^C)+x[5]+4294588738&4294967295,R=P+(I<<4&4294967295|I>>>28),I=C+(R^P^D)+x[8]+2272392833&4294967295,C=R+(I<<11&4294967295|I>>>21),I=D+(C^R^P)+x[11]+1839030562&4294967295,D=C+(I<<16&4294967295|I>>>16),I=P+(D^C^R)+x[14]+4259657740&4294967295,P=D+(I<<23&4294967295|I>>>9),I=R+(P^D^C)+x[1]+2763975236&4294967295,R=P+(I<<4&4294967295|I>>>28),I=C+(R^P^D)+x[4]+1272893353&4294967295,C=R+(I<<11&4294967295|I>>>21),I=D+(C^R^P)+x[7]+4139469664&4294967295,D=C+(I<<16&4294967295|I>>>16),I=P+(D^C^R)+x[10]+3200236656&4294967295,P=D+(I<<23&4294967295|I>>>9),I=R+(P^D^C)+x[13]+681279174&4294967295,R=P+(I<<4&4294967295|I>>>28),I=C+(R^P^D)+x[0]+3936430074&4294967295,C=R+(I<<11&4294967295|I>>>21),I=D+(C^R^P)+x[3]+3572445317&4294967295,D=C+(I<<16&4294967295|I>>>16),I=P+(D^C^R)+x[6]+76029189&4294967295,P=D+(I<<23&4294967295|I>>>9),I=R+(P^D^C)+x[9]+3654602809&4294967295,R=P+(I<<4&4294967295|I>>>28),I=C+(R^P^D)+x[12]+3873151461&4294967295,C=R+(I<<11&4294967295|I>>>21),I=D+(C^R^P)+x[15]+530742520&4294967295,D=C+(I<<16&4294967295|I>>>16),I=P+(D^C^R)+x[2]+3299628645&4294967295,P=D+(I<<23&4294967295|I>>>9),I=R+(D^(P|~C))+x[0]+4096336452&4294967295,R=P+(I<<6&4294967295|I>>>26),I=C+(P^(R|~D))+x[7]+1126891415&4294967295,C=R+(I<<10&4294967295|I>>>22),I=D+(R^(C|~P))+x[14]+2878612391&4294967295,D=C+(I<<15&4294967295|I>>>17),I=P+(C^(D|~R))+x[5]+4237533241&4294967295,P=D+(I<<21&4294967295|I>>>11),I=R+(D^(P|~C))+x[12]+1700485571&4294967295,R=P+(I<<6&4294967295|I>>>26),I=C+(P^(R|~D))+x[3]+2399980690&4294967295,C=R+(I<<10&4294967295|I>>>22),I=D+(R^(C|~P))+x[10]+4293915773&4294967295,D=C+(I<<15&4294967295|I>>>17),I=P+(C^(D|~R))+x[1]+2240044497&4294967295,P=D+(I<<21&4294967295|I>>>11),I=R+(D^(P|~C))+x[8]+1873313359&4294967295,R=P+(I<<6&4294967295|I>>>26),I=C+(P^(R|~D))+x[15]+4264355552&4294967295,C=R+(I<<10&4294967295|I>>>22),I=D+(R^(C|~P))+x[6]+2734768916&4294967295,D=C+(I<<15&4294967295|I>>>17),I=P+(C^(D|~R))+x[13]+1309151649&4294967295,P=D+(I<<21&4294967295|I>>>11),I=R+(D^(P|~C))+x[4]+4149444226&4294967295,R=P+(I<<6&4294967295|I>>>26),I=C+(P^(R|~D))+x[11]+3174756917&4294967295,C=R+(I<<10&4294967295|I>>>22),I=D+(R^(C|~P))+x[2]+718787259&4294967295,D=C+(I<<15&4294967295|I>>>17),I=P+(C^(D|~R))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+C&4294967295}i.prototype.v=function(N,R){R===void 0&&(R=N.length);const P=R-this.blockSize,x=this.C;let D=this.h,C=0;for(;C<R;){if(D==0)for(;C<=P;)o(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<R;)if(x[D++]=N.charCodeAt(C++),D==this.blockSize){o(this,x),D=0;break}}else for(;C<R;)if(x[D++]=N[C++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=R},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var P=N.length-8;P<N.length;++P)N[P]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,P=0;P<4;++P)for(let x=0;x<32;x+=8)N[R++]=this.g[P]>>>x&255;return N};function a(N,R){var P=d;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=R(N)}function u(N,R){this.h=R;const P=[];let x=!0;for(let D=N.length-1;D>=0;D--){const C=N[D]|0;x&&C==R||(P[D]=C,x=!1)}this.g=P}var d={};function p(N){return-128<=N&&N<128?a(N,function(R){return new u([R|0],R<0?-1:0)}):new u([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return k(y(-N));const R=[];let P=1;for(let x=0;N>=P;x++)R[x]=N/P|0,P*=4294967296;return new u(R,0)}function v(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return k(v(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(R,8));let x=w;for(let C=0;C<N.length;C+=8){var D=Math.min(8,N.length-C);const I=parseInt(N.substring(C,C+D),R);D<8?(D=y(Math.pow(R,D)),x=x.j(D).add(y(I))):(x=x.j(P),x=x.add(y(I)))}return x}var w=p(0),S=p(1),M=p(16777216);n=u.prototype,n.m=function(){if(U(this))return-k(this).m();let N=0,R=1;for(let P=0;P<this.g.length;P++){const x=this.i(P);N+=(x>=0?x:4294967296+x)*R,R*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(b(this))return"0";if(U(this))return"-"+k(this).toString(N);const R=y(Math.pow(N,6));var P=this;let x="";for(;;){const D=se(P,R).g;P=J(P,D.j(R));let C=((P.g.length>0?P.g[0]:P.h)>>>0).toString(N);if(P=D,b(P))return C+x;for(;C.length<6;)C="0"+C;x=C+x}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function b(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function U(N){return N.h==-1}n.l=function(N){return N=J(this,N),U(N)?-1:b(N)?0:1};function k(N){const R=N.g.length,P=[];for(let x=0;x<R;x++)P[x]=~N.g[x];return new u(P,~N.h).add(S)}n.abs=function(){return U(this)?k(this):this},n.add=function(N){const R=Math.max(this.g.length,N.g.length),P=[];let x=0;for(let D=0;D<=R;D++){let C=x+(this.i(D)&65535)+(N.i(D)&65535),I=(C>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);x=I>>>16,C&=65535,I&=65535,P[D]=I<<16|C}return new u(P,P[P.length-1]&-2147483648?-1:0)};function J(N,R){return N.add(k(R))}n.j=function(N){if(b(this)||b(N))return w;if(U(this))return U(N)?k(this).j(k(N)):k(k(this).j(N));if(U(N))return k(this.j(k(N)));if(this.l(M)<0&&N.l(M)<0)return y(this.m()*N.m());const R=this.g.length+N.g.length,P=[];for(var x=0;x<2*R;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(let D=0;D<N.g.length;D++){const C=this.i(x)>>>16,I=this.i(x)&65535,ye=N.i(D)>>>16,De=N.i(D)&65535;P[2*x+2*D]+=I*De,ne(P,2*x+2*D),P[2*x+2*D+1]+=C*De,ne(P,2*x+2*D+1),P[2*x+2*D+1]+=I*ye,ne(P,2*x+2*D+1),P[2*x+2*D+2]+=C*ye,ne(P,2*x+2*D+2)}for(N=0;N<R;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=R;N<2*R;N++)P[N]=0;return new u(P,0)};function ne(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function X(N,R){this.g=N,this.h=R}function se(N,R){if(b(R))throw Error("division by zero");if(b(N))return new X(w,w);if(U(N))return R=se(k(N),R),new X(k(R.g),k(R.h));if(U(R))return R=se(N,k(R)),new X(k(R.g),R.h);if(N.g.length>30){if(U(N)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var P=S,x=R;x.l(N)<=0;)P=de(P),x=de(x);var D=ge(P,1),C=ge(x,1);for(x=ge(x,2),P=ge(P,2);!b(x);){var I=C.add(x);I.l(N)<=0&&(D=D.add(P),C=I),x=ge(x,1),P=ge(P,1)}return R=J(N,D.j(R)),new X(D,R)}for(D=w;N.l(R)>=0;){for(P=Math.max(1,Math.floor(N.m()/R.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),C=y(P),I=C.j(R);U(I)||I.l(N)>0;)P-=x,C=y(P),I=C.j(R);b(C)&&(C=S),D=D.add(C),N=J(N,I)}return new X(D,N)}n.B=function(N){return se(this,N).h},n.and=function(N){const R=Math.max(this.g.length,N.g.length),P=[];for(let x=0;x<R;x++)P[x]=this.i(x)&N.i(x);return new u(P,this.h&N.h)},n.or=function(N){const R=Math.max(this.g.length,N.g.length),P=[];for(let x=0;x<R;x++)P[x]=this.i(x)|N.i(x);return new u(P,this.h|N.h)},n.xor=function(N){const R=Math.max(this.g.length,N.g.length),P=[];for(let x=0;x<R;x++)P[x]=this.i(x)^N.i(x);return new u(P,this.h^N.h)};function de(N){const R=N.g.length+1,P=[];for(let x=0;x<R;x++)P[x]=N.i(x)<<1|N.i(x-1)>>>31;return new u(P,N.h)}function ge(N,R){const P=R>>5;R%=32;const x=N.g.length-P,D=[];for(let C=0;C<x;C++)D[C]=R>0?N.i(C+P)>>>R|N.i(C+P+1)<<32-R:N.i(C+P);return new u(D,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ew=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,zi=u}).apply(typeof S_<"u"?S_:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var tw,gl,nw,Lc,qf,rw,iw,sw;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var _=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var j=c[T];if(!(j in _))break e;_=_[j]}c=c[c.length-1],T=_[c],g=g(T),g!=T&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(g){var _=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&_.push([T,g[T]]);return _}});var a=a||{},u=this||self;function d(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function p(c,g,_){return c.call.apply(c.bind,arguments)}function y(c,g,_){return y=p,y.apply(null,arguments)}function v(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function w(c,g){function _(){}_.prototype=g.prototype,c.Z=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(T,j,q){for(var ie=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ie[Pe-2]=arguments[Pe];return g.prototype[j].apply(T,ie)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function M(c){const g=c.length;if(g>0){const _=Array(g);for(let T=0;T<g;T++)_[T]=c[T];return _}return[]}function b(c,g){for(let T=1;T<arguments.length;T++){const j=arguments[T];var _=typeof j;if(_=_!="object"?_:j?Array.isArray(j)?"array":_:"null",_=="array"||_=="object"&&typeof j.length=="number"){_=c.length||0;const q=j.length||0;c.length=_+q;for(let ie=0;ie<q;ie++)c[_+ie]=j[ie]}else c.push(j)}}class U{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(c){u.setTimeout(()=>{throw c},0)}function J(){var c=N;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,_){const T=X.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var X=new U(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ge=!1,N=new ne,R=()=>{const c=Promise.resolve(void 0);de=()=>{c.then(P)}};function P(){for(var c;c=J();){try{c.h.call(c.g)}catch(_){k(_)}var g=X;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}ge=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};u.addEventListener("test",_,g),u.removeEventListener("test",_,g)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function ye(c,g){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}w(ye,D),ye.prototype.init=function(c,g){const _=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(_=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function be(c,g,_,T,j){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=j,this.key=++Ie,this.da=this.fa=!1}function te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pe(c,g,_){for(const T in c)g.call(_,c[T],T,c)}function oe(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function V(c){const g={};for(const _ in c)g[_]=c[_];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(c,g){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)c[_]=T[_];for(let q=0;q<G.length;q++)_=G[q],Object.prototype.hasOwnProperty.call(T,_)&&(c[_]=T[_])}}function Se(c){this.src=c,this.g={},this.h=0}Se.prototype.add=function(c,g,_,T,j){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const ie=Le(c,g,T,j);return ie>-1?(g=c[ie],_||(g.fa=!1)):(g=new be(g,this.src,q,!!T,j),g.fa=_,c.push(g)),g};function Oe(c,g){const _=g.type;if(_ in c.g){var T=c.g[_],j=Array.prototype.indexOf.call(T,g,void 0),q;(q=j>=0)&&Array.prototype.splice.call(T,j,1),q&&(te(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Le(c,g,_,T){for(let j=0;j<c.length;++j){const q=c[j];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==T)return j}return-1}var He="closure_lm_"+(Math.random()*1e6|0),je={};function Qe(c,g,_,T,j){if(Array.isArray(g)){for(let q=0;q<g.length;q++)Qe(c,g[q],_,T,j);return null}return _=_a(_),c&&c[De]?c.J(g,_,d(T)?!!T.capture:!1,j):Qt(c,g,_,!1,T,j)}function Qt(c,g,_,T,j,q){if(!g)throw Error("Invalid event type");const ie=d(j)?!!j.capture:!!j;let Pe=eo(c);if(Pe||(c[He]=Pe=new Se(c)),_=Pe.add(g,_,T,ie,q),_.proxy)return _;if(T=Js(),_.proxy=T,T.src=c,T.listener=_,c.addEventListener)C||(j=ie),j===void 0&&(j=!1),c.addEventListener(g.toString(),T,j);else if(c.attachEvent)c.attachEvent(Zs(g.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Js(){function c(_){return g.call(c.src,c.listener,_)}const g=ou;return c}function ya(c,g,_,T,j){if(Array.isArray(g))for(var q=0;q<g.length;q++)ya(c,g[q],_,T,j);else T=d(T)?!!T.capture:!!T,_=_a(_),c&&c[De]?(c=c.i,q=String(g).toString(),q in c.g&&(g=c.g[q],_=Le(g,_,T,j),_>-1&&(te(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete c.g[q],c.h--)))):c&&(c=eo(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Le(g,_,T,j)),(_=c>-1?g[c]:null)&&ni(_))}function ni(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[De])Oe(g.i,c);else{var _=c.type,T=c.proxy;g.removeEventListener?g.removeEventListener(_,T,c.capture):g.detachEvent?g.detachEvent(Zs(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=eo(g))?(Oe(_,c),_.h==0&&(_.src=null,g[He]=null)):te(c)}}}function Zs(c){return c in je?je[c]:je[c]="on"+c}function ou(c,g){if(c.da)c=!0;else{g=new ye(g,this);const _=c.listener,T=c.ha||c.src;c.fa&&ni(c),c=_.call(T,g)}return c}function eo(c){return c=c[He],c instanceof Se?c:null}var ts="__closure_events_fn_"+(Math.random()*1e9>>>0);function _a(c){return typeof c=="function"?c:(c[ts]||(c[ts]=function(g){return c.handleEvent(g)}),c[ts])}function gt(){x.call(this),this.i=new Se(this),this.M=this,this.G=null}w(gt,x),gt.prototype[De]=!0,gt.prototype.removeEventListener=function(c,g,_,T){ya(this,c,g,_,T)};function dt(c,g){var _,T=c.G;if(T)for(_=[];T;T=T.G)_.push(T);if(c=c.M,T=g.type||g,typeof g=="string")g=new D(g,c);else if(g instanceof D)g.target=g.target||c;else{var j=g;g=new D(T,c),Ae(g,j)}j=!0;let q,ie;if(_)for(ie=_.length-1;ie>=0;ie--)q=g.g=_[ie],j=bn(q,T,!0,g)&&j;if(q=g.g=c,j=bn(q,T,!0,g)&&j,j=bn(q,T,!1,g)&&j,_)for(ie=0;ie<_.length;ie++)q=g.g=_[ie],j=bn(q,T,!1,g)&&j}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const _=c.g[g];for(let T=0;T<_.length;T++)te(_[T]);delete c.g[g],c.h--}}this.G=null},gt.prototype.J=function(c,g,_,T){return this.i.add(String(c),g,!1,_,T)},gt.prototype.K=function(c,g,_,T){return this.i.add(String(c),g,!0,_,T)};function bn(c,g,_,T){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let j=!0;for(let q=0;q<g.length;++q){const ie=g[q];if(ie&&!ie.da&&ie.capture==_){const Pe=ie.listener,ft=ie.ha||ie.src;ie.fa&&Oe(c.i,ie),j=Pe.call(ft,T)!==!1&&j}}return j&&!T.defaultPrevented}function va(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:u.setTimeout(c,g||0)}function Ea(c){c.g=va(()=>{c.g=null,c.i&&(c.i=!1,Ea(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class au extends x{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ea(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(c){x.call(this),this.h=c,this.g={}}w(ri,x);var wa=[];function to(c){pe(c.g,function(g,_){this.g.hasOwnProperty(_)&&ni(g)},c),c.g={}}ri.prototype.N=function(){ri.Z.N.call(this),to(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=u.JSON.stringify,lu=u.JSON.parse,ns=class{stringify(c){return u.JSON.stringify(c,void 0)}parse(c){return u.JSON.parse(c,void 0)}};function si(){}function uu(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function no(){D.call(this,"d")}w(no,D);function Ta(){D.call(this,"c")}w(Ta,D);var On={},ro=null;function ai(){return ro=ro||new gt}On.Ia="serverreachability";function io(c){D.call(this,On.Ia,c)}w(io,D);function Ar(c){const g=ai();dt(g,new io(g))}On.STAT_EVENT="statevent";function Cr(c,g){D.call(this,On.STAT_EVENT,c),this.stat=g}w(Cr,D);function ut(c){const g=ai();dt(g,new Cr(g,c))}On.Ja="timingevent";function Ia(c,g){D.call(this,On.Ja,c),this.size=g}w(Ia,D);function li(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){c()},g)}function ui(){this.g=!0}ui.prototype.ua=function(){this.g=!1};function cu(c,g,_,T,j,q){c.info(function(){if(c.g)if(q){var ie="",Pe=q.split("&");for(let Ke=0;Ke<Pe.length;Ke++){var ft=Pe[Ke].split("=");if(ft.length>1){const yt=ft[0];ft=ft[1];const mn=yt.split("_");ie=mn.length>=2&&mn[1]=="type"?ie+(yt+"="+ft+"&"):ie+(yt+"=redacted&")}}}else ie=null;else ie=q;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+g+`
`+_+`
`+ie})}function hu(c,g,_,T,j,q,ie){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+g+`
`+_+`
`+q+" "+ie})}function Wn(c,g,_,T){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+rs(c,_)+(T?" "+T:"")})}function du(c,g){c.info(function(){return"TIMEOUT: "+g})}ui.prototype.info=function(){};function rs(c,g){if(!c.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var _=q[c];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var j=T[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ie=1;ie<T.length;ie++)T[ie]=""}}}}return ii(q)}catch{return g}}var ci={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fu;function Pr(){}w(Pr,si),Pr.prototype.g=function(){return new XMLHttpRequest},fu=new Pr;function Gn(c){return encodeURIComponent(String(c))}function so(c){var g=1;c=c.split(":");const _=[];for(;g>0&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function wn(c,g,_,T){this.j=c,this.i=g,this.l=_,this.S=T||1,this.V=new ri(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pu}function pu(){this.i=null,this.g="",this.h=!1}var mu={},Sa={};function Dn(c,g,_){c.M=1,c.A=Nr(Tn(g)),c.u=_,c.R=!0,Ra(c,null)}function Ra(c,g){c.F=Date.now(),is(c),c.B=Tn(c.A);var _=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),La(_.i,"t",T),c.C=0,_=c.j.L,c.h=new pu,c.g=Ru(c.j,_?g:null,!c.u),c.P>0&&(c.O=new au(y(c.Y,c,c.g),c.P)),g=c.V,_=c.g,T=c.ba;var j="readystatechange";Array.isArray(j)||(j&&(wa[0]=j.toString()),j=wa);for(let q=0;q<j.length;q++){const ie=Qe(_,j[q],T||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),Ar(),cu(c.i,c.v,c.B,c.l,c.S,c.u)}wn.prototype.ba=function(c){c=c.target;const g=this.O;g&&er(c)==3?g.j():this.Y(c)},wn.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=er(this.g),ft=this.g.ya(),Ke=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Iu(this.g)))){this.K||Pe!=4||ft==7||(ft==8||Ke<=0?Ar(3):Ar(2)),oo(this);var g=this.g.ca();this.X=g;var _=gu(this);if(this.o=g==200,hu(this.i,this.v,this.B,this.l,this.S,Pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,j=this.g;if((T=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var q=T;break t}}q=null}if(c=q)Wn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,c);else{this.o=!1,this.m=3,ut(12),kr(this),ss(this);break e}}if(this.R){c=!0;let yt;for(;!this.K&&this.C<_.length;)if(yt=_u(this,_),yt==Sa){Pe==4&&(this.m=4,ut(14),c=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==mu){this.m=4,ut(15),Wn(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Wn(this.i,this.l,yt,null),Ze(this,yt);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||_.length!=0||this.h.h||(this.m=1,ut(16),c=!1),this.o=this.o&&c,!c)Wn(this.i,this.l,_,"[Invalid Chunked Response]"),kr(this),ss(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ps(ie),ie.P=!0,ut(11))}}else Wn(this.i,this.l,_,null),Ze(this,_);Pe==4&&kr(this),this.o&&!this.K&&(Pe==4?yo(this.j,this):(this.o=!1,is(this)))}else Ma(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),kr(this),ss(this)}}}catch{}finally{}};function gu(c){if(!yu(c))return c.g.la();const g=Iu(c.g);if(g==="")return"";let _="";const T=g.length,j=er(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return kr(c),ss(c),"";c.h.i=new u.TextDecoder}for(let q=0;q<T;q++)c.h.h=!0,_+=c.h.i.decode(g[q],{stream:!(j&&q==T-1)});return g.length=0,c.h.g+=_,c.C=0,c.h.g}function yu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function _u(c,g){var _=c.C,T=g.indexOf(`
`,_);return T==-1?Sa:(_=Number(g.substring(_,T)),isNaN(_)?mu:(T+=1,T+_>g.length?Sa:(g=g.slice(T,T+_),c.C=T+_,g)))}wn.prototype.cancel=function(){this.K=!0,kr(this)};function is(c){c.T=Date.now()+c.H,Aa(c,c.H)}function Aa(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=li(y(c.aa,c),g)}function oo(c){c.D&&(u.clearTimeout(c.D),c.D=null)}wn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(du(this.i,this.B),this.M!=2&&(Ar(),ut(17)),kr(this),this.m=2,ss(this)):Aa(this,this.T-c)};function ss(c){c.j.I==0||c.K||yo(c.j,c)}function kr(c){oo(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,to(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Ze(c,g){try{var _=c.j;if(_.I!=0&&(_.g==c||Pa(_.h,c))){if(!c.L&&Pa(_.h,c)&&_.I==3){try{var T=_.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)go(_),fn(_);else break e;rr(_),ut(18)}}else _.xa=j[1],0<_.xa-_.K&&j[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=li(y(_.Va,_),6e3));os(_.h)<=1&&_.ta&&(_.ta=void 0)}else pn(_,11)}else if((c.L||_.g==c)&&go(_),!I(g))for(j=_.Ba.g.parse(g),g=0;g<j.length;g++){let Ke=j[g];const yt=Ke[0];if(!(yt<=_.K))if(_.K=yt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const mn=Ke[3];mn!=null&&(_.ka=mn,_.j.info("VER="+_.ka));const Lr=Ke[4];Lr!=null&&(_.za=Lr,_.j.info("SVER="+_.za));const ir=Ke[5];ir!=null&&typeof ir=="number"&&ir>0&&(T=1.5*ir,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const sr=c.g;if(sr){const Eo=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var q=T.h;q.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(lo(q,q.h),q.h=null))}if(T.G){const Ba=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(T.wa=Ba,qe(T.J,T.G,Ba))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ie=c;if(T.na=Fa(T,T.L?T.ba:null,T.W),ie.L){as(T.h,ie);var Pe=ie,ft=T.O;ft&&(Pe.H=ft),Pe.D&&(oo(Pe),is(Pe)),T.g=ie}else Ft(T);_.i.length>0&&xr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||pn(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?pn(_,7):po(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}Ar(4)}catch{}}var Uh=class{constructor(c,g){this.g=c,this.map=g}};function ao(c){this.l=c||10,u.PerformanceNavigationTiming?(c=u.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ca(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function os(c){return c.h?1:c.g?c.g.size:0}function Pa(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function lo(c,g){c.g?c.g.add(g):c.h=g}function as(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}ao.prototype.cancel=function(){if(this.i=cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cn(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.G);return g}return M(c.i)}var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hn(c,g){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const T=c[_].indexOf("=");let j,q=null;T>=0?(j=c[_].substring(0,T),q=c[_].substring(T+1)):j=c[_],g(j,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Kn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof Kn?(this.l=c.l,ls(this,c.j),this.o=c.o,this.g=c.g,Qn(this,c.u),this.h=c.h,di(this,Va(c.i)),this.m=c.m):c&&(g=String(c).match(vu))?(this.l=!1,ls(this,g[1]||"",!0),this.o=us(g[2]||""),this.g=us(g[3]||"",!0),Qn(this,g[4]),this.h=us(g[5]||"",!0),di(this,g[6]||"",!0),this.m=us(g[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}Kn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(cs(g,Na,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(cs(g,Na,!0),"@"),c.push(Gn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(cs(_,_.charAt(0)=="/"?hs:ba,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",cs(_,Oa)),c.join("")},Kn.prototype.resolve=function(c){const g=Tn(this);let _=!!c.j;_?ls(g,c.j):_=!!c.o,_?g.o=c.o:_=!!c.g,_?g.g=c.g:_=c.u!=null;var T=c.h;if(_)Qn(g,c.u);else if(_=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var j=g.h.lastIndexOf("/");j!=-1&&(T=g.h.slice(0,j+1)+T)}if(j=T,j==".."||j==".")T="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){T=j.lastIndexOf("/",0)==0,j=j.split("/");const q=[];for(let ie=0;ie<j.length;){const Pe=j[ie++];Pe=="."?T&&ie==j.length&&q.push(""):Pe==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),T&&ie==j.length&&q.push("")):(q.push(Pe),T=!0)}T=q.join("/")}else T=j}return _?g.h=T:_=c.i.toString()!=="",_?di(g,Va(c.i)):_=!!c.m,_&&(g.m=c.m),g};function Tn(c){return new Kn(c)}function ls(c,g,_){c.j=_?us(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Qn(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function di(c,g,_){g instanceof Fe?(c.i=g,co(c.i,c.l)):(_||(g=cs(g,Fh)),c.i=new Fe(g,c.l))}function qe(c,g,_){c.i.set(g,_)}function Nr(c){return qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function us(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function cs(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,ka),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ka(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Na=/[#\/\?@]/g,ba=/[#\?:]/g,hs=/[#\?]/g,Fh=/[#\?@]/g,Oa=/#/g;function Fe(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Xn(c){c.g||(c.g=new Map,c.h=0,c.i&&hn(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Fe.prototype,n.add=function(c,g){Xn(this),this.i=null,c=Yn(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Da(c,g){Xn(c),g=Yn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function uo(c,g){return Xn(c),g=Yn(c,g),c.g.has(g)}n.forEach=function(c,g){Xn(this),this.g.forEach(function(_,T){_.forEach(function(j){c.call(g,j,T,this)},this)},this)};function xa(c,g){Xn(c);let _=[];if(typeof g=="string")uo(c,g)&&(_=_.concat(c.g.get(Yn(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)_=_.concat(c[g]);return _}n.set=function(c,g){return Xn(this),this.i=null,c=Yn(this,c),uo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=xa(this,c),c.length>0?String(c[0]):g):g};function La(c,g,_){Da(c,g),_.length>0&&(c.i=null,c.g.set(Yn(c,g),M(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var _=g[T];const j=Gn(_);_=xa(this,_);for(let q=0;q<_.length;q++){let ie=j;_[q]!==""&&(ie+="="+Gn(_[q])),c.push(ie)}}return this.i=c.join("&")};function Va(c){const g=new Fe;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function Yn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function co(c,g){g&&!c.j&&(Xn(c),c.i=null,c.g.forEach(function(_,T){const j=T.toLowerCase();T!=j&&(Da(this,T),La(this,j,_))},c)),c.j=g}function Jn(c,g){const _=new ui;if(u.Image){const T=new Image;T.onload=v(Ot,_,"TestLoadImage: loaded",!0,g,T),T.onerror=v(Ot,_,"TestLoadImage: error",!1,g,T),T.onabort=v(Ot,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=v(Ot,_,"TestLoadImage: timeout",!1,g,T),u.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else g(!1)}function Zn(c,g){const _=new ui,T=new AbortController,j=setTimeout(()=>{T.abort(),Ot(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:T.signal}).then(q=>{clearTimeout(j),q.ok?Ot(_,"TestPingServer: ok",!0,g):Ot(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),Ot(_,"TestPingServer: error",!1,g)})}function Ot(c,g,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function ds(){this.g=new ns}function br(c){this.i=c.Sb||null,this.h=c.ab||!1}w(br,si),br.prototype.g=function(){return new dn(this.i,this.h)};function dn(c,g){gt.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(dn,gt),n=dn.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,xn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||u).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eu(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eu(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?fi(this):xn(this),this.readyState==3&&Eu(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,fi(this))},n.Na=function(c){this.g&&(this.response=c,fi(this))},n.ga=function(){this.g&&fi(this)};function fi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,xn(c)}n.setRequestHeader=function(c,g){this.A.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(dn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wu(c){let g="";return pe(c,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function ho(c,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=wu(_),typeof c=="string"?_!=null&&Gn(_):qe(c,g,_))}function Xe(c){gt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Xe,gt);var Tu=/^https?$/i,Bh=["POST","PUT"];n=Xe.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fu.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(q){pi(this,q);return}if(c=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),j=u.FormData&&c instanceof u.FormData,!(Array.prototype.indexOf.call(Bh,g,void 0)>=0)||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of _)this.g.setRequestHeader(q,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){pi(this,q)}};function pi(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,mi(c),Dr(c)}function mi(c){c.A||(c.A=!0,dt(c,"complete"),dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,dt(this,"complete"),dt(this,"abort"),Dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},n.Xa=function(){Or(this)};function Or(c){if(c.h&&typeof a<"u"){if(c.v&&er(c)==4)setTimeout(c.Ca.bind(c),0);else if(dt(c,"readystatechange"),er(c)==4){c.h=!1;try{const q=c.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=q===0){let ie=String(c.D).match(vu)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),T=!Tu.test(ie?ie.toLowerCase():"")}_=T}if(_)dt(c,"complete"),dt(c,"success");else{c.o=6;try{var j=er(c)>2?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.ca()+"]",mi(c)}}finally{Dr(c)}}}}function Dr(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,g||dt(c,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function er(c){return c.g?c.g.readyState:0}n.ca=function(){try{return er(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),lu(g)}};function Iu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ma(c){const g={};c=(c.g&&er(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(I(c[T]))continue;var _=so(c[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[j]||[];g[j]=q,q.push(_)}oe(g,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function fo(c){this.za=0,this.i=[],this.j=new ui,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,c),this.Za=tr("retryDelaySeedMs",1e4,c),this.Ta=tr("forwardChannelMaxRetries",2,c),this.va=tr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ao(c&&c.concurrentRequestLimit),this.Ba=new ds,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=fo.prototype,n.ka=8,n.I=1,n.connect=function(c,g,_,T){ut(0),this.W=c,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Fa(this,null,this.W),xr(this)};function po(c){if(mo(c),c.I==3){var g=c.V++,_=Tn(c.J);if(qe(_,"SID",c.M),qe(_,"RID",g),qe(_,"TYPE","terminate"),nr(c,_),g=new wn(c,c.j,g),g.M=2,g.A=Nr(Tn(_)),_=!1,u.navigator&&u.navigator.sendBeacon)try{_=u.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&u.Image&&(new Image().src=g.A,_=!0),_||(g.g=Ru(g.j,null),g.g.ea(g.A)),g.F=Date.now(),is(g)}ms(c)}function fn(c){c.g&&(ps(c),c.g.cancel(),c.g=null)}function mo(c){fn(c),c.v&&(u.clearTimeout(c.v),c.v=null),go(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&u.clearTimeout(c.m),c.m=null)}function xr(c){if(!Ca(c.h)&&!c.m){c.m=!0;var g=c.Ea;de||R(),ge||(de(),ge=!0),N.add(g,c),c.D=0}}function Su(c,g){return os(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=li(y(c.Ea,c,g),_o(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const j=new wn(this,this.j,c);let q=this.o;if(this.U&&(q?(q=V(q),Ae(q,this.U)):q=this.U),this.u!==null||this.R||(j.J=q,q=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ua(this,j,g),_=Tn(this.J),qe(_,"RID",c),qe(_,"CVER",22),this.G&&qe(_,"X-HTTP-Session-Id",this.G),nr(this,_),q&&(this.R?g="headers="+Gn(wu(q))+"&"+g:this.u&&ho(_,this.u,q)),lo(this.h,j),this.Ra&&qe(_,"TYPE","init"),this.S?(qe(_,"$req",g),qe(_,"SID","null"),j.U=!0,Dn(j,_,null)):Dn(j,_,g),this.I=2}}else this.I==3&&(c?fs(this,c):this.i.length==0||Ca(this.h)||fs(this))};function fs(c,g){var _;g?_=g.l:_=c.V++;const T=Tn(c.J);qe(T,"SID",c.M),qe(T,"RID",_),qe(T,"AID",c.K),nr(c,T),c.u&&c.o&&ho(T,c.u,c.o),_=new wn(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Ua(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),lo(c.h,_),Dn(_,T,g)}function nr(c,g){c.H&&pe(c.H,function(_,T){qe(g,T,_)}),c.l&&pe({},function(_,T){qe(g,T,_)})}function Ua(c,g,_){_=Math.min(c.i.length,_);const T=c.l?y(c.l.Ka,c.l,c):null;e:{var j=c.i;let Pe=-1;for(;;){const ft=["count="+_];Pe==-1?_>0?(Pe=j[0].g,ft.push("ofs="+Pe)):Pe=0:ft.push("ofs="+Pe);let Ke=!0;for(let yt=0;yt<_;yt++){var q=j[yt].g;const mn=j[yt].map;if(q-=Pe,q<0)Pe=Math.max(0,j[yt].g-100),Ke=!1;else try{q="req"+q+"_"||"";try{var ie=mn instanceof Map?mn:Object.entries(mn);for(const[Lr,ir]of ie){let sr=ir;d(ir)&&(sr=ii(ir)),ft.push(q+Lr+"="+encodeURIComponent(sr))}}catch(Lr){throw ft.push(q+"type="+encodeURIComponent("_badmap")),Lr}}catch{T&&T(mn)}}if(Ke){ie=ft.join("&");break e}}ie=void 0}return c=c.i.splice(0,_),g.G=c,ie}function Ft(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;de||R(),ge||(de(),ge=!0),N.add(g,c),c.A=0}}function rr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=li(y(c.Da,c),_o(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,gi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=li(y(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),fn(this),gi(this))};function ps(c){c.B!=null&&(u.clearTimeout(c.B),c.B=null)}function gi(c){c.g=new wn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Tn(c.na);qe(g,"RID","rpc"),qe(g,"SID",c.M),qe(g,"AID",c.K),qe(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&qe(g,"TO",c.ia),qe(g,"TYPE","xmlhttp"),nr(c,g),c.u&&c.o&&ho(g,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Nr(Tn(g)),_.u=null,_.R=!0,Ra(_,c)}n.Va=function(){this.C!=null&&(this.C=null,fn(this),rr(this),ut(19))};function go(c){c.C!=null&&(u.clearTimeout(c.C),c.C=null)}function yo(c,g){var _=null;if(c.g==g){go(c),ps(c),c.g=null;var T=2}else if(Pa(c.h,g))_=g.G,as(c.h,g),T=1;else return;if(c.I!=0){if(g.o)if(T==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var j=c.D;T=ai(),dt(T,new Ia(T,_)),xr(c)}else Ft(c);else if(j=g.m,j==3||j==0&&g.X>0||!(T==1&&Su(c,g)||T==2&&rr(c)))switch(_&&_.length>0&&(g=c.h,g.i=g.i.concat(_)),j){case 1:pn(c,5);break;case 4:pn(c,10);break;case 3:pn(c,6);break;default:pn(c,2)}}}function _o(c,g){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*g}function pn(c,g){if(c.j.info("Error code "+g),g==2){var _=y(c.bb,c),T=c.Ua;const j=!T;T=new Kn(T||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ls(T,"https"),Nr(T),j?Jn(T.toString(),_):Zn(T.toString(),_)}else ut(2);c.I=0,c.l&&c.l.pa(g),ms(c),mo(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function ms(c){if(c.I=0,c.ja=[],c.l){const g=cn(c.h);(g.length!=0||c.i.length!=0)&&(b(c.ja,g),b(c.ja,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.oa()}}function Fa(c,g,_){var T=_ instanceof Kn?Tn(_):new Kn(_);if(T.g!="")g&&(T.g=g+"."+T.g),Qn(T,T.u);else{var j=u.location;T=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;const q=new Kn(null);T&&ls(q,T),g&&(q.g=g),j&&Qn(q,j),_&&(q.h=_),T=q}return _=c.G,g=c.wa,_&&g&&qe(T,_,g),qe(T,"VER",c.ka),nr(c,T),T}function Ru(c,g,_){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new Xe(new br({ab:_})):new Xe(c.ma),g.Fa(c.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}n=Au.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function vo(){}vo.prototype.g=function(c,g){return new Dt(c,g)};function Dt(c,g){gt.call(this),this.g=new fo(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!I(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new yi(this)}w(Dt,gt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){po(this.g)},Dt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=ii(c),c=_);g.i.push(new Uh(g.Ya++,c)),g.I==3&&xr(g)},Dt.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,Dt.Z.N.call(this)};function Cu(c){no.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}w(Cu,no);function Pu(){Ta.call(this),this.status=1}w(Pu,Ta);function yi(c){this.g=c}w(yi,Au),yi.prototype.ra=function(){dt(this.g,"a")},yi.prototype.qa=function(c){dt(this.g,new Cu(c))},yi.prototype.pa=function(c){dt(this.g,new Pu)},yi.prototype.oa=function(){dt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,sw=function(){return new vo},iw=function(){return ai()},rw=On,qf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,Lc=ci,hi.COMPLETE="complete",nw=hi,uu.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",gt.prototype.listen=gt.prototype.J,gl=uu,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,tw=Xe}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const R_="@firebase/firestore",A_="4.9.2";class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");let la="12.3.0";const Fs=new _p("@firebase/firestore");function $o(){return Fs.logLevel}function ue(n,...e){if(Fs.logLevel<=Ve.DEBUG){const t=e.map(kp);Fs.debug(`Firestore (${la}): ${n}`,...t)}}function ei(n,...e){if(Fs.logLevel<=Ve.ERROR){const t=e.map(kp);Fs.error(`Firestore (${la}): ${n}`,...t)}}function Zo(n,...e){if(Fs.logLevel<=Ve.WARN){const t=e.map(kp);Fs.warn(`Firestore (${la}): ${n}`,...t)}}function kp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ow(n,i,t)}function ow(n,e,t){let i=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ei(i),new Error(i)}function Ge(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||ow(e,o,i)}function ke(n,e){return n}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class HC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WC{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ge(typeof i.accessToken=="string",31837,{l:i}),new aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class GC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new GC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class C_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const i=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new C_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new C_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function XC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=XC(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Me(n,e){return n<e?-1:n>e?1:0}function Hf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return Ef(o)===Ef(a)?Me(o,a):Ef(o)?1:-1}return Me(n.length,e.length)}const YC=55296,JC=57343;function Ef(n){const e=n.charCodeAt(0);return e>=YC&&e<=JC}function ea(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}const P_="__name__";class dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=dr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Me(e.length,t.length)}static compareSegments(e,t){const i=dr.isNumericId(e),o=dr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?dr.extractNumericId(e).compare(dr.extractNumericId(t)):Hf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zi.fromString(e.substring(4,e.length-2))}}class Je extends dr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const ZC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends dr{construct(e,t,i){return new Mt(e,t,i)}static isValidIdentifier(e){return ZC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P_}static keyField(){return new Mt([P_])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ae(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ae(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Je.fromString(e))}static fromName(e){return new _e(Je.fromString(e).popFirst(5))}static empty(){return new _e(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Je(e.slice()))}}function lw(n,e,t){if(!t)throw new ae(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eP(n,e,t,i){if(e===!0&&i===!0)throw new ae(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function k_(n){if(!_e.isDocumentKey(n))throw new ae(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function N_(n){if(_e.isDocumentKey(n))throw new ae(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _h(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Hi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_h(n);throw new ae(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Kl(n,e){if(!uw(n))throw new ae(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ae(W.INVALID_ARGUMENT,t);return!0}const b_=-62135596800,O_=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*O_);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<b_)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O_}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-b_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:wt("string",nt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new nt(0,0))}static max(){return new Ce(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dl=-1;function tP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new Wi(o,_e.empty(),e)}function nP(n){return new Wi(n.readTime,n.key,Dl)}class Wi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Wi(Ce.min(),_e.empty(),Dl)}static max(){return new Wi(Ce.max(),_e.empty(),Dl)}}function rP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}const iP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ua(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==iP)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((o=>o?K.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next((v=>{u[y]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new K(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function oP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ca(n){return n.name==="IndexedDbTransactionError"}class vh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vh.ce=-1;const bp=-1;function Eh(n){return n==null}function Zc(n){return n===0&&1/n==-1/0}function aP(n){return typeof n=="number"&&Number.isInteger(n)&&!Zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const cw="";function lP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D_(e)),e=uP(n.get(t),e);return D_(e)}function uP(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case cw:t+="";break;default:t+=a}}return t}function D_(n){return n+cw+""}function x_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class at{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=a??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ct{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L_(this.data.getIterator())}getIteratorFrom(e){return new L_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class L_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new Ct(Mt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class dw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dw("Invalid base64 string: "+a):a}})(e);return new Ut(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const cP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(n){if(Ge(!!n,39018),typeof n=="string"){let e=0;const t=cP.exec(n);if(Ge(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ki(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}const fw="server_timestamp",pw="__type__",mw="__previous_value__",gw="__local_write_time__";function Op(n){return(n?.mapValue?.fields||{})[pw]?.stringValue===fw}function wh(n){const e=n.mapValue.fields[mw];return Op(e)?wh(e):e}function xl(n){const e=Gi(n.mapValue.fields[gw].timestampValue);return new nt(e.seconds,e.nanos)}class hP{constructor(e,t,i,o,a,u,d,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const eh="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||eh}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===eh}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}const yw="__type__",dP="__max__",Rc={mapValue:{}},_w="__vector__",th="value";function Qi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Op(n)?4:pP(n)?9007199254740991:fP(n)?10:11:Te(28295,{value:n})}function Sr(n,e){if(n===e)return!0;const t=Qi(n);if(t!==Qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xl(n).isEqual(xl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Gi(o.timestampValue),d=Gi(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Ki(o.bytesValue).isEqual(Ki(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return mt(o.geoPointValue.latitude)===mt(a.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return mt(o.integerValue)===mt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=mt(o.doubleValue),d=mt(a.doubleValue);return u===d?Zc(u)===Zc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ea(n.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(x_(u)!==x_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Sr(u[p],d[p])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function Vl(n,e){return(n.values||[]).find((t=>Sr(t,e)))!==void 0}function ta(n,e){if(n===e)return 0;const t=Qi(n),i=Qi(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=mt(a.integerValue||a.doubleValue),p=mt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return V_(n.timestampValue,e.timestampValue);case 4:return V_(xl(n),xl(e));case 5:return Hf(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Ki(a),p=Ki(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const v=Me(d[y],p[y]);if(v!==0)return v}return Me(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Me(mt(a.latitude),mt(u.latitude));return d!==0?d:Me(mt(a.longitude),mt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return M_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){const d=a.fields||{},p=u.fields||{},y=d[th]?.arrayValue,v=p[th]?.arrayValue,w=Me(y?.values?.length||0,v?.values?.length||0);return w!==0?w:M_(y,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Rc.mapValue&&u===Rc.mapValue)return 0;if(a===Rc.mapValue)return 1;if(u===Rc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const S=Hf(p[w],v[w]);if(S!==0)return S;const M=ta(d[p[w]],y[v[w]]);if(M!==0)return M}return Me(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function V_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=Gi(n),i=Gi(e),o=Me(t.seconds,i.seconds);return o!==0?o:Me(t.nanos,i.nanos)}function M_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=ta(t[o],i[o]);if(a)return a}return Me(t.length,i.length)}function na(n){return Wf(n)}function Wf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Gi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ki(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Wf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Wf(t.fields[u])}`;return o+"}"})(n.mapValue):Te(61005,{value:n})}function Vc(n){switch(Qi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wh(n);return e?16+Vc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Vc(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Gs(i.fields,((a,u)=>{o+=a.length+Vc(u)})),o})(n.mapValue);default:throw Te(13486,{value:n})}}function U_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gf(n){return!!n&&"integerValue"in n}function Dp(n){return!!n&&"arrayValue"in n}function F_(n){return!!n&&"nullValue"in n}function B_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mc(n){return!!n&&"mapValue"in n}function fP(n){return(n?.mapValue?.fields||{})[yw]?.stringValue===_w}function Tl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Tl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tl(n.arrayValue.values[t]);return e}return{...n}}function pP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dP}class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(t)}setAll(e){let t=Mt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=Tl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Gs(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new kn(Tl(this.value))}}function vw(n){const e=[];return Gs(n.fields,((t,i)=>{const o=new Mt([t]);if(Mc(i)){const a=vw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new zn(e)}class Wt{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Wt(e,0,Ce.min(),Ce.min(),Ce.min(),kn.empty(),0)}static newFoundDocument(e,t,i,o){return new Wt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new Wt(e,2,t,Ce.min(),Ce.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Ce.min(),Ce.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nh{constructor(e,t){this.position=e,this.inclusive=t}}function j_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=_e.comparator(_e.fromName(u.referenceValue),t.key):i=ta(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function z_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sr(n.position[t],e.position[t]))return!1;return!0}class Ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function mP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ew{}class Et extends Ew{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yP(e,t,i):t==="array-contains"?new EP(e,i):t==="in"?new wP(e,i):t==="not-in"?new TP(e,i):t==="array-contains-any"?new IP(e,i):new Et(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _P(e,i):new vP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&Qi(this.value)===Qi(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends Ew{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qn(e,t)}matches(e){return ww(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ww(n){return n.op==="and"}function Tw(n){return gP(n)&&ww(n)}function gP(n){for(const e of n.filters)if(e instanceof qn)return!1;return!0}function Kf(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+na(n.value);if(Tw(n))return n.filters.map((e=>Kf(e))).join(",");{const e=n.filters.map((t=>Kf(t))).join(",");return`${n.op}(${e})`}}function Iw(n,e){return n instanceof Et?(function(i,o){return o instanceof Et&&i.op===o.op&&i.field.isEqual(o.field)&&Sr(i.value,o.value)})(n,e):n instanceof qn?(function(i,o){return o instanceof qn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&Iw(u,o.filters[d])),!0):!1})(n,e):void Te(19439)}function Sw(n){return n instanceof Et?(function(t){return`${t.field.canonicalString()} ${t.op} ${na(t.value)}`})(n):n instanceof qn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Sw).join(" ,")+"}"})(n):"Filter"}class yP extends Et{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class _P extends Et{constructor(e,t){super(e,"in",t),this.keys=Rw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vP extends Et{constructor(e,t){super(e,"not-in",t),this.keys=Rw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Rw(n,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class EP extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dp(t)&&Vl(t.arrayValue,this.value)}}class wP extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vl(this.value.arrayValue,t)}}class TP extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vl(this.value.arrayValue,t)}}class IP extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Vl(this.value.arrayValue,i)))}}class SP{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function $_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new SP(n,e,t,i,o,a,u)}function xp(n){const e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Kf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>na(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>na(i))).join(",")),e.Te=t}return e.Te}function Lp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Iw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z_(n.startAt,e.startAt)&&z_(n.endAt,e.endAt)}function Qf(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class ha{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RP(n,e,t,i,o,a,u,d){return new ha(n,e,t,i,o,a,u,d)}function Vp(n){return new ha(n)}function q_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Aw(n){return n.collectionGroup!==null}function Il(n){const e=ke(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ct(Mt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ml(a,i))})),t.has(Mt.keyField().canonicalString())||e.Ie.push(new Ml(Mt.keyField(),i))}return e.Ie}function _r(n){const e=ke(n);return e.Ee||(e.Ee=AP(e,Il(n))),e.Ee}function AP(n,e){if(n.limitType==="F")return $_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Ml(o.field,a)}));const t=n.endAt?new nh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new nh(n.startAt.position,n.startAt.inclusive):null;return $_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Xf(n,e){const t=n.filters.concat([e]);return new ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yf(n,e,t){return new ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Th(n,e){return Lp(_r(n),_r(e))&&n.limitType===e.limitType}function Cw(n){return`${xp(_r(n))}|lt:${n.limitType}`}function qo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Sw(o))).join(", ")}]`),Eh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>na(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>na(o))).join(",")),`Target(${i})`})(_r(n))}; limitType=${n.limitType})`}function Ih(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):_e.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Il(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const y=j_(u,d,p);return u.inclusive?y<=0:y<0})(i.startAt,Il(i),o)||i.endAt&&!(function(u,d,p){const y=j_(u,d,p);return u.inclusive?y>=0:y>0})(i.endAt,Il(i),o))})(n,e)}function CP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pw(n){return(e,t)=>{let i=!1;for(const o of Il(n)){const a=PP(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function PP(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?ta(p,y):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:n.dir})}}class Ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return hw(this.inner)}size(){return this.innerSize}}const kP=new at(_e.comparator);function ti(){return kP}const kw=new at(_e.comparator);function yl(...n){let e=kw;for(const t of n)e=e.insert(t.key,t);return e}function Nw(n){let e=kw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ns(){return Sl()}function bw(){return Sl()}function Sl(){return new Ks((n=>n.toString()),((n,e)=>n.isEqual(e)))}const NP=new at(_e.comparator),bP=new Ct(_e.comparator);function Ue(...n){let e=bP;for(const t of n)e=e.add(t);return e}const OP=new Ct(Me);function DP(){return OP}function Mp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(e)?"-0":e}}function Ow(n){return{integerValue:""+n}}function xP(n,e){return aP(e)?Ow(e):Mp(n,e)}class Sh{constructor(){this._=void 0}}function LP(n,e,t){return n instanceof Ul?(function(o,a){const u={fields:{[pw]:{stringValue:fw},[gw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Op(a)&&(a=wh(a)),a&&(u.fields[mw]=a),{mapValue:u}})(t,e):n instanceof Fl?xw(n,e):n instanceof Bl?Lw(n,e):(function(o,a){const u=Dw(o,a),d=H_(u)+H_(o.Ae);return Gf(u)&&Gf(o.Ae)?Ow(d):Mp(o.serializer,d)})(n,e)}function VP(n,e,t){return n instanceof Fl?xw(n,e):n instanceof Bl?Lw(n,e):t}function Dw(n,e){return n instanceof rh?(function(i){return Gf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ul extends Sh{}class Fl extends Sh{constructor(e){super(),this.elements=e}}function xw(n,e){const t=Vw(e);for(const i of n.elements)t.some((o=>Sr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Bl extends Sh{constructor(e){super(),this.elements=e}}function Lw(n,e){let t=Vw(e);for(const i of n.elements)t=t.filter((o=>!Sr(o,i)));return{arrayValue:{values:t}}}class rh extends Sh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function H_(n){return mt(n.integerValue||n.doubleValue)}function Vw(n){return Dp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class MP{constructor(e,t){this.field=e,this.transform=t}}function UP(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Fl&&o instanceof Fl||i instanceof Bl&&o instanceof Bl?ea(i.elements,o.elements,Sr):i instanceof rh&&o instanceof rh?Sr(i.Ae,o.Ae):i instanceof Ul&&o instanceof Ul})(n.transform,e.transform)}class FP{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rh{}function Mw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fw(n.key,vr.none()):new Ql(n.key,n.data,vr.none());{const t=n.data,i=kn.empty();let o=new Ct(Mt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Qs(n.key,i,new zn(o.toArray()),vr.none())}}function BP(n,e,t){n instanceof Ql?(function(o,a,u){const d=o.value.clone(),p=G_(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Qs?(function(o,a,u){if(!Uc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=G_(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(Uw(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Rl(n,e,t,i){return n instanceof Ql?(function(a,u,d,p){if(!Uc(a.precondition,u))return d;const y=a.value.clone(),v=K_(a.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Qs?(function(a,u,d,p){if(!Uc(a.precondition,u))return d;const y=K_(a.fieldTransforms,p,u),v=u.data;return v.setAll(Uw(a)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,i):(function(a,u,d){return Uc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function jP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=Dw(i.transform,o||null);a!=null&&(t===null&&(t=kn.empty()),t.set(i.field,a))}return t||null}function W_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ea(i,o,((a,u)=>UP(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ql extends Rh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qs extends Rh{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function G_(n,e,t){const i=new Map;Ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,VP(u,d,t[o]))}return i}function K_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,LP(a,u,e))}return i}class Fw extends Rh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zP extends Rh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $P{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&BP(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Rl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Rl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=bw();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=Mw(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,((t,i)=>W_(t,i)))&&ea(this.baseMutations,e.baseMutations,((t,i)=>W_(t,i)))}}class Up{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ge(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return NP})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Up(e,t,i,o)}}class qP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HP{constructor(e,t){this.count=e,this.unchangedNames=t}}var vt,Be;function WP(n){switch(n){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function Bw(n){if(n===void 0)return ei("GRPC error has no .code"),W.UNKNOWN;switch(n){case vt.OK:return W.OK;case vt.CANCELLED:return W.CANCELLED;case vt.UNKNOWN:return W.UNKNOWN;case vt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case vt.INTERNAL:return W.INTERNAL;case vt.UNAVAILABLE:return W.UNAVAILABLE;case vt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case vt.NOT_FOUND:return W.NOT_FOUND;case vt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case vt.ABORTED:return W.ABORTED;case vt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case vt.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:n})}}(Be=vt||(vt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function GP(){return new TextEncoder}const KP=new zi([4294967295,4294967295],0);function Q_(n){const e=GP().encode(n),t=new ew;return t.update(e),new Uint8Array(t.digest())}function X_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zi([t,i],0),new zi([o,a],0)]}class Fp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new _l(`Invalid padding: ${t}`);if(i<0)throw new _l(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new _l(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zi.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(zi.fromNumber(i)));return o.compare(KP)===1&&(o=new zi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Q_(e),[i,o]=X_(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Fp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=Q_(e),[i,o]=X_(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ah{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ah(Ce.min(),o,new at(Me),ti(),Ue())}}class Xl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xl(i,t,Ue(),Ue(),Ue())}}class Fc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class jw{constructor(e,t){this.targetId=e,this.Ce=t}}class zw{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Y_{constructor(){this.ve=0,this.Fe=J_(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),i=Ue();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:a})}})),new Xl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=J_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QP{constructor(e){this.Ge=e,this.ze=new Map,this.je=ti(),this.Je=Ac(),this.He=Ac(),this.Ye=new at(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Qf(a))if(i===0){const u=new _e(a.path);this.et(t,u,Wt.newNoDocument(u,Ce.min()))}else Ge(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Ki(i).toUint8Array()}catch(p){if(p instanceof dw)return Zo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Fp(u,o,a)}catch(p){return Zo(p instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Qf(d.target)){const p=new _e(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Wt.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ue();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Ah(e,t,this.Ye,this.je,i);return this.je=ti(),this.Je=Ac(),this.He=Ac(),this.Ye=new at(Me),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Y_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ct(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ct(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Y_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ac(){return new at(_e.comparator)}function J_(){return new at(_e.comparator)}const XP={asc:"ASCENDING",desc:"DESCENDING"},YP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JP={and:"AND",or:"OR"};class ZP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jf(n,e){return n.useProto3Json||Eh(e)?e:{value:e}}function ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $w(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ek(n,e){return ih(n,e.toTimestamp())}function Er(n){return Ge(!!n,49232),Ce.fromTimestamp((function(t){const i=Gi(t);return new nt(i.seconds,i.nanos)})(n))}function Bp(n,e){return Zf(n,e).canonicalString()}function Zf(n,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function qw(n){const e=Je.fromString(n);return Ge(Qw(e),10190,{key:e.toString()}),e}function ep(n,e){return Bp(n.databaseId,e.path)}function wf(n,e){const t=qw(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Ww(t))}function Hw(n,e){return Bp(n.databaseId,e)}function tk(n){const e=qw(n);return e.length===4?Je.emptyPath():Ww(e)}function tp(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ww(n){return Ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Z_(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function nk(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,v){return y.useProto3Json?(Ge(v===void 0||typeof v=="string",58123),Ut.fromBase64String(v||"")):(Ge(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ut.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const v=y.code===void 0?W.UNKNOWN:Bw(y.code);return new ae(v,y.message||"")})(u);t=new zw(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=wf(n,i.document.name),a=Er(i.document.updateTime),u=i.document.createTime?Er(i.document.createTime):Ce.min(),d=new kn({mapValue:{fields:i.document.fields}}),p=Wt.newFoundDocument(o,a,u,d),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Fc(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=wf(n,i.document),a=i.readTime?Er(i.readTime):Ce.min(),u=Wt.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Fc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=wf(n,i.document),a=i.removedTargetIds||[];t=new Fc([],a,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new HP(o,a),d=i.targetId;t=new jw(d,u)}}return t}function rk(n,e){let t;if(e instanceof Ql)t={update:Z_(n,e.key,e.value)};else if(e instanceof Fw)t={delete:ep(n,e.key)};else if(e instanceof Qs)t={update:Z_(n,e.key,e.data),updateMask:dk(e.fieldMask)};else{if(!(e instanceof zP))return Te(16599,{Vt:e.type});t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Ul)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Bl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof rh)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Te(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:ek(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te(27497)})(n,e.precondition)),t}function ik(n,e){return n&&n.length>0?(Ge(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Er(o.updateTime):Er(a);return u.isEqual(Ce.min())&&(u=Er(a)),new FP(u,o.transformResults||[])})(t,e)))):[]}function sk(n,e){return{documents:[Hw(n,e.path)]}}function ok(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Hw(n,o);const a=(function(y){if(y.length!==0)return Kw(qn.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((v=>(function(S){return{field:Ho(S.field),direction:uk(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Jf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function ak(n){let e=tk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ge(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(w){const S=Gw(w);return S instanceof qn&&Tw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((S=>(function(b){return new Ml(Wo(b.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let S;return S=typeof w=="object"?w.value:w,Eh(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(w){const S=!!w.before,M=w.values||[];return new nh(M,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const S=!w.before,M=w.values||[];return new nh(M,S)})(t.endAt)),RP(e,o,u,a,d,"F",p,y)}function lk(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Gw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Wo(t.unaryFilter.field);return Et.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Wo(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wo(t.unaryFilter.field);return Et.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Wo(t.unaryFilter.field);return Et.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Et.create(Wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return qn.create(t.compositeFilter.filters.map((i=>Gw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function uk(n){return XP[n]}function ck(n){return YP[n]}function hk(n){return JP[n]}function Ho(n){return{fieldPath:n.canonicalString()}}function Wo(n){return Mt.fromServerFormat(n.fieldPath)}function Kw(n){return n instanceof Et?(function(t){if(t.op==="=="){if(B_(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NAN"}};if(F_(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(B_(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NAN"}};if(F_(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(t.field),op:ck(t.op),value:t.value}}})(n):n instanceof qn?(function(t){const i=t.getFilters().map((o=>Kw(o)));return i.length===1?i[0]:{compositeFilter:{op:hk(t.op),filters:i}}})(n):Te(54877,{filter:n})}function dk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Qw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ui{constructor(e,t,i,o,a=Ce.min(),u=Ce.min(),d=Ut.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fk{constructor(e){this.yt=e}}function pk(n){const e=ak({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yf(e,e.limit,"L"):e}class mk{constructor(){this.Cn=new gk}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Wi.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class gk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ct(Je.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ct(Je.comparator)).toArray()}}const ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xw=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Xw,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ra(0)}static cr(){return new ra(-1)}}const tv="LruGarbageCollector",yk=1048576;function nv([n,e],[t,i]){const o=Me(n,t);return o===0?Me(e,i):o}class _k{constructor(e){this.Ir=e,this.buffer=new Ct(nv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();nv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(tv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ca(t)?ue(tv,"Ignoring IndexedDB error during garbage collection: ",t):await ua(t)}await this.Vr(3e5)}))}}class Ek{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(vh.ce);const i=new _k(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(ev)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ev):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,d=Date.now(),this.removeTargets(e,i,t)))).next((w=>(a=w,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),$o()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function wk(n,e){return new Ek(n,e)}class Tk{constructor(){this.changes=new Ks((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ik{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Rl(i.mutation,o,zn.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ue()){const o=Ns();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=yl();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Ns();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ue())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=ti();const u=Sl(),d=(function(){return Sl()})();return t.forEach(((p,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Qs)?a=a.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Rl(v.mutation,y,v.mutation.getFieldMask(),nt.now())):u.set(y.key,zn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>d.set(y,new Ik(v,u.get(y)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Sl();let o=new at(((u,d)=>u-d)),a=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=i.get(p)||zn.empty();v=d.applyToLocalView(y,v),i.set(p,v);const w=(o.get(d.batchId)||Ue()).add(p);o=o.insert(d.batchId,w)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,v=p.value,w=bw();v.forEach((S=>{if(!a.has(S)){const M=Mw(t.get(S),i.get(S));M!==null&&w.set(S,M),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return K.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return _e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Aw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):K.resolve(Ns());let d=Dl,p=a;return u.next((y=>K.forEach(y,((v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,p,y,Ue()))).next((v=>({batchId:d,changes:Nw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((i=>{let o=yl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=yl();return this.indexManager.getCollectionParents(e,a).next((d=>K.forEach(d,(p=>{const y=(function(w,S){return new ha(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((v=>{v.forEach(((w,S)=>{u=u.insert(w,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,Wt.newInvalidDocument(v)))}));let d=yl();return u.forEach(((p,y)=>{const v=a.get(p);v!==void 0&&Rl(v.mutation,y,zn.empty(),nt.now()),Ih(t,y)&&(d=d.insert(p,y))})),d}))}}class Rk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Er(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:pk(o.bundledQuery),readTime:Er(o.readTime)}})(t)),K.resolve()}}class Ak{constructor(){this.overlays=new at(_e.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ns();return K.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=Ns(),a=t.length+1,u=new _e(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new at(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=a.get(y.largestBatchId);v===null&&(v=Ns(),a=a.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const d=Ns(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>d.set(y,v))),!(d.size()>=o)););return K.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new qP(t,i));let a=this.qr.get(t);a===void 0&&(a=Ue(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}class Ck{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class jp{constructor(){this.Qr=new Ct(bt.$r),this.Ur=new Ct(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new bt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new bt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new _e(new Je([])),i=new bt(t,e),o=new bt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new Je([])),i=new bt(t,e),o=new bt(t,e+1);let a=Ue();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new bt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}class Pk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(bt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new $P(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return K.resolve(u)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return K.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?bp:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new bt(t,0),o=new bt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),K.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ct(Me);return t.forEach((o=>{const a=new bt(o,0),u=new bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;_e.isDocumentKey(a)||(a=a.child(""));const u=new bt(new _e(a),0);let d=new Ct(Me);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Yr)),!0)}),u),K.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(t.mutations,(o=>{const a=new bt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new bt(t,0),o=this.Zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kk{constructor(e){this.ri=e,this.docs=(function(){return new at(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let i=ti();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Wt.newInvalidDocument(o))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=ti();const u=t.path,d=new _e(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||rP(nP(v),i)<=0||(o.has(v.key)||Ih(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return K.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ii(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Nk(this)}getSize(e){return K.resolve(this.size)}}class Nk extends Tk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class bk{constructor(e){this.persistence=e,this.si=new Ks((t=>xp(t)),Lp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new jp,this.targetCount=0,this.ai=ra.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ra(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),K.waitFor(a).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),K.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class Yw{constructor(e,t){this.ui={},this.overlays={},this.ci=new vh(0),this.li=!1,this.li=!0,this.hi=new Ck,this.referenceDelegate=e(this),this.Pi=new bk(this),this.indexManager=new mk,this.remoteDocumentCache=(function(o){return new kk(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new fk(t),this.Ii=new Rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ak,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Pk(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new Ok(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return K.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Ok extends sP{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new jp,this.Vi=null}static mi(e){return new zp(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(i=>{const o=_e.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sh{constructor(e,t){this.persistence=e,this.pi=new Ks((i=>lP(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=wk(this,t)}static mi(e,t){return new sh(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?K.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Ce.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vc(e.data.value)),t}br(e,t,i){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class $p{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ue(),o=Ue();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new $p(e,t.fromCache,i,o)}}class Dk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hR()?8:oP(Kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Dk;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?($o()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):($o()<=Ve.DEBUG&&ue("QueryEngine","Query:",qo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?($o()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):K.resolve())}ys(e,t){if(q_(t))return K.resolve(null);let i=_r(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Yf(t,null,"F"),i=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ue(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(t,d);return this.Cs(t,y,u,p.readTime)?this.ys(e,Yf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,i,o){return q_(t)||o.isEqual(Ce.min())?K.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?K.resolve(null):($o()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qo(t)),this.vs(e,u,t,tP(o,Dl)).next((d=>d)))}))}Ds(e,t){let i=new Ct(Pw(e));return t.forEach(((o,a)=>{Ih(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return $o()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",qo(t)),this.ps.getDocumentsMatchingQuery(e,t,Wi.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const qp="LocalStore",Lk=3e8;class Vk{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new at(Me),this.xs=new Ks((a=>xp(a)),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Mk(n,e,t,i){return new Vk(n,e,t,i)}async function Jw(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=Ue();for(const y of o){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of a){d.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function Uk(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,v){const w=y.batch,S=w.keys();let M=K.resolve();return S.forEach((b=>{M=M.next((()=>v.getEntry(p,b))).next((U=>{const k=y.docVersions.get(b);Ge(k!==null,48541),U.version.compareTo(k)<0&&(w.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),M.next((()=>d.mutationQueue.removeMutationBatch(p,w)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ue();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Zw(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Fk(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,w)=>{const S=o.get(w);if(!S)return;d.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,w))));let M=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?M=M.withResumeToken(Ut.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,i)),o=o.insert(w,M),(function(U,k,J){return U.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=Lk?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(S,M,v)&&d.push(t.Pi.updateTargetData(a,M))}));let p=ti(),y=Ue();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(Bk(a,u,e.documentUpdates).next((v=>{p=v.ks,y=v.qs}))),!i.isEqual(Ce.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return K.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,y))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function Bk(n,e,t){let i=Ue(),o=Ue();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=ti();return t.forEach(((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ue(qp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function jk(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=bp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function zk(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,K.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Ui(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function np(n,e,t){const i=ke(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!ca(u))throw u;ue(qp,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function rv(n,e,t){const i=ke(n);let o=Ce.min(),a=Ue();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,v){const w=ke(p),S=w.xs.get(v);return S!==void 0?K.resolve(w.Ms.get(S)):w.Pi.getTargetData(y,v)})(i,u,_r(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Ce.min(),t?a:Ue()))).next((d=>($k(i,CP(e),d),{documents:d,Qs:a})))))}function $k(n,e,t){let i=n.Os.get(e)||Ce.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class iv{constructor(){this.activeTargetIds=DP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qk{constructor(){this.Mo=new iv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new iv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hk{Oo(e){}shutdown(){}}const sv="ConnectivityMonitor";class ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(sv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Cc=null;function rp(){return Cc===null?Cc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cc++,"0x"+Cc.toString(16)}const Tf="RestConnection",Wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===eh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=rp(),d=this.zo(e,t.toUriEncodedString());ue(Tf,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:y}=new URL(d),v=Ji(y);return this.Jo(e,d,p,i,v).then((w=>(ue(Tf,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Zo(Tf,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",i),w}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+la})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=Wk[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class Kk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qt="WebChannelConnection";class Qk extends Gk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=rp();return new Promise(((d,p)=>{const y=new tw;y.setWithCredentials(!0),y.listenOnce(nw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Lc.NO_ERROR:const w=y.getResponseJson();ue(qt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case Lc.TIMEOUT:ue(qt,`RPC '${e}' ${u} timed out`),p(new ae(W.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const S=y.getStatus();if(ue(qt,`RPC '${e}' ${u} failed with status:`,S,"response text:",y.getResponseText()),S>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const b=M?.error;if(b&&b.status&&b.message){const U=(function(J){const ne=J.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ne)>=0?ne:W.UNKNOWN})(b.status);p(new ae(U,b.message))}else p(new ae(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ae(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(qt,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);ue(qt,`RPC '${e}' ${u} sending request:`,o),y.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=rp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sw(),d=iw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");ue(qt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const w=u.createWebChannel(v,p);this.I_(w);let S=!1,M=!1;const b=new Kk({Yo:k=>{M?ue(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(S||(ue(qt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),ue(qt,`RPC '${e}' stream ${o} sending:`,k),w.send(k))},Zo:()=>w.close()}),U=(k,J,ne)=>{k.listen(J,(X=>{try{ne(X)}catch(se){setTimeout((()=>{throw se}),0)}}))};return U(w,gl.EventType.OPEN,(()=>{M||(ue(qt,`RPC '${e}' stream ${o} transport opened.`),b.o_())})),U(w,gl.EventType.CLOSE,(()=>{M||(M=!0,ue(qt,`RPC '${e}' stream ${o} transport closed`),b.a_(),this.E_(w))})),U(w,gl.EventType.ERROR,(k=>{M||(M=!0,Zo(qt,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),b.a_(new ae(W.UNAVAILABLE,"The operation could not be completed")))})),U(w,gl.EventType.MESSAGE,(k=>{if(!M){const J=k.data[0];Ge(!!J,16349);const ne=J,X=ne?.error||ne[0]?.error;if(X){ue(qt,`RPC '${e}' stream ${o} received error:`,X);const se=X.status;let de=(function(R){const P=vt[R];if(P!==void 0)return Bw(P)})(se),ge=X.message;de===void 0&&(de=W.INTERNAL,ge="Unknown error status: "+se+" with message "+X.message),M=!0,b.a_(new ae(de,ge)),w.close()}else ue(qt,`RPC '${e}' stream ${o} received:`,J),b.u_(J)}})),U(d,rw.STAT_EVENT,(k=>{k.stat===qf.PROXY?ue(qt,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===qf.NOPROXY&&ue(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function If(){return typeof document<"u"?document:null}function Ch(n){return new ZP(n,!0)}class eT{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const av="PersistentStream";class tT{constructor(e,t,i,o,a,u,d,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ae(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(av,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(av,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xk extends tT{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=nk(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ce.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Er(u.readTime):Ce.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Qf(p)?{documents:sk(a,p)}:{query:ok(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=$w(a,u.resumeToken);const y=Jf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ce.min())>0){d.readTime=ih(a,u.snapshotVersion.toTimestamp());const y=Jf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=lk(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.q_(t)}}class Yk extends tT{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ik(e.writeResults,e.commitTime),i=Er(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>rk(this.serializer,i)))};this.q_(t)}}class Jk{}class Zk extends Jk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Zf(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(W.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Zf(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class eN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ei(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bs="RemoteStore";class tN{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Xs(this)&&(ue(Bs,"Restarting streams for network reachability change."),await(async function(p){const y=ke(p);y.Ea.add(4),await Yl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ph(y)})(this))}))})),this.Ra=new eN(i,o)}}async function Ph(n){if(Xs(n))for(const e of n.da)await e(!0)}async function Yl(n){for(const e of n.da)await e(!1)}function nT(n,e){const t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kp(t)?Gp(t):da(t).O_()&&Wp(t,e))}function Hp(n,e){const t=ke(n),i=da(t);t.Ia.delete(e),i.O_()&&rT(t,e),t.Ia.size===0&&(i.O_()?i.L_():Xs(t)&&t.Ra.set("Unknown"))}function Wp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}da(n).Y_(e)}function rT(n,e){n.Va.Ue(e),da(n).Z_(e)}function Gp(n){n.Va=new QP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),da(n).start(),n.Ra.ua()}function Kp(n){return Xs(n)&&!da(n).x_()&&n.Ia.size>0}function Xs(n){return ke(n).Ea.size===0}function iT(n){n.Va=void 0}async function nN(n){n.Ra.set("Online")}async function rN(n){n.Ia.forEach(((e,t)=>{Wp(n,e)}))}async function iN(n,e){iT(n),Kp(n)?(n.Ra.ha(e),Gp(n)):n.Ra.set("Unknown")}async function sN(n,e,t){if(n.Ra.set("Online"),e instanceof zw&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ue(Bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await oh(n,i)}else if(e instanceof Fc?n.Va.Ze(e):e instanceof jw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const i=await Zw(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ia.get(y);v&&a.Ia.set(y,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,y)=>{const v=a.Ia.get(p);if(!v)return;a.Ia.set(p,v.withResumeToken(Ut.EMPTY_BYTE_STRING,v.snapshotVersion)),rT(a,p);const w=new Ui(v.target,p,y,v.sequenceNumber);Wp(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ue(Bs,"Failed to raise snapshot:",i),await oh(n,i)}}async function oh(n,e,t){if(!ca(e))throw e;n.Ea.add(1),await Yl(n),n.Ra.set("Offline"),t||(t=()=>Zw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Bs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ph(n)}))}function sT(n,e){return e().catch((t=>oh(n,t,e)))}async function kh(n){const e=ke(n),t=Xi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bp;for(;oN(e);)try{const o=await jk(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,aN(e,o)}catch(o){await oh(e,o)}oT(e)&&aT(e)}function oN(n){return Xs(n)&&n.Ta.length<10}function aN(n,e){n.Ta.push(e);const t=Xi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function oT(n){return Xs(n)&&!Xi(n).x_()&&n.Ta.length>0}function aT(n){Xi(n).start()}async function lN(n){Xi(n).ra()}async function uN(n){const e=Xi(n);for(const t of n.Ta)e.ea(t.mutations)}async function cN(n,e,t){const i=n.Ta.shift(),o=Up.from(i,e,t);await sT(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await kh(n)}async function hN(n,e){e&&Xi(n).X_&&await(async function(i,o){if((function(u){return WP(u)&&u!==W.ABORTED})(o.code)){const a=i.Ta.shift();Xi(i).B_(),await sT(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await kh(i)}})(n,e),oT(n)&&aT(n)}async function lv(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ue(Bs,"RemoteStore received new credentials");const i=Xs(t);t.Ea.add(3),await Yl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ph(t)}async function dN(n,e){const t=ke(n);e?(t.Ea.delete(2),await Ph(t)):e||(t.Ea.add(2),await Yl(t),t.Ra.set("Unknown"))}function da(n){return n.ma||(n.ma=(function(t,i,o){const a=ke(t);return a.sa(),new Xk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:nN.bind(null,n),t_:rN.bind(null,n),r_:iN.bind(null,n),H_:sN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Kp(n)?Gp(n):n.Ra.set("Unknown")):(await n.ma.stop(),iT(n))}))),n.ma}function Xi(n){return n.fa||(n.fa=(function(t,i,o){const a=ke(t);return a.sa(),new Yk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:lN.bind(null,n),r_:hN.bind(null,n),ta:uN.bind(null,n),na:cN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await kh(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(Bs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Qp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Qp(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(n,e){if(ei("AsyncQueue",`${e}: ${n}`),ca(n))return new ae(W.UNAVAILABLE,`${e}: ${n}`);throw n}class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=yl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class uv{constructor(){this.ga=new at(_e.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ia{constructor(e,t,i,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ia(e,t,Yo.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class fN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class pN{constructor(){this.queries=cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=ke(t),a=o.queries;o.queries=cv(),a.forEach(((u,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new ae(W.ABORTED,"Firestore shutting down"))}}function cv(){return new Ks((n=>Cw(n)),Th)}async function lT(n,e){const t=ke(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new fN,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Xp(u,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Yp(t)}async function uT(n,e){const t=ke(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function mN(n,e){const t=ke(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Yp(t)}function gN(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Yp(n){n.Ca.forEach((e=>{e.next()}))}var ip,hv;(hv=ip||(ip={})).Ma="default",hv.Cache="cache";class cT{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ip.Cache}}class hT{constructor(e){this.key=e}}class dT{constructor(e){this.key=e}}class yN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=Pw(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new uv,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,w)=>{const S=o.get(v),M=Ih(this.query,w)?w:null,b=!!S&&this.mutatedKeys.has(S.key),U=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let k=!1;S&&M?S.data.isEqual(M.data)?b!==U&&(i.track({type:3,doc:M}),k=!0):this.su(S,M)||(i.track({type:2,doc:M}),k=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(d=!0)):!S&&M?(i.track({type:0,doc:M}),k=!0):S&&!M&&(i.track({type:1,doc:S}),k=!0,(p||y)&&(d=!0)),k&&(M?(u=u.add(M),a=U?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,w)=>(function(M,b){const U=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:k})}};return U(M)-U(b)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,u.length!==0||y?{snapshot:new ia(this.query,e.tu,a,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new dT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new hT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jp="SyncEngine";class _N{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class vN{constructor(e){this.key=e,this.hu=!1}}class EN{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ks((d=>Cw(d)),Th),this.Iu=new Map,this.Eu=new Set,this.du=new at(_e.comparator),this.Au=new Map,this.Ru=new jp,this.Vu={},this.mu=new Map,this.fu=ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wN(n,e,t=!0){const i=_T(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await fT(i,e,t,!0),o}async function TN(n,e){const t=_T(n);await fT(t,e,!0,!1)}async function fT(n,e,t,i){const o=await zk(n.localStore,_r(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await IN(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&nT(n.remoteStore,o),d}async function IN(n,e,t,i,o){n.pu=(w,S,M)=>(async function(U,k,J,ne){let X=k.view.ru(J);X.Cs&&(X=await rv(U.localStore,k.query,!1).then((({documents:N})=>k.view.ru(N,X))));const se=ne&&ne.targetChanges.get(k.targetId),de=ne&&ne.targetMismatches.get(k.targetId)!=null,ge=k.view.applyChanges(X,U.isPrimaryClient,se,de);return fv(U,k.targetId,ge.au),ge.snapshot})(n,w,S,M);const a=await rv(n.localStore,e,!0),u=new yN(e,a.Qs),d=u.ru(a.documents),p=Xl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=u.applyChanges(d,n.isPrimaryClient,p);fv(n,t,y.au);const v=new _N(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function SN(n,e,t){const i=ke(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Th(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await np(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Hp(i.remoteStore,o.targetId),sp(i,o.targetId)})).catch(ua)):(sp(i,o.targetId),await np(i.localStore,o.targetId,!0))}async function RN(n,e){const t=ke(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Hp(t.remoteStore,i.targetId))}async function AN(n,e,t){const i=DN(n);try{const o=await(function(u,d){const p=ke(u),y=nt.now(),v=d.reduce(((M,b)=>M.add(b.key)),Ue());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let b=ti(),U=Ue();return p.Ns.getEntries(M,v).next((k=>{b=k,b.forEach(((J,ne)=>{ne.isValidDocument()||(U=U.add(J))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,b))).next((k=>{w=k;const J=[];for(const ne of d){const X=jP(ne,w.get(ne.key).overlayedDocument);X!=null&&J.push(new Qs(ne.key,X,vw(X.value.mapValue),vr.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,J,d)})).next((k=>{S=k;const J=k.applyToLocalDocumentSet(w,U);return p.documentOverlayCache.saveOverlays(M,k.batchId,J)}))})).then((()=>({batchId:S.batchId,changes:Nw(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let y=u.Vu[u.currentUser.toKey()];y||(y=new at(Me)),y=y.insert(d,p),u.Vu[u.currentUser.toKey()]=y})(i,o.batchId,t),await Jl(i,o.changes),await kh(i.remoteStore)}catch(o){const a=Xp(o,"Failed to persist write");t.reject(a)}}async function pT(n,e){const t=ke(n);try{const i=await Fk(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ge(u.hu,14607):o.removedDocuments.size>0&&(Ge(u.hu,42227),u.hu=!1))})),await Jl(t,i,e)}catch(i){await ua(i)}}function dv(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=ke(u);p.onlineState=d;let y=!1;p.queries.forEach(((v,w)=>{for(const S of w.Sa)S.va(d)&&(y=!0)})),y&&Yp(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function CN(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new at(_e.comparator);u=u.insert(a,Wt.newNoDocument(a,Ce.min()));const d=Ue().add(a),p=new Ah(Ce.min(),new Map,new at(Me),u,d);await pT(i,p),i.du=i.du.remove(a),i.Au.delete(e),Zp(i)}else await np(i.localStore,e,!1).then((()=>sp(i,e,t))).catch(ua)}async function PN(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await Uk(t.localStore,e);gT(t,i,null),mT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Jl(t,o)}catch(o){await ua(o)}}async function kN(n,e,t){const i=ke(n);try{const o=await(function(u,d){const p=ke(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,d).next((w=>(Ge(w!==null,37113),v=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);gT(i,e,t),mT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Jl(i,o)}catch(o){await ua(o)}}function mT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function gT(n,e,t){const i=ke(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function sp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||yT(n,i)}))}function yT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Hp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Zp(n))}function fv(n,e,t){for(const i of t)i instanceof hT?(n.Ru.addReference(i.key,e),NN(n,i)):i instanceof dT?(ue(Jp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||yT(n,i.key)):Te(19791,{wu:i})}function NN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(Jp,"New document in limbo: "+t),n.Eu.add(i),Zp(n))}function Zp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(Je.fromString(e)),i=n.fu.next();n.Au.set(i,new vN(t)),n.du=n.du.insert(t,i),nT(n.remoteStore,new Ui(_r(Vp(t.path)),i,"TargetPurposeLimboResolution",vh.ce))}}async function Jl(n,e,t){const i=ke(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(y){o.push(y);const v=$p.As(p.targetId,y);a.push(v)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(p,y){const v=ke(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>K.forEach(y,(S=>K.forEach(S.Es,(M=>v.persistence.referenceDelegate.addReference(w,S.targetId,M))).next((()=>K.forEach(S.ds,(M=>v.persistence.referenceDelegate.removeReference(w,S.targetId,M)))))))))}catch(w){if(!ca(w))throw w;ue(qp,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const M=v.Ms.get(S),b=M.snapshotVersion,U=M.withLastLimboFreeSnapshotVersion(b);v.Ms=v.Ms.insert(S,U)}}})(i.localStore,a))}async function bN(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ue(Jp,"User change. New user:",e.toKey());const i=await Jw(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new ae(W.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Jl(t,i.Ls)}}function ON(n,e){const t=ke(n),i=t.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let o=Ue();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function _T(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ON.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CN.bind(null,e),e.Pu.H_=mN.bind(null,e.eventManager),e.Pu.yu=gN.bind(null,e.eventManager),e}function DN(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kN.bind(null,e),e}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Mk(this.persistence,new xk,e.initialUser,this.serializer)}Cu(e){return new Yw(zp.mi,this.serializer)}Du(e){return new qk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class xN extends ah{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ge(this.persistence.referenceDelegate instanceof sh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new vk(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Yw((i=>sh.mi(i,t)),this.serializer)}}class op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bN.bind(null,this.syncEngine),await dN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pN})()}createDatastore(e){const t=Ch(e.databaseInfo.databaseId),i=(function(a){return new Qk(a)})(e.databaseInfo);return(function(a,u,d,p){return new Zk(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new tN(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>dv(this.syncEngine,t,0)),(function(){return ov.v()?new ov:new Hk})())}createSyncEngine(e,t){return(function(o,a,u,d,p,y,v){const w=new EN(o,a,u,d,p,y);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ke(t);ue(Bs,"RemoteStore shutting down."),i.Ea.add(5),await Yl(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}op.provider={build:()=>new op};class vT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Yi="FirestoreClient";class LN{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ue(Yi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ue(Yi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Xp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sf(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Yi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Jw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function pv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VN(n);ue(Yi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>lv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>lv(e.remoteStore,o))),n._onlineComponents=e}async function VN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Yi,"Using user provided OfflineComponentProvider");try{await Sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Zo("Error using user provided cache. Falling back to memory cache: "+t),await Sf(n,new ah)}}else ue(Yi,"Using default OfflineComponentProvider"),await Sf(n,new xN(void 0));return n._offlineComponents}async function ET(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Yi,"Using user provided OnlineComponentProvider"),await pv(n,n._uninitializedComponentsProvider._online)):(ue(Yi,"Using default OnlineComponentProvider"),await pv(n,new op))),n._onlineComponents}function MN(n){return ET(n).then((e=>e.syncEngine))}async function wT(n){const e=await ET(n),t=e.eventManager;return t.onListen=wN.bind(null,e.syncEngine),t.onUnlisten=SN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RN.bind(null,e.syncEngine),t}function UN(n,e,t={}){const i=new Qr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const v=new vT({next:S=>{v.Nu(),u.enqueueAndForget((()=>uT(a,w)));const M=S.docs.has(d);!M&&S.fromCache?y.reject(new ae(W.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&p&&p.source==="server"?y.reject(new ae(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new cT(Vp(d.path),v,{includeMetadataChanges:!0,qa:!0});return lT(a,w)})(await wT(n),n.asyncQueue,e,t,i))),i.promise}function FN(n,e,t={}){const i=new Qr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const v=new vT({next:S=>{v.Nu(),u.enqueueAndForget((()=>uT(a,w))),S.fromCache&&p.source==="server"?y.reject(new ae(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new cT(d,v,{includeMetadataChanges:!0,qa:!0});return lT(a,w)})(await wT(n),n.asyncQueue,e,t,i))),i.promise}function TT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const mv=new Map;const IT="firestore.googleapis.com",gv=!0;class yv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IT,this.ssl=gv}else this.host=e.host,this.ssl=e.ssl??gv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yk)throw new ae(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qC;switch(i.type){case"firstParty":return new KC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=mv.get(t);i&&(ue("ComponentProvider","Removing Datastore"),mv.delete(t),i.terminate())})(this),Promise.resolve()}}function BN(n,e,t,i={}){n=Hi(n,Nh);const o=Ji(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(gp(`https://${d}`),yp("Firestore",!0)),a.host!==IT&&a.host!==d&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:o,emulatorOptions:i};if(!Ls(p,u)&&(n._setSettings(p),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Ht.MOCK_USER;else{y=dE(i.mockUserToken,n._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new ae(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ht(w)}n._authCredentials=new HC(new aw(y,v))}}class Ys{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class Tt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Kl(t,Tt._jsonSchema))return new Tt(e,i||null,new _e(Je.fromString(t.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:wt("string",Tt._jsonSchemaVersion),referencePath:wt("string")};class $i extends Ys{constructor(e,t,i){super(e,t,Vp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new _e(e))}withConverter(e){return new $i(this.firestore,e,this._path)}}function _v(n,e,...t){if(n=St(n),lw("collection","path",e),n instanceof Nh){const i=Je.fromString(e,...t);return N_(i),new $i(n,null,i)}{if(!(n instanceof Tt||n instanceof $i))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return N_(i),new $i(n.firestore,null,i)}}function Xr(n,e,...t){if(n=St(n),arguments.length===1&&(e=Np.newId()),lw("doc","path",e),n instanceof Nh){const i=Je.fromString(e,...t);return k_(i),new Tt(n,null,new _e(i))}{if(!(n instanceof Tt||n instanceof $i))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return k_(i),new Tt(n.firestore,n instanceof $i?n.converter:null,new _e(i))}}const vv="AsyncQueue";class Ev{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eT(this,"async_queue_retry"),this._c=()=>{const i=If();i&&ue(vv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ca(e))throw e;ue(vv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ei("INTERNAL UNHANDLED ERROR: ",wv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Qp.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:wv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function wv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Zl extends Nh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Ev,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ev(e),this._firestoreClient=void 0,await e}}}function jN(n,e){const t=typeof n=="object"?n:Ep(),i=typeof n=="string"?n:eh,o=ph(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=uE("firestore");a&&BN(o,...a)}return o}function em(n){if(n._terminated)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zN(n),n._firestoreClient}function zN(n){const e=n._freezeSettings(),t=(function(o,a,u,d){return new hP(o,a,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,TT(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new LN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(n._componentsProvider))}class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Ut.fromBase64String(e))}catch(t){throw new ae(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kl(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:wt("string",Nn._jsonSchemaVersion),bytes:wt("string")};class tm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nm{constructor(e){this._methodName=e}}class wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Kl(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:wt("string",wr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class Tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kl(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Tr(e.vectorValues);throw new ae(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:wt("string",Tr._jsonSchemaVersion),vectorValues:wt("object")};const $N=/^__.*__$/;class qN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ql(e,this.data,t,this.fieldTransforms)}}function ST(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:n})}}class rm{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ST(this.Ac)&&$N.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ch(e)}Cc(e,t,i,o=!1){return new rm({Ac:e,methodName:t,Dc:i,path:Mt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(n){const e=n._freezeSettings(),t=Ch(n._databaseId);return new HN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RT(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);PT("Data must be an object, but it was:",u,i);const d=AT(i,u);let p,y;if(a.merge)p=new zn(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const S=GN(e,w,t);if(!u.contains(S))throw new ae(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);QN(v,S)||v.push(S)}p=new zn(v),y=u.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=u.fieldTransforms;return new qN(new kn(d),p,y)}class sm extends nm{_toFieldTransform(e){return new MP(e.path,new Ul)}isEqual(e){return e instanceof sm}}function WN(n,e,t,i=!1){return om(t,n.Cc(i?4:3,e))}function om(n,e){if(CT(n=St(n)))return PT("Unsupported field value:",e,n),AT(n,e);if(n instanceof nm)return(function(i,o){if(!ST(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=om(d,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=nt.fromDate(i);return{timestampValue:ih(o.serializer,a)}}if(i instanceof nt){const a=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ih(o.serializer,a)}}if(i instanceof wr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nn)return{bytesValue:$w(o.serializer,i._byteString)};if(i instanceof Tt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Tr)return(function(u,d){return{mapValue:{fields:{[yw]:{stringValue:_w},[th]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw d.Sc("VectorValues must only contain numeric values.");return Mp(d.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${_h(i)}`)})(n,e)}function AT(n,e){const t={};return hw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,((i,o)=>{const a=om(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function CT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof wr||n instanceof Nn||n instanceof Tt||n instanceof nm||n instanceof Tr)}function PT(n,e,t){if(!CT(t)||!uw(t)){const i=_h(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function GN(n,e,t){if((e=St(e))instanceof tm)return e._internalPath;if(typeof e=="string")return kT(n,e);throw lh("Field path arguments must be of type string or ",n,!1,void 0,t)}const KN=new RegExp("[~\\*/\\[\\]]");function kT(n,e,t){if(e.search(KN)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tm(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lh(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ae(W.INVALID_ARGUMENT,d+n+p)}function QN(n,e){return n.some((t=>t.isEqual(e)))}class NT{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(am("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XN extends NT{data(){return super.data()}}function am(n,e){return typeof e=="string"?kT(n,e):e instanceof tm?e._internalPath:e._delegate._internalPath}function YN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class bT extends lm{}function JN(n,e,...t){let i=[];e instanceof lm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof cm)).length,d=a.filter((p=>p instanceof um)).length;if(u>1||u>0&&d>0)throw new ae(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class um extends bT{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new um(e,t,i)}_apply(e){const t=this._parse(e);return OT(e._query,t),new Ys(e.firestore,e.converter,Xf(e._query,t))}_parse(e){const t=im(e.firestore);return(function(a,u,d,p,y,v,w){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Iv(w,v);const b=[];for(const U of w)b.push(Tv(p,a,U));S={arrayValue:{values:b}}}else S=Tv(p,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Iv(w,v),S=WN(d,u,w,v==="in"||v==="not-in");return Et.create(y,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class cm extends lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)OT(u,p),u=Xf(u,p)})(e._query,t),new Ys(e.firestore,e.converter,Xf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hm extends bT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hm(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new ae(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ml(a,u)})(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new ha(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function ZN(n,e="asc"){const t=e,i=am("orderBy",n);return hm._create(i,t)}function Tv(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ae(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Aw(e)&&t.indexOf("/")!==-1)throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!_e.isDocumentKey(i))throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return U_(n,new _e(i))}if(t instanceof Tt)return U_(n,t._key);throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(t)}.`)}function Iv(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OT(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eb{convertValue(e,t="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Gs(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){const t=e.fields?.[th].arrayValue?.values?.map((i=>mt(i.doubleValue)));return new Tr(t)}convertGeoPoint(e){return new wr(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xl(e));default:return null}}convertTimestamp(e){const t=Gi(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);Ge(Qw(i),9688,{name:e});const o=new Ll(i.get(1),i.get(3)),a=new _e(i.popFirst(5));return o.isEqual(t)||ei(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function DT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class vl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends NT{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(am("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Os._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:wt("string",Os._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Bc extends Os{data(e={}){return super.data(e)}}class Jo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Bc(this._firestore,this._userDataWriter,i.key,i,new vl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Bc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new vl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Bc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new vl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:tb(d.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}function bh(n){n=Hi(n,Tt);const e=Hi(n.firestore,Zl);return UN(em(e),n._key).then((t=>ib(e,n,t)))}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:wt("string",Jo._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class xT extends eb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function nb(n){n=Hi(n,Ys);const e=Hi(n.firestore,Zl),t=em(e),i=new xT(e);return YN(n._query),FN(t,n._query).then((o=>new Jo(e,i,n,o)))}function Al(n,e,t){n=Hi(n,Tt);const i=Hi(n.firestore,Zl),o=DT(n.converter,e,t);return LT(i,[RT(im(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,vr.none())])}function rb(n,e){const t=Hi(n.firestore,Zl),i=Xr(n),o=DT(n.converter,e);return LT(t,[RT(im(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,vr.exists(!1))]).then((()=>i))}function LT(n,e){return(function(i,o){const a=new Qr;return i.asyncQueue.enqueueAndForget((async()=>AN(await MN(i),o,a))),a.promise})(em(n),e)}function ib(n,e,t){const i=t.docs.get(e._key),o=new xT(n);return new Os(n,o,e._key,i,new vl(t.hasPendingWrites,t.fromCache),e.converter)}function sb(){return new sm("serverTimestamp")}(function(e,t=!0){(function(o){la=o})(Hs),Vs(new qi("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Zl(new WC(i.getProvider("auth-internal")),new QC(u,i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,v)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),mr(R_,A_,e),mr(R_,A_,"esm2020")})();const VT="firebasestorage.googleapis.com",MT="storageBucket",ob=120*1e3,ab=600*1e3,lb=1e3;class lt extends Rr{constructor(e,t,i=0){super(Rf(e),`Firebase Storage: ${t} (${Rf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function Rf(n){return"storage/"+n}function dm(){const n="An unknown error occurred, please check the error payload for server response.";return new lt(rt.UNKNOWN,n)}function ub(n){return new lt(rt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function cb(n){return new lt(rt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hb(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(rt.UNAUTHENTICATED,n)}function db(){return new lt(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fb(n){return new lt(rt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function UT(){return new lt(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FT(){return new lt(rt.CANCELED,"User canceled the upload/download.")}function pb(n){return new lt(rt.INVALID_URL,"Invalid URL '"+n+"'.")}function mb(n){return new lt(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gb(){return new lt(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MT+"' property when initializing the app?")}function BT(){return new lt(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yb(){return new lt(rt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function _b(){return new lt(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vb(n){return new lt(rt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ap(n){return new lt(rt.INVALID_ARGUMENT,n)}function jT(){return new lt(rt.APP_DELETED,"The Firebase app was deleted.")}function Eb(n){return new lt(rt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cl(n,e){return new lt(rt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function hl(n){throw new lt(rt.INTERNAL_ERROR,"Internal error: "+n)}class En{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=En.makeFromUrl(e,t)}catch{return new En(e,"")}if(i.path==="")return i;throw mb(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const v="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",M=new RegExp(`^https?://${w}/${v}/b/${o}/o${S}`,"i"),b={bucket:1,path:3},U=t===VT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",J=new RegExp(`^https?://${U}/${o}/${k}`,"i"),X=[{regex:d,indices:p,postModify:a},{regex:M,indices:b,postModify:y},{regex:J,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<X.length;se++){const de=X[se],ge=de.regex.exec(e);if(ge){const N=ge[de.indices.bucket];let R=ge[de.indices.path];R||(R=""),i=new En(N,R),de.postModify(i);break}}if(i==null)throw pb(e);return i}}class wb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Tb(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let y=!1;function v(...k){y||(y=!0,e.apply(null,k))}function w(k){o=setTimeout(()=>{o=null,n(M,p())},k)}function S(){a&&clearTimeout(a)}function M(k,...J){if(y){S();return}if(k){S(),v.call(null,k,...J);return}if(p()||u){S(),v.call(null,k,...J);return}i<64&&(i*=2);let X;d===1?(d=2,X=0):X=(i+Math.random())*1e3,w(X)}let b=!1;function U(k){b||(b=!0,S(),!y&&(o!==null?(k||(d=2),clearTimeout(o),w(0)):k||(d=1)))}return w(0),a=setTimeout(()=>{u=!0,U(!0)},t),U}function Ib(n){n(!1)}function Sb(n){return n!==void 0}function Rb(n){return typeof n=="function"}function Ab(n){return typeof n=="object"&&!Array.isArray(n)}function Oh(n){return typeof n=="string"||n instanceof String}function Sv(n){return fm()&&n instanceof Blob}function fm(){return typeof Blob<"u"}function Rv(n,e,t,i){if(i<e)throw ap(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ap(`Invalid value for '${n}'. Expected ${t} or less.`)}function eu(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function zT(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ds;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ds||(Ds={}));function $T(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}class Cb{constructor(e,t,i,o,a,u,d,p,y,v,w,S=!0,M=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=w,this.retry=S,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,U)=>{this.resolve_=b,this.reject_=U,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Pc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Ds.NO_ERROR,p=a.getStatus();if(!d||$T(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Ds.ABORT;i(!1,new Pc(!1,null,v));return}const y=this.successCodes_.indexOf(p)!==-1;i(!0,new Pc(y,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());Sb(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=dm();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?jT():FT();u(p)}else{const p=UT();u(p)}};this.canceled_?t(!1,new Pc(!1,null,!0)):this.backoffId_=Tb(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ib(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Pb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function kb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nb(n,e){e&&(n["X-Firebase-GMPID"]=e)}function bb(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Ob(n,e,t,i,o,a,u=!0,d=!1){const p=zT(n.urlParams),y=n.url+p,v=Object.assign({},n.headers);return Nb(v,e),Pb(v,t),kb(v,a),bb(v,i),new Cb(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}function Db(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xb(...n){const e=Db();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(fm())return new Blob(n);throw new lt(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Lb(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Vb(n){if(typeof atob>"u")throw vb("base-64");return atob(n)}const fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Af{constructor(e,t){this.data=e,this.contentType=t||null}}function Mb(n,e){switch(n){case fr.RAW:return new Af(qT(e));case fr.BASE64:case fr.BASE64URL:return new Af(HT(n,e));case fr.DATA_URL:return new Af(Fb(e),Bb(e))}throw dm()}function qT(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Ub(n){let e;try{e=decodeURIComponent(n)}catch{throw Cl(fr.DATA_URL,"Malformed data URL.")}return qT(e)}function HT(n,e){switch(n){case fr.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw Cl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case fr.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw Cl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Vb(e)}catch(o){throw o.message.includes("polyfill")?o:Cl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class WT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Cl(fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=jb(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Fb(n){const e=new WT(n);return e.base64?HT(fr.BASE64,e.rest):Ub(e.rest)}function Bb(n){return new WT(n).contentType}function jb(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Hr{constructor(e,t){let i=0,o="";Sv(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Sv(this.data_)){const i=this.data_,o=Lb(i,e,t);return o===null?null:new Hr(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Hr(i,!0)}}static getBlob(...e){if(fm()){const t=e.map(i=>i instanceof Hr?i.data_:i);return new Hr(xb.apply(null,t))}else{const t=e.map(u=>Oh(u)?Mb(fr.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new Hr(o,!0)}}uploadData(){return this.data_}}function GT(n){let e;try{e=JSON.parse(n)}catch{return null}return Ab(e)?e:null}function zb(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $b(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function KT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function qb(n,e){return e}class Jt{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||qb}}let kc=null;function Hb(n){return!Oh(n)||n.length<2?n:KT(n)}function pm(){if(kc)return kc;const n=[];n.push(new Jt("bucket")),n.push(new Jt("generation")),n.push(new Jt("metageneration")),n.push(new Jt("name","fullPath",!0));function e(a,u){return Hb(u)}const t=new Jt("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new Jt("size");return o.xform=i,n.push(o),n.push(new Jt("timeCreated")),n.push(new Jt("updated")),n.push(new Jt("md5Hash",null,!0)),n.push(new Jt("cacheControl",null,!0)),n.push(new Jt("contentDisposition",null,!0)),n.push(new Jt("contentEncoding",null,!0)),n.push(new Jt("contentLanguage",null,!0)),n.push(new Jt("contentType",null,!0)),n.push(new Jt("metadata","customMetadata",!0)),kc=n,kc}function Wb(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new En(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Gb(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return Wb(i,n),i}function QT(n,e,t){const i=GT(e);return i===null?null:Gb(n,i,t)}function Kb(n,e,t,i){const o=GT(e);if(o===null||!Oh(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(y=>{const v=n.bucket,w=n.fullPath,S="/b/"+u(v)+"/o/"+u(w),M=eu(S,t,i),b=zT({alt:"media",token:y});return M+b})[0]}function XT(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class fa{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yr(n){if(!n)throw dm()}function mm(n,e){function t(i,o){const a=QT(n,o,e);return Yr(a!==null),a}return t}function Qb(n,e){function t(i,o){const a=QT(n,o,e);return Yr(a!==null),Kb(a,o,n.host,n._protocol)}return t}function tu(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=db():o=hb():t.getStatus()===402?o=cb(n.bucket):t.getStatus()===403?o=fb(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function YT(n){const e=tu(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=ub(n.path)),a.serverResponse=o.serverResponse,a}return t}function Xb(n,e,t){const i=e.fullServerUrl(),o=eu(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new fa(o,a,mm(n,t),u);return d.errorHandler=YT(e),d}function Yb(n,e,t){const i=e.fullServerUrl(),o=eu(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new fa(o,a,Qb(n,t),u);return d.errorHandler=YT(e),d}function Jb(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function JT(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Jb(null,e)),i}function ZT(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let X="";for(let se=0;se<2;se++)X=X+Math.random().toString().slice(2);return X}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const y=JT(e,i,o),v=XT(y,t),w="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+p+"--",M=Hr.getBlob(w,i,S);if(M===null)throw BT();const b={name:y.fullPath},U=eu(a,n.host,n._protocol),k="POST",J=n.maxUploadRetryTime,ne=new fa(U,k,mm(n,t),J);return ne.urlParams=b,ne.headers=u,ne.body=M.uploadData(),ne.errorHandler=tu(e),ne}class uh{constructor(e,t,i,o){this.current=e,this.total=t,this.finalized=!!i,this.metadata=o||null}}function gm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Yr(!1)}return Yr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Zb(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u=JT(e,i,o),d={name:u.fullPath},p=eu(a,n.host,n._protocol),y="POST",v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},w=XT(u,t),S=n.maxUploadRetryTime;function M(U){gm(U);let k;try{k=U.getResponseHeader("X-Goog-Upload-URL")}catch{Yr(!1)}return Yr(Oh(k)),k}const b=new fa(p,y,M,S);return b.urlParams=d,b.headers=v,b.body=w,b.errorHandler=tu(e),b}function eO(n,e,t,i){const o={"X-Goog-Upload-Command":"query"};function a(y){const v=gm(y,["active","final"]);let w=null;try{w=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yr(!1)}w||Yr(!1);const S=Number(w);return Yr(!isNaN(S)),new uh(S,i.size(),v==="final")}const u="POST",d=n.maxUploadRetryTime,p=new fa(t,u,a,d);return p.headers=o,p.errorHandler=tu(e),p}const Av=256*1024;function tO(n,e,t,i,o,a,u,d){const p=new uh(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw yb();const y=p.total-p.current;let v=y;o>0&&(v=Math.min(v,o));const w=p.current,S=w+v;let M="";v===0?M="finalize":y===v?M="upload, finalize":M="upload";const b={"X-Goog-Upload-Command":M,"X-Goog-Upload-Offset":`${p.current}`},U=i.slice(w,S);if(U===null)throw BT();function k(se,de){const ge=gm(se,["active","final"]),N=p.current+v,R=i.size();let P;return ge==="final"?P=mm(e,a)(se,de):P=null,new uh(N,R,ge==="final",P)}const J="POST",ne=e.maxUploadRetryTime,X=new fa(t,J,k,ne);return X.headers=b,X.body=U.uploadData(),X.progressCallback=d||null,X.errorHandler=tu(n),X}const an={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cf(n){switch(n){case"running":case"pausing":case"canceling":return an.RUNNING;case"paused":return an.PAUSED;case"success":return an.SUCCESS;case"canceled":return an.CANCELED;case"error":return an.ERROR;default:return an.ERROR}}class nO{constructor(e,t,i){if(Rb(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function jo(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class rO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,a){if(this.sent_)throw hl("cannot .send() more than once");if(Ji(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iO extends rO{initXhr(){this.xhr_.responseType="text"}}function ks(){return new iO}class sO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=pm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(rt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if($T(o.status,[]))if(a)o=UT();else{this.sleepTime=Math.max(this.sleepTime*2,lb),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(rt.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,a)=>{this._resolve=o,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=Zb(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,ks,e,t);this._request=o,o.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const o=eO(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(o,ks,t,i);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Av*this._chunkMultiplier,t=new uh(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((o,a)=>{let u;try{u=tO(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){this._error=p,this._transition("error");return}const d=this._ref.storage._makeRequest(u,ks,o,a,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Av*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Xb(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(i,ks,e,t);this._request=o,o.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=ZT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,ks,e,t);this._request=o,o.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=FT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Cf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,o){const a=new nO(t||void 0,i||void 0,o||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Cf(this._state)){case an.SUCCESS:jo(this._resolve.bind(null,this.snapshot))();break;case an.CANCELED:case an.ERROR:const t=this._reject;jo(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Cf(this._state)){case an.RUNNING:case an.PAUSED:e.next&&jo(e.next.bind(e,this.snapshot))();break;case an.SUCCESS:e.complete&&jo(e.complete.bind(e))();break;case an.CANCELED:case an.ERROR:e.error&&jo(e.error.bind(e,this._error))();break;default:e.error&&jo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class js{constructor(e,t){this._service=e,t instanceof En?this._location=t:this._location=En.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new js(e,t)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KT(this._location.path)}get storage(){return this._service}get parent(){const e=zb(this._location.path);if(e===null)return null;const t=new En(this._location.bucket,e);return new js(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Eb(e)}}function oO(n,e,t){n._throwIfRoot("uploadBytes");const i=ZT(n.storage,n._location,pm(),new Hr(e,!0),t);return n.storage.makeRequestWithTokens(i,ks).then(o=>({metadata:o,ref:n}))}function aO(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new sO(n,new Hr(e),t)}function lO(n){n._throwIfRoot("getDownloadURL");const e=Yb(n.storage,n._location,pm());return n.storage.makeRequestWithTokens(e,ks).then(t=>{if(t===null)throw _b();return t})}function uO(n,e){const t=$b(n._location.path,e),i=new En(n._location.bucket,t);return new js(n.storage,i)}function cO(n){return/^[A-Za-z]+:\/\//.test(n)}function hO(n,e){return new js(n,e)}function e0(n,e){if(n instanceof ym){const t=n;if(t._bucket==null)throw gb();const i=new js(t,t._bucket);return e!=null?e0(i,e):i}else return e!==void 0?uO(n,e):n}function dO(n,e){if(e&&cO(e)){if(n instanceof ym)return hO(n,e);throw ap("To use ref(service, url), the first argument must be a Storage instance.")}else return e0(n,e)}function Cv(n,e){const t=e?.[MT];return t==null?null:En.makeFromBucketSpec(t,n)}function fO(n,e,t,i={}){n.host=`${e}:${t}`;const o=Ji(e);o&&(gp(`https://${n.host}/b`),yp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:dE(a,n.app.options.projectId))}class ym{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=VT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ob,this._maxUploadRetryTime=ab,this._requests=new Set,o!=null?this._bucket=En.makeFromBucketSpec(o,this._host):this._bucket=Cv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=Cv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new js(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new wb(jT());{const u=Ob(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const Pv="@firebase/storage",kv="0.14.0";const t0="storage";function pO(n,e,t){return n=St(n),oO(n,e,t)}function mO(n,e,t){return n=St(n),aO(n,e,t)}function n0(n){return n=St(n),lO(n)}function r0(n,e){return n=St(n),dO(n,e)}function gO(n=Ep(),e){n=St(n);const i=ph(n,t0).getImmediate({identifier:e}),o=uE("storage");return o&&yO(i,...o),i}function yO(n,e,t,i={}){fO(n,e,t,i)}function _O(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new ym(t,i,o,e,Hs)}function vO(){Vs(new qi(t0,_O,"PUBLIC").setMultipleInstances(!0)),mr(Pv,kv,""),mr(Pv,kv,"esm2020")}vO();const EO={apiKey:"AIzaSyDWOk2bXsTLkqIrQOV598rmbuiyx-XVeUQ",authDomain:"aivora-41e35.firebaseapp.com",projectId:"aivora-41e35",storageBucket:"aivora-41e35.appspot.com",messagingSenderId:"840811130990",appId:"1:840811130990:web:5b06e2e623145806fab67f"},_m=mE(EO),pr=zC(_m),Ir=jN(_m),i0=gO(_m),s0=Z.createContext(null);function vm(){return Z.useContext(s0)}function wO({children:n}){const[e,t]=Z.useState(null),[i,o]=Z.useState(null),[a,u]=Z.useState(!0);Z.useEffect(()=>{const S=N1(pr,async M=>{if(t(M),M){const b=Xr(Ir,"users",M.uid),U=await bh(b);U.exists()?o(U.data()):(await Al(b,{email:M.email,name:"",profession:"",avatar:"",createdAt:new Date}),o({email:M.email,name:"",profession:"",avatar:""}))}else o(null);u(!1)});return()=>S()},[]);const w={user:e,profile:i,loading:a,login:(S,M)=>$E(pr,S,M),signup:async(S,M)=>{const b=await zE(pr,S,M);return await Al(Xr(Ir,"users",b.user.uid),{email:S,name:"",profession:"",avatar:"",createdAt:new Date}),b},logout:()=>b1(pr),updateProfileData:async S=>{if(!e)return;const M=Xr(Ir,"users",e.uid);await Al(M,{...i,...S},{merge:!0}),o(b=>({...b,...S}))}};return F.createElement(s0.Provider,{value:w},n)}function TO(){const n=mp();return Z.useEffect(()=>{n("/login")},[]),null}function IO(){const[n,e]=Z.useState(""),[t,i]=Z.useState(""),[o,a]=Z.useState(""),u=mp(),d=async()=>{try{const y=await $E(pr,n,t),v=Xr(Ir,"users",y.user.uid);if(!(await bh(v)).exists()){alert("No profession found. Please signup.");return}u("/dashboard")}catch(y){alert(y.message)}},p=async()=>{try{const y=await zE(pr,n,t);await Al(Xr(Ir,"users",y.user.uid),{email:n,profession:o}),u("/dashboard")}catch(y){alert(y.message)}};return F.createElement("div",{style:{padding:20}},F.createElement("h2",null,"Login / Signup"),F.createElement("input",{type:"email",placeholder:"Email",value:n,onChange:y=>e(y.target.value)}),F.createElement("br",null),F.createElement("br",null),F.createElement("input",{type:"password",placeholder:"Password",value:t,onChange:y=>i(y.target.value)}),F.createElement("br",null),F.createElement("br",null),F.createElement("input",{type:"text",placeholder:"Your Profession (Student, Doctor, Engineer...)",value:o,onChange:y=>a(y.target.value)}),F.createElement("br",null),F.createElement("br",null),F.createElement("button",{onClick:d},"Login"),F.createElement("button",{onClick:p,style:{marginLeft:10}},"Signup"))}function pa(){return F.createElement("nav",{className:"navbar"},F.createElement(hr,{to:"/"},"AIVORA"),F.createElement("div",null,F.createElement(hr,{to:"/"},"Home"),F.createElement(hr,{to:"/login"},"Login"),F.createElement(hr,{to:"/dashboard"},"Dashboard"),F.createElement(hr,{to:"/chat"},"Chat"),F.createElement(hr,{to:"/sos"},"SOS"),F.createElement(hr,{to:"/skills"},"Skills"),F.createElement(hr,{to:"/map"},"Map"),F.createElement(hr,{to:"/profile"},"Profile")))}function SO(){const{user:n}=vm(),[e,t]=Z.useState("");return Z.useEffect(()=>{if(!n)return;(async()=>{const o=Xr(Ir,"users",n.uid),a=await bh(o);a.exists()&&t(a.data().profession||"Not set")})()},[n]),F.createElement("div",null,F.createElement(pa,null),F.createElement("div",{style:{padding:"20px"}},F.createElement("div",{style:{background:"#f0f0f0",padding:"20px",borderRadius:"12px",marginBottom:"25px"}},F.createElement("h2",{style:{marginBottom:"5px"}},"Welcome, ",n?.email||"User"," "),F.createElement("p",{style:{fontSize:"16px",marginBottom:"10px"}},F.createElement("b",null,"Profession:")," ",e),F.createElement("p",{style:{color:"#555"}},"Explore personalized tools designed just for your profession.")),F.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"20px"}},F.createElement(dl,{title:"AI Chat Assistant",desc:"Ask anything, get smart answers.",link:"/chat"}),F.createElement(dl,{title:"Emergency SOS",desc:"Instant emergency support.",link:"/sos"}),F.createElement(dl,{title:"Skill Development",desc:"Learn new skills for your profession.",link:"/skills"}),F.createElement(dl,{title:"Live Map",desc:"Track live map and nearby help.",link:"/map"}),F.createElement(dl,{title:"Profile Settings",desc:"Update your personal details.",link:"/profile"}))))}function dl({title:n,desc:e,link:t}){return F.createElement(hr,{to:t,style:{textDecoration:"none",color:"inherit"}},F.createElement("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 3px 10px rgba(0,0,0,0.1)",transition:"0.2s"},onMouseOver:i=>i.currentTarget.style.transform="scale(1.05)",onMouseOut:i=>i.currentTarget.style.transform="scale(1)"},F.createElement("h3",null,n),F.createElement("p",{style:{color:"#666",marginTop:"8px"}},e)))}const RO="/.netlify/functions/chat";function AO(){const{user:n}=vm(),[e,t]=Z.useState([]),[i,o]=Z.useState(""),[a,u]=Z.useState(!1),[d,p]=Z.useState(!1),[y,v]=Z.useState(!1),[w,S]=Z.useState(0),[M,b]=Z.useState("helpful"),U=Z.useRef(null),k={helpful:{label:"Helpful Assistant",promptPrefix:"You are helpful and concise."},mentor:{label:"Career Mentor",promptPrefix:"You are a supportive career mentor. Focus on skills, roadmap and practical steps."},counselor:{label:"Emotional Support",promptPrefix:"You are empathetic and calm. Provide emotional support and safety suggestions when needed."},technical:{label:"Technical Expert",promptPrefix:"You are a technical expert. Provide code, explanations and step-by-step debugging."}};Z.useEffect(()=>{n&&J()},[n]),Z.useEffect(()=>{U.current?.scrollIntoView({behavior:"smooth"})},[e]);async function J(){try{const C=_v(Ir,"users",n.uid,"chats"),I=JN(C,ZN("createdAt","asc")),De=(await nb(I)).docs.map(Ie=>({id:Ie.id,...Ie.data()}));t(De)}catch(C){console.error("loadHistory",C)}}async function ne(C){if(n)try{const I=_v(Ir,"users",n.uid,"chats"),ye=await rb(I,{...C,createdAt:sb()});t(De=>De.map(Ie=>Ie.tempId===C.tempId?{...Ie,id:ye.id}:Ie))}catch(I){console.error("saveMessageToFirestore",I)}}function X(C){const I=C.target.files[0];if(!I||!n)return;const ye=`user_uploads/${n.uid}/${Date.now()}_${I.name}`,De=r0(i0,ye),Ie=mO(De,I);Ie.on("state_changed",be=>{const te=Math.round(be.bytesTransferred/be.totalBytes*100);S(te)},be=>{console.error("Upload error",be)},async()=>{const be=await n0(Ie.snapshot.ref);S(0),x(be,{isFile:!0,fileName:I.name})})}function se(C){if(!("speechSynthesis"in window))return;const I=new SpeechSynthesisUtterance(C);speechSynthesis.cancel(),speechSynthesis.speak(I)}function de(){if(!("webkitSpeechRecognition"in window||"SpeechRecognition"in window)){alert("Voice recognition not supported in this browser.");return}const C=window.SpeechRecognition||window.webkitSpeechRecognition,I=new C;I.lang="en-US",I.interimResults=!1,I.maxAlternatives=1,I.onresult=function(ye){const De=ye.results[0][0].transcript;o(Ie=>Ie?Ie+" "+De:De)},I.onend=()=>v(!1),I.onerror=ye=>{console.error("Speech error",ye),v(!1)},v(!0),I.start()}function ge(C,I){t(ye=>ye.map(De=>{if(De.id!==C)return De;const Ie=De.reactions||{};return Ie[I]=Ie[I]?Ie[I]+1:1,{...De,reactions:Ie}}))}function N(C){navigator.clipboard?.writeText(C),alert("Copied to clipboard")}function R(C){t(I=>I.filter(ye=>ye.id!==C))}function P(C){const I=k[M].promptPrefix;let ye="";return ye="",`${I}
User profession: ${ye}
User: ${C}
Assistant:`}async function x(C,I={}){if((!C||!C.trim())&&!I.isFile)return;const ye="t_"+Date.now(),De={tempId:ye,sender:"user",text:I.isFile?`Uploaded file: ${I.fileName||C}`:C,createdAt:new Date().toISOString()};t(be=>[...be,De]),ne({...De,tempId:ye}),u(!0);const Ie=I.isFile?`User uploaded file: ${C}`:P(C);try{const te=await(await fetch(RO,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:Ie,userId:n?.uid})})).json(),pe=te.response||te.reply||"Sorry, I couldn't craft an answer.",oe={sender:"bot",text:pe,createdAt:new Date().toISOString()};t(V=>[...V,oe]),ne(oe);try{se(pe)}catch(V){console.warn("TTS error",V)}}catch(be){console.error("AI call failed",be),t(te=>[...te,{sender:"bot",text:"Network error. Please try again."}])}finally{u(!1)}}function D(C){return F.createElement("div",{key:C.id||C.tempId,style:C.sender==="user"?We.userRow:We.botRow},C.sender!=="user"&&F.createElement("img",{src:"/bot-avatar.png",alt:"bot",style:We.avatar}),F.createElement("div",{style:{...We.msgBubble,background:C.sender==="user"?"#2563eb":"#ececec",color:C.sender==="user"?"#fff":"#111"}},F.createElement("div",{style:{whiteSpace:"pre-wrap"}},C.text),C.fileUrl&&F.createElement("div",{style:{marginTop:8}},F.createElement("a",{href:C.fileUrl,target:"_blank",rel:"noreferrer"},"Open file")),F.createElement("div",{style:We.msgMeta},F.createElement("div",{style:{display:"flex",gap:8}},F.createElement("button",{style:We.iconBtn,onClick:()=>N(C.text)},"Copy"),F.createElement("button",{style:We.iconBtn,onClick:()=>ge(C.id,"")},""),F.createElement("button",{style:We.iconBtn,onClick:()=>ge(C.id,"")},""),F.createElement("button",{style:We.iconBtn,onClick:()=>R(C.id)},"Delete")),F.createElement("div",{style:{color:"#666",fontSize:12}},C.createdAt?new Date(C.createdAt).toLocaleString():"")),C.reactions&&F.createElement("div",{style:{marginTop:6}},Object.entries(C.reactions).map(([I,ye])=>F.createElement("span",{key:I,style:{marginRight:8}},I," ",ye)))),C.sender==="user"&&F.createElement("img",{src:"/user-avatar.png",alt:"you",style:We.avatar}))}return F.createElement("div",{style:d?We.pageDark:We.page},F.createElement(pa,null),F.createElement("div",{style:We.container},F.createElement("div",{style:We.headerRow},F.createElement("div",null,F.createElement("h2",{style:{margin:0}},"Aivora  Smart Assistant"),F.createElement("div",{style:{color:"#666",fontSize:14}},"Real AI responses, voice, uploads & history")),F.createElement("div",{style:{display:"flex",gap:10,alignItems:"center"}},F.createElement("select",{value:M,onChange:C=>b(C.target.value),style:We.select},Object.entries(k).map(([C,I])=>F.createElement("option",{value:C,key:C},I.label))),F.createElement("label",{style:{display:"flex",alignItems:"center",gap:8}},F.createElement("input",{type:"checkbox",checked:d,onChange:C=>p(C.target.checked)}),"Dark"))),F.createElement("div",{style:We.panel},F.createElement("div",{style:We.chatColumn},F.createElement("div",{style:We.messagesWrap},e.length===0&&F.createElement("div",{style:{color:"#666"}},"No messages yet  start a conversation."),e.map(D),a&&F.createElement("div",{style:{marginTop:8,color:"#666"}},"Aivora is typing..."),F.createElement("div",{ref:U})),F.createElement("div",{style:We.controlsRow},F.createElement("input",{value:i,onChange:C=>o(C.target.value),placeholder:"Ask Aivora anything...",onKeyDown:C=>C.key==="Enter"&&x(i),style:We.input}),F.createElement("button",{onClick:()=>x(i),style:We.sendButton,disabled:a},"Send"),F.createElement("button",{onClick:de,style:We.voiceButton},y?"Listening...":""),F.createElement("label",{style:We.uploadLabel},"",F.createElement("input",{type:"file",style:{display:"none"},onChange:X}))),w>0&&F.createElement("div",{style:{marginTop:8}},"Uploading: ",w,"%")),F.createElement("div",{style:We.sideColumn},F.createElement("div",{style:We.card},F.createElement("h4",null,"Quick tips"),F.createElement("ul",null,F.createElement("li",null,"Ask for step-by-step guides"),F.createElement("li",null,"Upload files for the assistant to analyze"),F.createElement("li",null,"Change persona for specialized replies"))),F.createElement("div",{style:We.card},F.createElement("h4",null,"Recent topics"),F.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},F.createElement("button",{style:We.chip,onClick:()=>x("Give me a 7-day learning plan for web dev")},"Web dev plan"),F.createElement("button",{style:We.chip,onClick:()=>x("How can I prepare for interviews?")},"Interview prep"),F.createElement("button",{style:We.chip,onClick:()=>x("Suggest safety steps if I feel unsafe")},"Safety tips"))),F.createElement("div",{style:We.card},F.createElement("h4",null,"Chat History"),F.createElement("div",{style:{maxHeight:150,overflow:"auto"}},e.slice(-6).reverse().map((C,I)=>F.createElement("div",{key:I,style:{marginBottom:8}},F.createElement("small",{style:{color:"#444"}},C.sender==="user"?"You: ":"Aivora: "),F.createElement("div",{style:{color:"#222"}},C.text.slice(0,60),C.text.length>60?"...":"")))))))))}const CO={containerWidth:1100},We={page:{minHeight:"100vh",background:"#f5f7fb"},pageDark:{minHeight:"100vh",background:"#0b1020",color:"#fff"},container:{maxWidth:CO.containerWidth,margin:"20px auto",padding:16},headerRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},panel:{display:"flex",gap:16},chatColumn:{flex:2,display:"flex",flexDirection:"column",gap:10},messagesWrap:{background:"transparent",padding:12,borderRadius:10,minHeight:420,overflowY:"auto"},botRow:{display:"flex",gap:10,marginBottom:12,alignItems:"flex-end"},userRow:{display:"flex",gap:10,marginBottom:12,justifyContent:"flex-end",alignItems:"flex-end"},avatar:{width:36,height:36,borderRadius:50},msgBubble:{padding:12,borderRadius:12,maxWidth:"78%",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},msgMeta:{display:"flex",justifyContent:"space-between",marginTop:8},iconBtn:{background:"transparent",border:"none",cursor:"pointer",color:"#555"},controlsRow:{display:"flex",gap:8,alignItems:"center",marginTop:6},input:{flex:1,padding:12,borderRadius:8,border:"1px solid #ddd"},sendButton:{padding:"10px 14px",background:"#0b84ff",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},voiceButton:{padding:"8px 10px",borderRadius:8,border:"1px solid #ddd",background:"#fff",cursor:"pointer"},uploadLabel:{padding:"8px 10px",borderRadius:8,border:"1px solid #ddd",background:"#fff",cursor:"pointer"},sideColumn:{width:320,display:"flex",flexDirection:"column",gap:12},card:{background:"#fff",padding:12,borderRadius:8,boxShadow:"0 3px 8px rgba(0,0,0,0.06)"},select:{padding:8,borderRadius:8},chip:{padding:"8px 10px",borderRadius:8,border:"1px solid #ddd",background:"#f6f7fb",cursor:"pointer"}};function o0(n,e){return function(){return n.apply(e,arguments)}}const{toString:PO}=Object.prototype,{getPrototypeOf:Em}=Object,{iterator:Dh,toStringTag:a0}=Symbol,xh=(n=>e=>{const t=PO.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=n=>(n=n.toLowerCase(),e=>xh(e)===n),Lh=n=>e=>typeof e===n,{isArray:ma}=Array,sa=Lh("undefined");function nu(n){return n!==null&&!sa(n)&&n.constructor!==null&&!sa(n.constructor)&&ln(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const l0=Hn("ArrayBuffer");function kO(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&l0(n.buffer),e}const NO=Lh("string"),ln=Lh("function"),u0=Lh("number"),ru=n=>n!==null&&typeof n=="object",bO=n=>n===!0||n===!1,jc=n=>{if(xh(n)!=="object")return!1;const e=Em(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(a0 in n)&&!(Dh in n)},OO=n=>{if(!ru(n)||nu(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},DO=Hn("Date"),xO=Hn("File"),LO=Hn("Blob"),VO=Hn("FileList"),MO=n=>ru(n)&&ln(n.pipe),UO=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ln(n.append)&&((e=xh(n))==="formdata"||e==="object"&&ln(n.toString)&&n.toString()==="[object FormData]"))},FO=Hn("URLSearchParams"),[BO,jO,zO,$O]=["ReadableStream","Request","Response","Headers"].map(Hn),qO=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function iu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ma(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(nu(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function c0(n,e){if(nu(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const bs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,h0=n=>!sa(n)&&n!==bs;function lp(){const{caseless:n,skipUndefined:e}=h0(this)&&this||{},t={},i=(o,a)=>{const u=n&&c0(t,a)||a;jc(t[u])&&jc(o)?t[u]=lp(t[u],o):jc(o)?t[u]=lp({},o):ma(o)?t[u]=o.slice():(!e||!sa(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&iu(arguments[o],i);return t}const HO=(n,e,t,{allOwnKeys:i}={})=>(iu(e,(o,a)=>{t&&ln(o)?n[a]=o0(o,t):n[a]=o},{allOwnKeys:i}),n),WO=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),GO=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},KO=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Em(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},QO=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},XO=n=>{if(!n)return null;if(ma(n))return n;let e=n.length;if(!u0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},YO=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Em(Uint8Array)),JO=(n,e)=>{const i=(n&&n[Dh]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},ZO=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},eD=Hn("HTMLFormElement"),tD=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),Nv=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),nD=Hn("RegExp"),d0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};iu(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},rD=n=>{d0(n,(e,t)=>{if(ln(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ln(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},iD=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return ma(n)?i(n):i(String(n).split(e)),t},sD=()=>{},oD=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function aD(n){return!!(n&&ln(n.append)&&n[a0]==="FormData"&&n[Dh])}const lD=n=>{const e=new Array(10),t=(i,o)=>{if(ru(i)){if(e.indexOf(i)>=0)return;if(nu(i))return i;if(!("toJSON"in i)){e[o]=i;const a=ma(i)?[]:{};return iu(i,(u,d)=>{const p=t(u,o+1);!sa(p)&&(a[d]=p)}),e[o]=void 0,a}}return i};return t(n,0)},uD=Hn("AsyncFunction"),cD=n=>n&&(ru(n)||ln(n))&&ln(n.then)&&ln(n.catch),f0=((n,e)=>n?setImmediate:e?((t,i)=>(bs.addEventListener("message",({source:o,data:a})=>{o===bs&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),bs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ln(bs.postMessage)),hD=typeof queueMicrotask<"u"?queueMicrotask.bind(bs):typeof process<"u"&&process.nextTick||f0,dD=n=>n!=null&&ln(n[Dh]),H={isArray:ma,isArrayBuffer:l0,isBuffer:nu,isFormData:UO,isArrayBufferView:kO,isString:NO,isNumber:u0,isBoolean:bO,isObject:ru,isPlainObject:jc,isEmptyObject:OO,isReadableStream:BO,isRequest:jO,isResponse:zO,isHeaders:$O,isUndefined:sa,isDate:DO,isFile:xO,isBlob:LO,isRegExp:nD,isFunction:ln,isStream:MO,isURLSearchParams:FO,isTypedArray:YO,isFileList:VO,forEach:iu,merge:lp,extend:HO,trim:qO,stripBOM:WO,inherits:GO,toFlatObject:KO,kindOf:xh,kindOfTest:Hn,endsWith:QO,toArray:XO,forEachEntry:JO,matchAll:ZO,isHTMLForm:eD,hasOwnProperty:Nv,hasOwnProp:Nv,reduceDescriptors:d0,freezeMethods:rD,toObjectSet:iD,toCamelCase:tD,noop:sD,toFiniteNumber:oD,findKey:c0,global:bs,isContextDefined:h0,isSpecCompliantForm:aD,toJSONObject:lD,isAsyncFn:uD,isThenable:cD,setImmediate:f0,asap:hD,isIterable:dD};function Ne(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const p0=Ne.prototype,m0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{m0[n]={value:n}});Object.defineProperties(Ne,m0);Object.defineProperty(p0,"isAxiosError",{value:!0});Ne.from=(n,e,t,i,o,a)=>{const u=Object.create(p0);H.toFlatObject(n,u,function(v){return v!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return Ne.call(u,d,p,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const fD=null;function up(n){return H.isPlainObject(n)||H.isArray(n)}function g0(n){return H.endsWith(n,"[]")?n.slice(0,-2):n}function bv(n,e,t){return n?n.concat(e).map(function(o,a){return o=g0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function pD(n){return H.isArray(n)&&!n.some(up)}const mD=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Vh(n,e,t){if(!H.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,k){return!H.isUndefined(k[U])});const i=t.metaTokens,o=t.visitor||v,a=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function y(b){if(b===null)return"";if(H.isDate(b))return b.toISOString();if(H.isBoolean(b))return b.toString();if(!p&&H.isBlob(b))throw new Ne("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(b)||H.isTypedArray(b)?p&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function v(b,U,k){let J=b;if(b&&!k&&typeof b=="object"){if(H.endsWith(U,"{}"))U=i?U:U.slice(0,-2),b=JSON.stringify(b);else if(H.isArray(b)&&pD(b)||(H.isFileList(b)||H.endsWith(U,"[]"))&&(J=H.toArray(b)))return U=g0(U),J.forEach(function(X,se){!(H.isUndefined(X)||X===null)&&e.append(u===!0?bv([U],se,a):u===null?U:U+"[]",y(X))}),!1}return up(b)?!0:(e.append(bv(k,U,a),y(b)),!1)}const w=[],S=Object.assign(mD,{defaultVisitor:v,convertValue:y,isVisitable:up});function M(b,U){if(!H.isUndefined(b)){if(w.indexOf(b)!==-1)throw Error("Circular reference detected in "+U.join("."));w.push(b),H.forEach(b,function(J,ne){(!(H.isUndefined(J)||J===null)&&o.call(e,J,H.isString(ne)?ne.trim():ne,U,S))===!0&&M(J,U?U.concat(ne):[ne])}),w.pop()}}if(!H.isObject(n))throw new TypeError("data must be an object");return M(n),e}function Ov(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function wm(n,e){this._pairs=[],n&&Vh(n,this,e)}const y0=wm.prototype;y0.append=function(e,t){this._pairs.push([e,t])};y0.toString=function(e){const t=e?function(i){return e.call(this,i,Ov)}:Ov;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function gD(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _0(n,e,t){if(!e)return n;const i=t&&t.encode||gD;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=H.isURLSearchParams(e)?e.toString():new wm(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class Dv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(i){i!==null&&e(i)})}}const v0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yD=typeof URLSearchParams<"u"?URLSearchParams:wm,_D=typeof FormData<"u"?FormData:null,vD=typeof Blob<"u"?Blob:null,ED={isBrowser:!0,classes:{URLSearchParams:yD,FormData:_D,Blob:vD},protocols:["http","https","file","blob","url","data"]},Tm=typeof window<"u"&&typeof document<"u",cp=typeof navigator=="object"&&navigator||void 0,wD=Tm&&(!cp||["ReactNative","NativeScript","NS"].indexOf(cp.product)<0),TD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ID=Tm&&window.location.href||"http://localhost",SD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tm,hasStandardBrowserEnv:wD,hasStandardBrowserWebWorkerEnv:TD,navigator:cp,origin:ID},Symbol.toStringTag,{value:"Module"})),Gt={...SD,...ED};function RD(n,e){return Vh(n,new Gt.classes.URLSearchParams,{visitor:function(t,i,o,a){return Gt.isNode&&H.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function AD(n){return H.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function CD(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function E0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),p=a>=t.length;return u=!u&&H.isArray(o)?o.length:u,p?(H.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!H.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&H.isArray(o[u])&&(o[u]=CD(o[u])),!d)}if(H.isFormData(n)&&H.isFunction(n.entries)){const t={};return H.forEachEntry(n,(i,o)=>{e(AD(i),o,t,0)}),t}return null}function PD(n,e,t){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const su={transitional:v0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=H.isObject(e);if(a&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(E0(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return RD(e,this.formSerializer).toString();if((d=H.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Vh(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),PD(e)):e}],transformResponse:[function(e){const t=this.transitional||su.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?Ne.from(d,Ne.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],n=>{su.headers[n]={}});const kD=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ND=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&kD[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},xv=Symbol("internals");function fl(n){return n&&String(n).trim().toLowerCase()}function zc(n){return n===!1||n==null?n:H.isArray(n)?n.map(zc):String(n)}function bD(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const OD=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Pf(n,e,t,i,o){if(H.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(i))return e.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(e)}}function DD(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function xD(n,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let un=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,p,y){const v=fl(p);if(!v)throw new Error("header name must be a non-empty string");const w=H.findKey(o,v);(!w||o[w]===void 0||y===!0||y===void 0&&o[w]!==!1)&&(o[w||p]=zc(d))}const u=(d,p)=>H.forEach(d,(y,v)=>a(y,v,p));if(H.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(H.isString(e)&&(e=e.trim())&&!OD(e))u(ND(e),t);else if(H.isObject(e)&&H.isIterable(e)){let d={},p,y;for(const v of e){if(!H.isArray(v))throw TypeError("Object iterator must return a key-value pair");d[y=v[0]]=(p=d[y])?H.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=fl(e),e){const i=H.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return bD(o);if(H.isFunction(t))return t.call(this,o,i);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=fl(e),e){const i=H.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Pf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=fl(u),u){const d=H.findKey(i,u);d&&(!t||Pf(i,i[d],d,t))&&(delete i[d],o=!0)}}return H.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||Pf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return H.forEach(this,(o,a)=>{const u=H.findKey(i,a);if(u){t[u]=zc(o),delete t[a];return}const d=e?DD(a):String(a).trim();d!==a&&delete t[a],t[d]=zc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&H.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[xv]=this[xv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=fl(u);i[d]||(xD(o,u),i[d]=!0)}return H.isArray(e)?e.forEach(a):a(e),this}};un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(un.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});H.freezeMethods(un);function kf(n,e){const t=this||su,i=e||t,o=un.from(i.headers);let a=i.data;return H.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function w0(n){return!!(n&&n.__CANCEL__)}function ga(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(ga,Ne,{__CANCEL__:!0});function T0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function LD(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function VD(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=i[a];u||(u=y),t[o]=p,i[o]=y;let w=a,S=0;for(;w!==o;)S+=t[w++],w=w%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),y-u<e)return;const M=v&&y-v;return M?Math.round(S*1e3/M):void 0}}function MD(n,e){let t=0,i=1e3/e,o,a;const u=(y,v=Date.now())=>{t=v,o=null,a&&(clearTimeout(a),a=null),n(...y)};return[(...y)=>{const v=Date.now(),w=v-t;w>=i?u(y,v):(o=y,a||(a=setTimeout(()=>{a=null,u(o)},i-w)))},()=>o&&u(o)]}const ch=(n,e,t=3)=>{let i=0;const o=VD(50,250);return MD(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,p=u-i,y=o(p),v=u<=d;i=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&v?(d-u)/y:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(w)},t)},Lv=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Vv=n=>(...e)=>H.asap(()=>n(...e)),UD=Gt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Gt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,FD=Gt.hasStandardBrowserEnv?{write(n,e,t,i,o,a,u){if(typeof document>"u")return;const d=[`${n}=${encodeURIComponent(e)}`];H.isNumber(t)&&d.push(`expires=${new Date(t).toUTCString()}`),H.isString(i)&&d.push(`path=${i}`),H.isString(o)&&d.push(`domain=${o}`),a===!0&&d.push("secure"),H.isString(u)&&d.push(`SameSite=${u}`),document.cookie=d.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function BD(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function jD(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function I0(n,e,t){let i=!BD(e);return n&&(i||t==!1)?jD(n,e):e}const Mv=n=>n instanceof un?{...n}:n;function zs(n,e){e=e||{};const t={};function i(y,v,w,S){return H.isPlainObject(y)&&H.isPlainObject(v)?H.merge.call({caseless:S},y,v):H.isPlainObject(v)?H.merge({},v):H.isArray(v)?v.slice():v}function o(y,v,w,S){if(H.isUndefined(v)){if(!H.isUndefined(y))return i(void 0,y,w,S)}else return i(y,v,w,S)}function a(y,v){if(!H.isUndefined(v))return i(void 0,v)}function u(y,v){if(H.isUndefined(v)){if(!H.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function d(y,v,w){if(w in e)return i(y,v);if(w in n)return i(void 0,y)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,v,w)=>o(Mv(y),Mv(v),w,!0)};return H.forEach(Object.keys({...n,...e}),function(v){const w=p[v]||o,S=w(n[v],e[v],v);H.isUndefined(S)&&w!==d||(t[v]=S)}),t}const S0=n=>{const e=zs({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=un.from(u),e.url=_0(I0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),H.isFormData(t)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(H.isFunction(t.getHeaders)){const p=t.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([v,w])=>{y.includes(v.toLowerCase())&&u.set(v,w)})}}if(Gt.hasStandardBrowserEnv&&(i&&H.isFunction(i)&&(i=i(e)),i||i!==!1&&UD(e.url))){const p=o&&a&&FD.read(a);p&&u.set(o,p)}return e},zD=typeof XMLHttpRequest<"u",$D=zD&&function(n){return new Promise(function(t,i){const o=S0(n);let a=o.data;const u=un.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,v,w,S,M,b;function U(){M&&M(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function J(){if(!k)return;const X=un.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),de={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:X,config:n,request:k};T0(function(N){t(N),U()},function(N){i(N),U()},de),k=null}"onloadend"in k?k.onloadend=J:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(J)},k.onabort=function(){k&&(i(new Ne("Request aborted",Ne.ECONNABORTED,n,k)),k=null)},k.onerror=function(se){const de=se&&se.message?se.message:"Network Error",ge=new Ne(de,Ne.ERR_NETWORK,n,k);ge.event=se||null,i(ge),k=null},k.ontimeout=function(){let se=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const de=o.transitional||v0;o.timeoutErrorMessage&&(se=o.timeoutErrorMessage),i(new Ne(se,de.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,k)),k=null},a===void 0&&u.setContentType(null),"setRequestHeader"in k&&H.forEach(u.toJSON(),function(se,de){k.setRequestHeader(de,se)}),H.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),d&&d!=="json"&&(k.responseType=o.responseType),y&&([S,b]=ch(y,!0),k.addEventListener("progress",S)),p&&k.upload&&([w,M]=ch(p),k.upload.addEventListener("progress",w),k.upload.addEventListener("loadend",M)),(o.cancelToken||o.signal)&&(v=X=>{k&&(i(!X||X.type?new ga(null,n,k):X),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const ne=LD(o.url);if(ne&&Gt.protocols.indexOf(ne)===-1){i(new Ne("Unsupported protocol "+ne+":",Ne.ERR_BAD_REQUEST,n));return}k.send(a||null)})},qD=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(y){if(!o){o=!0,d();const v=y instanceof Error?y:this.reason;i.abort(v instanceof Ne?v:new ga(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(a):y.removeEventListener("abort",a)}),n=null)};n.forEach(y=>y.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>H.asap(d),p}},HD=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},WD=async function*(n,e){for await(const t of GD(n))yield*HD(t,e)},GD=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Uv=(n,e,t,i)=>{const o=WD(n,e);let a=0,u,d=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await o.next();if(y){d(),p.close();return}let w=v.byteLength;if(t){let S=a+=w;t(S)}p.enqueue(new Uint8Array(v))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},Fv=64*1024,{isFunction:Nc}=H,KD=(({Request:n,Response:e})=>({Request:n,Response:e}))(H.global),{ReadableStream:Bv,TextEncoder:jv}=H.global,zv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},QD=n=>{n=H.merge.call({skipUndefined:!0},KD,n);const{fetch:e,Request:t,Response:i}=n,o=e?Nc(e):typeof fetch=="function",a=Nc(t),u=Nc(i);if(!o)return!1;const d=o&&Nc(Bv),p=o&&(typeof jv=="function"?(b=>U=>b.encode(U))(new jv):async b=>new Uint8Array(await new t(b).arrayBuffer())),y=a&&d&&zv(()=>{let b=!1;const U=new t(Gt.origin,{body:new Bv,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!U}),v=u&&d&&zv(()=>H.isReadableStream(new i("").body)),w={stream:v&&(b=>b.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!w[b]&&(w[b]=(U,k)=>{let J=U&&U[b];if(J)return J.call(U);throw new Ne(`Response type '${b}' is not supported`,Ne.ERR_NOT_SUPPORT,k)})});const S=async b=>{if(b==null)return 0;if(H.isBlob(b))return b.size;if(H.isSpecCompliantForm(b))return(await new t(Gt.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(H.isArrayBufferView(b)||H.isArrayBuffer(b))return b.byteLength;if(H.isURLSearchParams(b)&&(b=b+""),H.isString(b))return(await p(b)).byteLength},M=async(b,U)=>{const k=H.toFiniteNumber(b.getContentLength());return k??S(U)};return async b=>{let{url:U,method:k,data:J,signal:ne,cancelToken:X,timeout:se,onDownloadProgress:de,onUploadProgress:ge,responseType:N,headers:R,withCredentials:P="same-origin",fetchOptions:x}=S0(b),D=e||fetch;N=N?(N+"").toLowerCase():"text";let C=qD([ne,X&&X.toAbortSignal()],se),I=null;const ye=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let De;try{if(ge&&y&&k!=="get"&&k!=="head"&&(De=await M(R,J))!==0){let V=new t(U,{method:"POST",body:J,duplex:"half"}),G;if(H.isFormData(J)&&(G=V.headers.get("content-type"))&&R.setContentType(G),V.body){const[Ae,Se]=Lv(De,ch(Vv(ge)));J=Uv(V.body,Fv,Ae,Se)}}H.isString(P)||(P=P?"include":"omit");const Ie=a&&"credentials"in t.prototype,be={...x,signal:C,method:k.toUpperCase(),headers:R.normalize().toJSON(),body:J,duplex:"half",credentials:Ie?P:void 0};I=a&&new t(U,be);let te=await(a?D(I,x):D(U,be));const pe=v&&(N==="stream"||N==="response");if(v&&(de||pe&&ye)){const V={};["status","statusText","headers"].forEach(Oe=>{V[Oe]=te[Oe]});const G=H.toFiniteNumber(te.headers.get("content-length")),[Ae,Se]=de&&Lv(G,ch(Vv(de),!0))||[];te=new i(Uv(te.body,Fv,Ae,()=>{Se&&Se(),ye&&ye()}),V)}N=N||"text";let oe=await w[H.findKey(w,N)||"text"](te,b);return!pe&&ye&&ye(),await new Promise((V,G)=>{T0(V,G,{data:oe,headers:un.from(te.headers),status:te.status,statusText:te.statusText,config:b,request:I})})}catch(Ie){throw ye&&ye(),Ie&&Ie.name==="TypeError"&&/Load failed|fetch/i.test(Ie.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,b,I),{cause:Ie.cause||Ie}):Ne.from(Ie,Ie&&Ie.code,b,I)}}},XD=new Map,R0=n=>{let e=n&&n.env||{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,p,y,v=XD;for(;d--;)p=a[d],y=v.get(p),y===void 0&&v.set(p,y=d?new Map:QD(e)),v=y;return y};R0();const Im={http:fD,xhr:$D,fetch:{get:R0}};H.forEach(Im,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const $v=n=>`- ${n}`,YD=n=>H.isFunction(n)||n===null||n===!1;function JD(n,e){n=H.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!YD(i)&&(o=Im[(d=String(i)).toLowerCase()],o===void 0))throw new Ne(`Unknown adapter '${d}'`);if(o&&(H.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map($v).join(`
`):" "+$v(u[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o}const A0={getAdapter:JD,adapters:Im};function Nf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ga(null,n)}function qv(n){return Nf(n),n.headers=un.from(n.headers),n.data=kf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),A0.getAdapter(n.adapter||su.adapter,n)(n).then(function(i){return Nf(n),i.data=kf.call(n,n.transformResponse,i),i.headers=un.from(i.headers),i},function(i){return w0(i)||(Nf(n),i&&i.response&&(i.response.data=kf.call(n,n.transformResponse,i.response),i.response.headers=un.from(i.response.headers))),Promise.reject(i)})}const C0="1.13.2",Mh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Mh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Hv={};Mh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+C0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new Ne(o(u," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!Hv[u]&&(Hv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Mh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function ZD(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],p=d===void 0||u(d,a,n);if(p!==!0)throw new Ne("option "+a+" must be "+p,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+a,Ne.ERR_BAD_OPTION)}}const $c={assertOptions:ZD,validators:Mh},cr=$c.validators;let xs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Dv,response:new Dv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=zs(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&$c.assertOptions(i,{silentJSONParsing:cr.transitional(cr.boolean),forcedJSONParsing:cr.transitional(cr.boolean),clarifyTimeoutError:cr.transitional(cr.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:$c.assertOptions(o,{encode:cr.function,serialize:cr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$c.assertOptions(t,{baseUrl:cr.spelling("baseURL"),withXsrfToken:cr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&H.merge(a.common,a[t.method]);a&&H.forEach(["delete","get","head","post","put","patch","common"],b=>{delete a[b]}),t.headers=un.concat(u,a);const d=[];let p=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(p=p&&U.synchronous,d.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let v,w=0,S;if(!p){const b=[qv.bind(this),void 0];for(b.unshift(...d),b.push(...y),S=b.length,v=Promise.resolve(t);w<S;)v=v.then(b[w++],b[w++]);return v}S=d.length;let M=t;for(;w<S;){const b=d[w++],U=d[w++];try{M=b(M)}catch(k){U.call(this,k);break}}try{v=qv.call(this,M)}catch(b){return Promise.reject(b)}for(w=0,S=y.length;w<S;)v=v.then(y[w++],y[w++]);return v}getUri(e){e=zs(this.defaults,e);const t=I0(e.baseURL,e.url,e.allowAbsoluteUrls);return _0(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){xs.prototype[e]=function(t,i){return this.request(zs(i||{},{method:e,url:t,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(zs(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}xs.prototype[e]=t(),xs.prototype[e+"Form"]=t(!0)});let ex=class P0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new ga(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new P0(function(o){e=o}),cancel:e}}};function tx(n){return function(t){return n.apply(null,t)}}function nx(n){return H.isObject(n)&&n.isAxiosError===!0}const hp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(hp).forEach(([n,e])=>{hp[e]=n});function k0(n){const e=new xs(n),t=o0(xs.prototype.request,e);return H.extend(t,xs.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return k0(zs(n,o))},t}const ht=k0(su);ht.Axios=xs;ht.CanceledError=ga;ht.CancelToken=ex;ht.isCancel=w0;ht.VERSION=C0;ht.toFormData=Vh;ht.AxiosError=Ne;ht.Cancel=ht.CanceledError;ht.all=function(e){return Promise.all(e)};ht.spread=tx;ht.isAxiosError=nx;ht.mergeConfig=zs;ht.AxiosHeaders=un;ht.formToJSON=n=>E0(H.isHTMLForm(n)?new FormData(n):n);ht.getAdapter=A0.getAdapter;ht.HttpStatusCode=hp;ht.default=ht;const{Axios:dx,AxiosError:fx,CanceledError:px,isCancel:mx,CancelToken:gx,VERSION:yx,all:_x,Cancel:vx,isAxiosError:Ex,spread:wx,toFormData:Tx,AxiosHeaders:Ix,HttpStatusCode:Sx,formToJSON:Rx,getAdapter:Ax,mergeConfig:Cx}=ht,N0="http://localhost:5001/aivora-41e35/us-central1";async function rx(n,e){return(await ht.post(`${N0}/triggerSOS`,{location:e},{headers:n?{Authorization:`Bearer ${n}`}:{}})).data}async function ix(n,e){return(await ht.post(`${N0}/generateSkill`,{profile:e},{headers:n?{Authorization:`Bearer ${n}`}:{}})).data}function sx(){const[n,e]=Z.useState("");async function t(){if(e("Getting location..."),!navigator.geolocation)return e("Geolocation not supported");navigator.geolocation.getCurrentPosition(async i=>{const o={lat:i.coords.latitude,lng:i.coords.longitude};try{const a=pr.currentUser?await pr.currentUser.getIdToken():null;await rx(a,o),e(" SOS sent successfully!")}catch(a){console.error(a),e("Failed to send SOS")}},()=>e("Permission denied"))}return F.createElement("div",null,F.createElement(pa,null),F.createElement("div",{style:{padding:20}},F.createElement("h2",null,"Emergency SOS"),F.createElement("button",{onClick:t,style:{background:"red",color:"white",padding:"10px 20px",borderRadius:"8px",fontSize:"18px"}},"SEND SOS"),F.createElement("p",null,n)))}function ox(){const[n,e]=Z.useState(""),[t,i]=Z.useState(null);async function o(){const a=pr.currentUser?await pr.currentUser.getIdToken():null,u=await ix(a,{field:n});i(u)}return F.createElement("div",null,F.createElement(pa,null),F.createElement("div",{style:{padding:20}},F.createElement("h2",null,"Skill Development"),F.createElement("input",{placeholder:"Your field (e.g., IT, medical, agriculture...)",value:n,onChange:a=>e(a.target.value)}),F.createElement("button",{onClick:o},"Generate Roadmap"),t&&F.createElement("div",{style:{marginTop:20}},F.createElement("h3",null,"Learning Roadmap"),F.createElement("pre",null,JSON.stringify(t,null,2)))))}function ax(){const{user:n}=vm(),[e,t]=Z.useState(!0),[i,o]=Z.useState(!1),[a,u]=Z.useState(""),[d,p]=Z.useState(!1),[y,v]=Z.useState(""),[w,S]=Z.useState(""),[M,b]=Z.useState(""),[U,k]=Z.useState(""),[J,ne]=Z.useState("");Z.useEffect(()=>{if(!n)return;(async()=>{const ge=Xr(Ir,"users",n.uid),N=await bh(ge);if(N.exists()){const R=N.data();u(R.profilePic||""),v(R.name||""),S(R.profession||""),b(R.phone||""),k(R.age||""),ne(R.bio||"")}t(!1)})()},[n]);const X=async()=>{const de=Xr(Ir,"users",n.uid);await Al(de,{name:y,profession:w,phone:M,age:U,bio:J,email:n.email,profilePic:a},{merge:!0}),o(!1),alert("Profile updated successfully!")},se=async de=>{if(!de)return;p(!0);const ge=r0(i0,`profilePics/${n.uid}.jpg`);await pO(ge,de);const N=await n0(ge);u(N),p(!1),alert("Profile picture updated!")};return e?F.createElement("p",{style:{padding:20}},"Loading profile..."):F.createElement("div",null,F.createElement(pa,null),F.createElement("div",{style:{padding:20,maxWidth:650,margin:"0 auto"}},F.createElement("h2",{style:{marginBottom:20}},"My Profile"),F.createElement("div",{style:{background:"#fff",padding:20,borderRadius:12,boxShadow:"0 3px 10px rgba(0,0,0,0.1)"}},F.createElement("div",{style:{textAlign:"center",marginBottom:20}},F.createElement("img",{src:a||"https://cdn-icons-png.flaticon.com/512/147/147144.png",alt:"Profile",style:{width:120,height:120,borderRadius:"50%",objectFit:"cover",border:"3px solid #ddd"}}),i&&F.createElement("div",{style:{marginTop:10}},F.createElement("input",{type:"file",accept:"image/*",onChange:de=>se(de.target.files[0])}),d&&F.createElement("p",null,"Uploading..."))),F.createElement(zo,{label:"Email",value:n.email,disabled:!0}),F.createElement(zo,{label:"Full Name",value:y,editable:i,onChange:v}),F.createElement(zo,{label:"Profession",value:w,editable:i,onChange:S}),F.createElement(zo,{label:"Phone Number",value:M,editable:i,onChange:b}),F.createElement(zo,{label:"Age",value:U,editable:i,onChange:k}),F.createElement(zo,{label:"Bio / About You",value:J,editable:i,onChange:ne,textarea:!0}),i?F.createElement(F.Fragment,null,F.createElement("button",{onClick:X,style:{...bf,background:"#28a745"}},"Save Changes"),F.createElement("button",{onClick:()=>o(!1),style:{...bf,background:"#dc3545",marginLeft:10}},"Cancel")):F.createElement("button",{onClick:()=>o(!0),style:bf},"Edit Profile"))))}function zo({label:n,value:e,editable:t,onChange:i,textarea:o,disabled:a}){return F.createElement("div",{style:{marginBottom:15}},F.createElement("p",{style:{marginBottom:5}},F.createElement("b",null,n,":")),a?F.createElement("p",null,e):t?o?F.createElement("textarea",{value:e,onChange:u=>i(u.target.value),style:{width:"100%",height:80,padding:10,borderRadius:8,border:"1px solid #ccc"}}):F.createElement("input",{value:e,onChange:u=>i(u.target.value),style:{width:"100%",padding:10,borderRadius:8,border:"1px solid #ccc"}}):F.createElement("p",{style:{color:"#444"}},e||"Not set"))}const bf={padding:"10px 18px",border:"none",color:"white",background:"#007bff",cursor:"pointer",borderRadius:8,marginTop:10};function lx(){return F.createElement("div",null,F.createElement(pa,null),F.createElement("div",{style:{padding:20}},F.createElement("h2",null,"Live Location Map"),F.createElement("p",null,"Coming soon: Google Maps integration using"," ",F.createElement("code",null,"VITE_GOOGLE_MAPS_API_KEY"),".")))}HI.createRoot(document.getElementById("root")).render(F.createElement(F.StrictMode,null,F.createElement(wO,null,F.createElement(qS,null,F.createElement(MS,null,F.createElement(qr,{path:"/",element:F.createElement(TO,null)}),F.createElement(qr,{path:"/login",element:F.createElement(IO,null)}),F.createElement(qr,{path:"/dashboard",element:F.createElement(SO,null)}),F.createElement(qr,{path:"/chat",element:F.createElement(AO,null)}),F.createElement(qr,{path:"/sos",element:F.createElement(sx,null)}),F.createElement(qr,{path:"/skills",element:F.createElement(ox,null)}),F.createElement(qr,{path:"/profile",element:F.createElement(ax,null)}),F.createElement(qr,{path:"/map",element:F.createElement(lx,null)}))))));
